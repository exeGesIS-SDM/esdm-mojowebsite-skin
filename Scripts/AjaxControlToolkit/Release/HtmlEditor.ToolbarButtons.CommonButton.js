Type.registerNamespace("Sys.Extended.UI.HtmlEditor.ToolbarButtons");Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton=function(n){Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton.initializeBase(this,[n]);this._loaded=!1;this._preservePlace=!1;this._editPanel=null;this._activeModes=null;this._app_onload$delegate=Function.createDelegate(this,this._app_onload);this._cssClass="";this._onmouseover$delegate=Function.createDelegate(this,this._onmouseover);this._onmouseout$delegate=Function.createDelegate(this,this._onmouseout);this._onmousedown$delegate=Function.createDelegate(this,this._onmousedown);this._onmouseup$delegate=Function.createDelegate(this,this._onmouseup);this._onclick$delegate=Function.createDelegate(this,this._onclick)};Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton.prototype={get_preservePlace:function(){return this._preservePlace},set_preservePlace:function(n){this._preservePlace=n},set_activeEditPanel:function(n){this._editPanel=n;this._editPanel==null?this.hideButton():this.isAllowedActiveMode(this._editPanel.get_activeMode())&&this.canBeShown()?(this.showButton(),this.onEditPanelActivity()):this.hideButton()},isImage:function(){return!0},checkRangeInDesign:function(){if(typeof this._designPanel=="undefined"||this._designPanel==null||this._designPanel.isPopup())return!1;var n=Sys.Extended.UI.HtmlEditor.getSelParent(this._designPanel);return n.nodeType==3&&(n=n.parentNode),n.ownerDocument==this._designPanel._doc},get_buttonName:function(){var n=Object.getType(this).getName();return n.substring(n.lastIndexOf(".")+1)},get_message:function(messageName){var expression="Sys.Extended.UI.Resources.HtmlEditor_toolbar_button_"+this.get_buttonName()+"_message_"+messageName;return eval(expression)},isDisplayed:function(){var t=this.get_element(),n;return t?(n=t.style,n.display!="none"&&n.visibility!="hidden"):!1},hideButton:function(){var n=this.get_element();n&&(this._preservePlace?n.style.visibility="hidden":n.style.display="none")},showButton:function(){var n=this.get_element();n&&(n.style.display=="none"&&(n.style.display=""),this._preservePlace&&(n.style.visibility="visible"))},canBeShown:function(){return!0},onEditPanelActivity:function(){},get_activeModes:function(){return this._activeModes==null&&(this._activeModes=[]),this._activeModes},set_activeModes:function(n){this.get_activeModes().push(n)},get_activeModesIds:function(){},set_activeModesIds:function(n){for(var i=n.split(";"),t=0;t<i.length;t++)this.set_activeModes(parseInt(i[t]))},set_toolTip:function(n){this.get_element().title=n},get_toolTip:function(){return this.get_element().title},isAllowedActiveMode:function(n){for(var t=0;t<this.get_activeModes().length;t++)if(this.get_activeModes()[t]==n)return!0;return!1},initialize:function(){Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton.callBaseMethod(this,"initialize");Sys.Application.add_load(this._app_onload$delegate);var n=this.get_element();if(this._preservePlace&&!this.canBeShown()&&(n.style.display="none"),this._cssClass=n.className,this.isImage()&&$addHandlers(n,{mouseover:this._onmouseover$delegate,mouseout:this._onmouseout$delegate,mousedown:this._onmousedown$delegate,mouseup:this._onmouseup$delegate,click:this._onclick$delegate}),Sys.Extended.UI.HtmlEditor.isIE){function t(n){var i,r;if(n.nodeType==1&&n.tagName)for(i=n.tagName.toUpperCase(),i!="INPUT"&&i!="TEXTAREA"&&i!="IFRAME"&&(n.unselectable="on"),r=0;r<n.childNodes.length;r++)t(n.childNodes.item(r))}t(n)}else try{n.style.MozUserSelect="none";n.parentNode.style.MozUserSelect="none"}catch(i){}},dispose:function(){this.isImage()&&$common.removeHandlers(this.get_element(),{mouseover:this._onmouseover$delegate,mouseout:this._onmouseout$delegate,mousedown:this._onmousedown$delegate,mouseup:this._onmouseup$delegate,click:this._onclick$delegate});this._loaded=!1;Sys.Application.remove_load(this._app_onload$delegate);Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton.callBaseMethod(this,"dispose")},_app_onload:function(){this.onButtonLoaded();this._loaded=!0},onButtonLoaded:function(){},_onmouseover:function(){return this.isEnable()?(Sys.UI.DomElement.addCssClass(this.get_element(),this._cssClass+"_hover"),!0):!1},_onmouseout:function(){return this.isEnable()?(Sys.UI.DomElement.removeCssClass(this.get_element(),this._cssClass+"_hover"),Sys.UI.DomElement.removeCssClass(this.get_element(),this._cssClass+"_mousedown"),!0):!1},_onmousedown:function(){return this.isEnable()?(Sys.UI.DomElement.addCssClass(this.get_element(),this._cssClass+"_mousedown"),!1):null},_onmouseup:function(){return this.isEnable()?(Sys.UI.DomElement.removeCssClass(this.get_element(),this._cssClass+"_mousedown"),!0):!1},_onclick:function(){return this.isEnable()?!0:!1},isEnable:function(){return this._loaded?this._editPanel==null?!1:!0:!1},setActivity:function(n){n?Sys.UI.DomElement.addCssClass(this.get_element(),this._cssClass+"_active"):Sys.UI.DomElement.removeCssClass(this.get_element(),this._cssClass+"_active")}};Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton.registerClass("Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton",Sys.UI.Control);