Type.registerNamespace("Sys.Extended.UI.HtmlEditor");Sys.Extended.UI.HtmlEditor.Editor=function(n){Sys.Extended.UI.HtmlEditor.Editor.initializeBase(this,[n]);this._editPanel=null;this._changingToolbar=null;(Sys.Extended.UI.HtmlEditor.isIE&&Sys.Browser.version==8&&document.compatMode!="BackCompat"||Sys.Extended.UI.HtmlEditor.isOpera)&&(this._onresize$delegate=Function.createDelegate(this,this._onresize))};Sys.Extended.UI.HtmlEditor.Editor.prototype={get_autofocus:function(){return this._editPanel.get_autofocus()},set_autofocus:function(n){this._editPanel.set_autofocus(n)},get_content:function(){return this._editPanel.get_content()},set_content:function(n){this._editPanel.set_content(n)},get_activeMode:function(){return this._editPanel.get_activeMode()},set_activeMode:function(n){this._editPanel.set_activeMode(n)},get_editPanel:function(){return this._editPanel},set_editPanel:function(n){this._editPanel=n},get_changingToolbar:function(){return this._changingToolbar},set_changingToolbar:function(n){this._changingToolbar=n},add_propertyChanged:function(n){this._editPanel.add_propertyChanged(n)},remove_propertyChanged:function(n){this._editPanel.remove_propertyChanged(n)},initialize:function(){var n,t,i,r;Sys.Extended.UI.HtmlEditor.Editor.callBaseMethod(this,"initialize");n=this.get_element();t=n.className;Sys.UI.DomElement.removeCssClass(n,t);Sys.UI.DomElement.addCssClass(n,"ajax__htmleditor_editor_base");Sys.UI.DomElement.addCssClass(n,t);Sys.Extended.UI.HtmlEditor.isIE||document.compatMode=="BackCompat"||(this.get_element().style.height="100%");(Sys.Extended.UI.HtmlEditor.isIE&&Sys.Browser.version==8&&document.compatMode!="BackCompat"||Sys.Extended.UI.HtmlEditor.isOpera)&&($addHandlers(n,{resize:this._onresize$delegate}),i=this.get_editPanel(),this._saved_setActive=i._setActive,i._setActive=Function.createDelegate(this,this._setActive),r=this,Sys.Extended.UI.HtmlEditor.isOpera?setTimeout(function(){r._ensureVisibleResize()},0):r._ensureVisibleResize())},_setActive:function(n){var t=this;Function.createDelegate(this.get_editPanel(),this._saved_setActive)(n);Sys.Extended.UI.HtmlEditor.isReallyVisible(this.get_element())?t._ensureVisibleResize():setTimeout(function(){t._ensureVisibleResize()},0)},_ensureVisibleResize:function(){var t=!1,n;Sys.Extended.UI.HtmlEditor.isReallyVisible(this.get_element())||(t=!0,n=Sys.Extended.UI.HtmlEditor.setElementVisibility(this.get_element()));this._onresize();t&&(Sys.Extended.UI.HtmlEditor.restoreElementVisibility(n),delete n)},dispose:function(){(Sys.Extended.UI.HtmlEditor.isIE&&Sys.Browser.version==8&&document.compatMode!="BackCompat"||Sys.Extended.UI.HtmlEditor.isOpera)&&($common.removeHandlers(this.get_element(),{resize:this._onresize$delegate}),this.get_editPanel()._setActive=this._saved_setActive);Sys.Extended.UI.HtmlEditor.Editor.callBaseMethod(this,"dispose")},_onresize:function(n){var t,i;try{t=this.get_editPanel().get_element().parentNode;(typeof n=="undefined"||n==null)&&(t.style.height="");i=Sys.Extended.UI.HtmlEditor.Editor.MidleCellHeightForIE(t.parentNode.parentNode.parentNode,t.parentNode);t.style.height=i;typeof this.get_editPanel().get_activePanel()._onresize!="undefined"&&this.get_editPanel().get_activePanel()._onresize()}catch(r){}return!0}};Sys.Extended.UI.HtmlEditor.Editor.registerClass("Sys.Extended.UI.HtmlEditor.Editor",Sys.UI.Control);Sys.Extended.UI.HtmlEditor.Editor.MidleCellHeightForIE=function(n,t){var f="100%",e,i,r,u,o;if(Sys.Extended.UI.HtmlEditor.isIE&&document.compatMode!="BackCompat"||Sys.Extended.UI.HtmlEditor.isOpera)try{for(e=2,i=0;i<n.rows.length;i++)n.rows[i]!=t&&(e+=n.rows[i].offsetHeight+1);r=n.clientHeight;(Sys.Browser.version==8||Sys.Extended.UI.HtmlEditor.isOpera)&&(u=n.style.height,o=n.parentNode.style.height,u.indexOf("px")>0?r=parseInt(u):u=="100%"&&o.indexOf("px")>0&&(r=parseInt(o)));f=(r-e)*100/(r*1)+"%"}catch(s){f=""}return f};