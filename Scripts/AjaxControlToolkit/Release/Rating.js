Type.registerNamespace("Sys.Extended.UI");Sys.Extended.UI.RatingBehavior=function(n){Sys.Extended.UI.RatingBehavior.initializeBase(this,[n]);this._starCssClass="rating_star";this._filledStarCssClass="rating_filled";this._emptyStarCssClass="rating_empty";this._waitingStarCssClass=null;this._isServerControl=!1;this._readOnly=!1;this._ratingValue=0;this._currentRating=0;this._maxRatingValue=5;this._tag="";this._ratingDirection=0;this._stars=null;this._callbackID=null;this._mouseOutHandler=Function.createDelegate(this,this._onMouseOut);this._starClickHandler=Function.createDelegate(this,this._onStarClick);this._starMouseOverHandler=Function.createDelegate(this,this._onStarMouseOver);this._keyDownHandler=Function.createDelegate(this,this._onKeyDownBack);this._autoPostBack=!1};Sys.Extended.UI.RatingBehavior.prototype={initialize:function(){var t,n;for(Sys.Extended.UI.RatingBehavior.callBaseMethod(this,"initialize"),t=this.get_element(),this._stars=[],n=1;n<=this._maxRatingValue;n++)starElement=$get(t.id+"_Star_"+n),starElement.value=n,Array.add(this._stars,starElement),$addHandler(starElement,"click",this._starClickHandler),$addHandler(starElement,"mouseover",this._starMouseOverHandler);$addHandler(t,"mouseout",this._mouseOutHandler);$addHandler(t,"keydown",this._keyDownHandler);this._update()},dispose:function(){var i=this.get_element(),n,t;if(this._stars){for(n=0;n<this._stars.length;n++)t=this._stars[n],$removeHandler(t,"click",this._starClickHandler),$removeHandler(t,"mouseover",this._starMouseOverHandler);this._stars=null}$removeHandler(i,"mouseout",this._mouseOutHandler);$removeHandler(i,"keydown",this._keyDownHandler);Sys.Extended.UI.RatingBehavior.callBaseMethod(this,"dispose")},_onError:function(n){alert(String.format(Sys.Extended.UI.Resources.Rating_CallbackError,n))},_receiveServerData:function(n,t){t._waitingMode(!1);t.raise_endClientCallback(n)},_onMouseOut:function(){this._readOnly||(this._currentRating=this._ratingValue,this._update(),this.raise_mouseOut(this._currentRating))},_onStarClick:function(){this._readOnly||(this._ratingValue!=this._currentRating&&this.set_rating(this._currentRating),this.doCallback())},_onStarMouseOver:function(n){this._readOnly||(this._currentRating=this._ratingDirection==0?n.target.value:this._maxRatingValue+1-n.target.value,this._update(),this.raise_mouseOver(this._currentRating))},_onKeyDownBack:function(n){if(!this._readOnly){var t=n.keyCode?n.keyCode:n.rawEvent.keyCode;t==Sys.UI.Key.right||t==Sys.UI.Key.up?(this._currentRating=Math.min(this._currentRating+1,this._maxRatingValue),this.set_rating(this._currentRating),n.preventDefault(),n.stopPropagation()):(t==Sys.UI.Key.left||t==Sys.UI.Key.down)&&(this._currentRating=Math.max(this._currentRating-1,1),this.set_rating(this._currentRating),n.preventDefault(),n.stopPropagation())}},_waitingMode:function(n){for(var t,i=0;i<this._maxRatingValue;i++)t=this._ratingDirection==0?this._stars[i]:this._stars[this._maxRatingValue-i-1],this._currentRating>i?this._waitingStarCssClass&&(n?(Sys.UI.DomElement.removeCssClass(t,this._filledStarCssClass),Sys.UI.DomElement.addCssClass(t,this._waitingStarCssClass)):(Sys.UI.DomElement.removeCssClass(t,this._waitingStarCssClass),Sys.UI.DomElement.addCssClass(t,this._filledStarCssClass))):(this._waitingStarCssClass&&Sys.UI.DomElement.removeCssClass(t,this._waitingStarCssClass),Sys.UI.DomElement.removeCssClass(t,this._filledStarCssClass),Sys.UI.DomElement.addCssClass(t,this._emptyStarCssClass))},_update:function(){var i=this.get_element(),n,t;for($get(i.id+"_A").title=this._currentRating,n=0;n<this._maxRatingValue;n++)t=this._ratingDirection==0?this._stars[n]:this._stars[this._maxRatingValue-n-1],this._currentRating>n?(Sys.UI.DomElement.removeCssClass(t,this._emptyStarCssClass),Sys.UI.DomElement.addCssClass(t,this._filledStarCssClass)):(Sys.UI.DomElement.removeCssClass(t,this._filledStarCssClass),Sys.UI.DomElement.addCssClass(t,this._emptyStarCssClass))},add_rated:function(n){this.get_events().addHandler("rated",n)},remove_rated:function(n){this.get_events().removeHandler("rated",n)},raise_rated:function(n){var t=this.get_events().getHandler("rated");t&&t(this,new Sys.Extended.UI.RatingEventArgs(n))},add_Rated:function(n){Sys.Extended.Deprecated("add_Rated(handler)","add_rated(handler)");this.add_rated(n)},remove_Rated:function(n){Sys.Extended.Deprecated("remove_Rated(handler)","remove_rated(handler)");this.remove_rated(n)},raiseRated:function(n){Sys.Extended.Deprecated("raiseRated(rating)","raise_rated(rating)");this.raise_rated(n)},add_mouseOver:function(n){this.get_events().addHandler("mouseOver",n)},remove_mouseOver:function(n){this.get_events().removeHandler("mouseOver",n)},raise_mouseOver:function(){var n=this.get_events().getHandler("mouseOver");n&&n(this,new Sys.Extended.UI.RatingEventArgs(rating_tmp))},add_MouseOver:function(n){Sys.Extended.Deprecated("add_MouseOver(handler)","add_mouseOver(handler)");this.add_mouseOver(n)},remove_MouseOver:function(n){Sys.Extended.Deprecated("remove_MouseOver(handler)","remove_mouseOver(handler)");this.remove_mouseOver(n)},raiseMouseOver:function(n){Sys.Extended.Deprecated("raiseMouseOver(rating_tmp)","raise_mouseOver(ratingTmp)");this.raise_mouseOver(n)},add_mouseOut:function(n){this.get_events().addHandler("mouseOut",n)},remove_mouseOut:function(n){this.get_events().removeHandler("mouseOut",n)},raise_mouseOut:function(n){var t=this.get_events().getHandler("mouseOut");t&&t(this,new Sys.Extended.UI.RatingEventArgs(n))},add_MouseOut:function(n){Sys.Extended.Deprecated("add_MouseOut(handler)","add_mouseOut(handler)");this.add_mouseOut(n)},remove_MouseOut:function(n){Sys.Extended.Deprecated("remove_MouseOut(handler)","remove_mouseOut(handler)");this.remove_mouseOut(n)},raiseMouseOut:function(n){Sys.Extended.Deprecated("raiseMouseOut(rating_old)","raise_mouseOut(ratingOld)");this.raise_mouseOut(n)},add_endClientCallback:function(n){this.get_events().addHandler("endClientCallback",n)},remove_endClientCallback:function(n){this.get_events().removeHandler("endClientCallback",n)},raise_endClientCallback:function(n){var t=this.get_events().getHandler("endClientCallback");t&&t(this,new Sys.Extended.UI.RatingCallbackResultEventArgs(n))},add_EndClientCallback:function(n){Sys.Extended.Deprecated("add_EndClientCallback(handler)","add_endClientCallback(handler)");this.add_endClientCallback(n)},remove_EndClientCallback:function(n){Sys.Extended.Deprecated("remove_EndClientCallback(handler)","remove_endClientCallback(handler)");this.remove_endClientCallback(n)},raiseEndClientCallback:function(n){Sys.Extended.Deprecated("raiseEndClientCallback()","raise_endClientCallback()");this.raise_endClientCallback(n)},get_autoPostBack:function(){return this._autoPostBack},set_autoPostBack:function(n){this._autoPostBack=n},get_AutoPostBack:function(){return Sys.Extended.Deprecated("get_AutoPostBack()","get_autoPostBack()"),this.get_autoPostBack()},set_AutoPostBack:function(n){Sys.Extended.Deprecated("set_AutoPostBack(value)","set_autoPostBack(value)");this.set_autoPostBack(n)},get_stars:function(){return this._stars},get_Stars:function(){return Sys.Extended.Deprecated("get_Stars()","get_stars()"),this.get_stars()},get_tag:function(){return this._tag},set_tag:function(n){this._tag!=n&&(this._tag=n,this.raisePropertyChanged("tag"))},get_Tag:function(){return Sys.Extended.Deprecated("get_Tag()","get_tag()"),this.get_tag()},set_Tag:function(n){Sys.Extended.Deprecated("set_Tag(value)","set_tag(value)");this.set_tag(n)},get_callbackID:function(){return this._callbackID},set_callbackID:function(n){this._callbackID=n},get_CallbackID:function(){return Sys.Extended.Deprecated("get_CallbackID()","get_callbackID()"),this.get_callbackID()},set_CallbackID:function(n){Sys.Extended.Deprecated("set_CallbackID(value)","set_callbackID(value)");this.set_callbackID(n)},get_ratingDirection:function(){return this._ratingDirection},set_ratingDirection:function(n){this._ratingDirection!=n&&(this._ratingDirection=n,this.get_isInitialized()&&this._update(),this.raisePropertyChanged("ratingDirection"))},get_RatingDirection:function(){return Sys.Extended.Deprecated("get_RatingDirection()","get_ratingDirection()"),this.get_ratingDirection()},set_RatingDirection:function(n){Sys.Extended.Deprecated("set_RatingDirection(value)","set_ratingDirection(value)");this.set_ratingDirection(n)},get_emptyStarCssClass:function(){return this._emptyStarCssClass},set_emptyStarCssClass:function(n){this._emptyStarCssClass!=n&&(this._emptyStarCssClass=n,this.raisePropertyChanged("emptyStarCssClass"))},get_EmptyStarCssClass:function(){return Sys.Extended.Deprecated("get_EmptyStarCssClass()","get_emptyStarCssClass()"),this.get_emptyStarCssClass()},set_EmptyStarCssClass:function(n){Sys.Extended.Deprecated("set_EmptyStarCssClass(value)","set_emptyStarCssClass(value)");this.set_emptyStarCssClass(n)},get_filledStarCssClass:function(){return this._filledStarCssClass},set_filledStarCssClass:function(n){this._filledStarCssClass!=n&&(this._filledStarCssClass=n,this.raisePropertyChanged("filledStarCssClass"))},get_FilledStarCssClass:function(){return Sys.Extended.Deprecated("get_FilledStarCssClass()","get_filledStarCssClass()"),this.get_filledStarCssClass()},set_FilledStarCssClass:function(n){Sys.Extended.Deprecated("set_FilledStarCssClass(value)","set_filledStarCssClass(value)");this.set_filledStarCssClass(n)},get_waitingStarCssClass:function(){return this._waitingStarCssClass},set_waitingStarCssClass:function(n){this._waitingStarCssClass!=n&&(this._waitingStarCssClass=n,this.raisePropertyChanged("waitingStarCssClass"))},get_WaitingStarCssClass:function(){return Sys.Extended.Deprecated("get_WaitingStarCssClass()","get_waitingStarCssClass()"),this.get_waitingStarCssClass()},set_WaitingStarCssClass:function(n){Sys.Extended.Deprecated("set_WaitingStarCssClass(value)","set_waitingStarCssClass(value)");this.set_waitingStarCssClass(n)},doCallback:function(){if(this._isServerControl){this._waitingMode(!0);var n=this._currentRating+";"+this._tag,t=this._callbackID;this._autoPostBack?__doPostBack(t,n):WebForm_DoCallback(t,n,this._receiveServerData,this,this._onError,!0)}},get_rating:function(){var n=Sys.Extended.UI.RatingBehavior.callBaseMethod(this,"get_ClientState");return n!==null&&n.length&&(this._ratingValue=n),this._ratingValue==""&&(this._ratingValue=null),this._ratingValue},set_rating:function(n){if(this._ratingValue!=n&&(this._ratingValue=n,this._currentRating=n,this.get_isInitialized())){if(n<0||n>this._maxRatingValue)return;this._update();Sys.Extended.UI.RatingBehavior.callBaseMethod(this,"set_ClientState",[this._ratingValue]);this.raisePropertyChanged("rating");this.raise_rated(this._currentRating);this.doCallback()}},get_Rating:function(){return Sys.Extended.Deprecated("get_Rating()","get_rating()"),this.get_rating()},set_Rating:function(n){Sys.Extended.Deprecated("set_Rating(value)","set_rating(value)");this.set_rating(n)},get_maxRating:function(){return this._maxRatingValue},set_maxRating:function(n){this._maxRatingValue!=n&&(this._maxRatingValue=n,this.raisePropertyChanged("maxRating"))},get_MaxRating:function(){return Sys.Extended.Deprecated("get_MaxRating()","get_maxRating()"),this.get_maxRating()},set_MaxRating:function(n){Sys.Extended.Deprecated("set_MaxRating(value)","set_maxRating(value)");this.set_maxRating(n)},get_readOnly:function(){return this._readOnly},set_readOnly:function(n){this._readOnly!=n&&(this._readOnly=n,this.raisePropertyChanged("readOnly"))},get_ReadOnly:function(){return Sys.Extended.Deprecated("get_ReadOnly()","get_readOnly()"),this.get_readOnly()},set_ReadOnly:function(n){Sys.Extended.Deprecated("set_ReadOnly(value)","set_readOnly(value)");this.set_readOnly(n)},get_starCssClass:function(){return this._starCssClass},set_starCssClass:function(n){this._starCssClass!=n&&(this._starCssClass=n,this.raisePropertyChanged("starCssClass"))},get_StarCssClass:function(){return Sys.Extended.Deprecated("get_StarCssClass()","get_starCssClass()"),this.get_starCssClass()},set_StarCssClass:function(n){Sys.Extended.Deprecated("set_StarCssClass(value)","set_starCssClass(value)");this.set_starCssClass(n)}};Sys.Extended.UI.RatingBehavior.registerClass("Sys.Extended.UI.RatingBehavior",Sys.Extended.UI.BehaviorBase);Sys.Extended.UI.RatingEventArgs=function(n){Sys.Extended.UI.RatingEventArgs.initializeBase(this);this._rating=n};Sys.Extended.UI.RatingEventArgs.prototype={get_Rating:function(){return this._rating}};Sys.Extended.UI.RatingEventArgs.registerClass("Sys.Extended.UI.RatingEventArgs",Sys.EventArgs);Sys.Extended.UI.RatingCallbackResultEventArgs=function(n){Sys.Extended.UI.RatingCallbackResultEventArgs.initializeBase(this);this._result=n};Sys.Extended.UI.RatingCallbackResultEventArgs.prototype={get_CallbackResult:function(){return this._result}};Sys.Extended.UI.RatingCallbackResultEventArgs.registerClass("Sys.Extended.UI.RatingCallbackResultEventArgs",Sys.EventArgs);