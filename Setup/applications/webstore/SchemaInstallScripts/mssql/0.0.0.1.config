/****** Object:  Table [dbo].[ws_OfferHistory]    Script Date: 03/27/2007 17:22:42 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OfferHistory](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_OfferHistory_Guid]  DEFAULT (newid()),
	[OfferGuid] [uniqueidentifier] NULL,
	[StoreGuid] [uniqueidentifier] NULL,
	[TaxClassGuid] [uniqueidentifier] NULL,
	[IsVisible] [bit] NOT NULL,
	[IsSpecial] [bit] NOT NULL,
	[Created] [datetime] NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[CreatedFromIP] [nvarchar](255) NOT NULL,
	[IsDeleted] [bit] NOT NULL,
	[DeletedTime] [datetime] NULL,
	[DeletedBy] [uniqueidentifier] NULL,
	[DeletedFromIP] [nvarchar](255) NULL,
	[LastModified] [datetime] NULL,
	[LastModifiedBy] [uniqueidentifier] NULL,
	[LastModifiedFromIP] [nvarchar](255) NULL,
	[LogTime] [datetime] NOT NULL CONSTRAINT [DF_ws_OfferHistory_LogTime]  DEFAULT (getutcdate()),
 CONSTRAINT [PK_ws_OfferHistory] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_OfferAvailabilityHistory]    Script Date: 03/27/2007 17:22:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OfferAvailabilityHistory](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_OfferAvailHistory_Guid]  DEFAULT (newid()),
	[AvailabilityGuid] [uniqueidentifier] NOT NULL,
	[OfferGuid] [uniqueidentifier] NOT NULL,
	[BeginUTC] [datetime] NOT NULL,
	[EndUTC] [datetime] NOT NULL,
	[RequiresOfferCode] [bit] NOT NULL,
	[OfferCode] [nvarchar](50) NOT NULL,
	[MaxAllowedPerCustomer] [int] NOT NULL,
	[Created] [datetime] NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[CreatedFromIP] [nvarchar](255) NOT NULL,
	[IsDeleted] [bit] NOT NULL,
	[DeletedBy] [uniqueidentifier] NULL,
	[DeletedTime] [datetime] NULL,
	[DeletedFromIP] [nvarchar](255) NULL,
	[LastModified] [datetime] NULL,
	[LastModifedBy] [uniqueidentifier] NULL,
	[LastModifedFromIP] [nvarchar](255) NULL,
	[LogTime] [datetime] NOT NULL CONSTRAINT [DF_ws_OfferAvailabilityHistory_LogTime]  DEFAULT (getutcdate()),
 CONSTRAINT [PK_ws_OfferAvailibilityHistory] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_CartOrderInfo]    Script Date: 03/27/2007 17:20:49 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_CartOrderInfo](
	[CartGuid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_Cart_CartID]  DEFAULT (newid()),
	[CustomerName] [nvarchar](255) NULL,
	[CustomerCompany] [nvarchar](255) NULL,
	[CustomerAddressLine1] [nvarchar](255) NULL,
	[CustomerAddressLine2] [nvarchar](255) NULL,
	[CustomerSuburb] [nvarchar](255) NULL,
	[CustomerCity] [nvarchar](255) NULL,
	[CustomerPostalCode] [nvarchar](20) NULL,
	[CustomerState] [nvarchar](255) NULL,
	[CustomerCountry] [nvarchar](255) NULL,
	[CustomerTelephoneDay] [nvarchar](32) NULL,
	[CustomerTelephoneNight] [nvarchar](32) NULL,
	[CustomerEmail] [nvarchar](96) NULL,
	[CustomerEmailVerified] [bit] NOT NULL CONSTRAINT [DF_ws_Cart_CustomerEmailVerified]  DEFAULT ((0)),
	[DeliveryName] [nvarchar](255) NULL,
	[DeliveryCompany] [nvarchar](255) NULL,
	[DeliveryAddress1] [nvarchar](255) NULL,
	[DeliveryAddress2] [nvarchar](255) NULL,
	[DeliverySuburb] [nvarchar](255) NULL,
	[DeliveryCity] [nvarchar](255) NULL,
	[DeliveryPostalCode] [nvarchar](20) NULL,
	[DeliveryState] [nvarchar](255) NULL,
	[DeliveryCountry] [nvarchar](255) NULL,
	[BillingName] [nvarchar](255) NULL,
	[BillingCompany] [nvarchar](255) NULL,
	[BillingAddress1] [nvarchar](255) NULL,
	[BillingAddress2] [nvarchar](255) NULL,
	[BillingSuburb] [nvarchar](255) NULL,
	[BillingCity] [nvarchar](255) NULL,
	[BillingPostalCode] [nvarchar](20) NULL,
	[BillingState] [nvarchar](255) NULL,
	[BillingCountry] [nvarchar](255) NULL,
	[CardTypeGuid] [uniqueidentifier] NOT NULL,
	[CardOwner] [nvarchar](100) NULL,
	[CardNumber] [nvarchar](255) NULL,
	[CardExpires] [nvarchar](6) NULL,
	[CardSecurityCode] [nvarchar](50) NULL,
	[Completed] [datetime] NULL,
	[CompletedFromIP] [nvarchar](255) NULL,
	[TaxZoneGuid] [uniqueidentifier] NULL,
 CONSTRAINT [PK_ws_Cart] PRIMARY KEY CLUSTERED 
(
	[CartGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_OrderStatus]    Script Date: 03/27/2007 17:24:40 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OrderStatus](
	[Guid] [uniqueidentifier] NOT NULL,
	[Sort] [int] NOT NULL CONSTRAINT [DF_wsCartOrderStatus_Sort]  DEFAULT ((0)),
 CONSTRAINT [PK_wsCartOrderStatus] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_Currency]    Script Date: 03/27/2007 17:21:05 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_Currency](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_Currency_Guid]  DEFAULT (newid()),
	[Title] [nvarchar](50) NOT NULL,
	[Code] [nchar](3) NOT NULL,
	[SymbolLeft] [nvarchar](15) NULL,
	[SymbolRight] [nvarchar](15) NULL,
	[DecimalPointChar] [nchar](1) NULL,
	[ThousandsPointChar] [nchar](1) NULL,
	[DecimalPlaces] [nchar](1) NULL,
	[Value] [decimal](13, 8) NULL,
	[LastModified] [datetime] NULL,
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_Currency_Created]  DEFAULT (getutcdate()),
 CONSTRAINT [PK_ws_Currency] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_ProductFile]    Script Date: 03/27/2007 17:25:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_ProductFile](
	[ProductGuid] [uniqueidentifier] NOT NULL,
	[FileName] [nvarchar](255) NOT NULL,
	[FileImage] [image] NULL,
	[ServerFileName] [nvarchar](255) NOT NULL,
	[ByteLength] [int] NOT NULL CONSTRAINT [DF_ws_ProductFile_ByteLength]  DEFAULT ((0)),
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_ProductFile_Created]  DEFAULT (getutcdate()),
	[CreatedBy] [uniqueidentifier] NOT NULL,
 CONSTRAINT [PK_ws_ProductFile] PRIMARY KEY NONCLUSTERED 
(
	[ProductGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_TaxRateHistory]    Script Date: 03/27/2007 17:27:03 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_TaxRateHistory](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_TaxRateHistory_Guid]  DEFAULT (newid()),
	[TaxRateGuid] [uniqueidentifier] NOT NULL,
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[GeoZoneGuid] [uniqueidentifier] NOT NULL,
	[TaxClassGuid] [uniqueidentifier] NOT NULL,
	[Priority] [int] NOT NULL,
	[Rate] [decimal](18, 4) NOT NULL,
	[Description] [nvarchar](255) NULL,
	[Created] [datetime] NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModified] [datetime] NULL,
	[ModifiedBy] [uniqueidentifier] NULL,
	[LogTime] [datetime] NOT NULL CONSTRAINT [DF_ws_TaxRateHistory_LogTime]  DEFAULT (getutcdate()),
 CONSTRAINT [PK_ws_TaxRateHx] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_Store]    Script Date: 03/27/2007 17:26:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_Store](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_Store_Guid]  DEFAULT (newid()),
	[SiteGuid] [uniqueidentifier] NOT NULL,
	[ModuleID] [int] NOT NULL,
	[Name] [nvarchar](255) NOT NULL,
	[Description] [ntext] NULL,
	[DefaultCurrencyID] [uniqueidentifier] NOT NULL,
	[AllowOtherCurrencies] [bit] NOT NULL CONSTRAINT [DF_ws_Store_AllowOtherCurrencies]  DEFAULT ((0)),
	[DefaultLanguageID] [uniqueidentifier] NOT NULL,
	[AllowOtherLanguages] [bit] NOT NULL CONSTRAINT [DF_ws_Store_AllowOtherLanguages]  DEFAULT ((0)),
	[OwnerName] [nvarchar](255) NULL,
	[OwnerEmail] [nvarchar](100) NULL,
	[SalesEmail] [nvarchar](100) NOT NULL,
	[SupportEmail] [nvarchar](100) NOT NULL,
	[EmailFrom] [nvarchar](100) NULL,
	[OrderBCCEmail] [nvarchar](100) NULL,
	[Phone] [nvarchar](32) NULL,
	[Fax] [nvarchar](32) NULL,
	[Address] [nvarchar](255) NULL,
	[City] [nvarchar](255) NULL,
	[ZoneGuid] [uniqueidentifier] NOT NULL,
	[PostalCode] [nvarchar](50) NULL,
	[CountryGuid] [uniqueidentifier] NOT NULL,
	[IsClosed] [bit] NOT NULL CONSTRAINT [DF_ws_Store_IsOpen]  DEFAULT ((0)),
	[ClosedMessage] [ntext] NULL,
	[ShowCategoryCounts] [bit] NOT NULL CONSTRAINT [DF_ws_Store_ShowCategoryCounts]  DEFAULT ((0)),
	[DefaultCountry] [uniqueidentifier] NOT NULL,
	[StoreConfigRoles] [ntext] NULL,
	[ProductEditRoles] [ntext] NULL,
	[OfferEditRoles] [ntext] NULL,
	[TaxEditRoles] [ntext] NULL,
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_Store_Created]  DEFAULT (getutcdate()),
	[CreatedBy] [uniqueidentifier] NOT NULL,
 CONSTRAINT [PK_ws_Store] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
CREATE UNIQUE NONCLUSTERED INDEX [IX_ws_Store] ON [dbo].[ws_Store] 
(
	[ModuleID] ASC
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_ProductHistory]    Script Date: 03/27/2007 17:25:20 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_ProductHistory](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ProductHistory_ID]  DEFAULT (newid()),
	[ProductGuid] [uniqueidentifier] NOT NULL,
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[TaxClassGuid] [uniqueidentifier] NOT NULL,
	[Sku] [nvarchar](255) NOT NULL,
	[Status] [tinyint] NOT NULL,
	[FullfillmentType] [tinyint] NOT NULL,
	[Weight] [decimal](7, 2) NOT NULL,
	[QuantityOnHand] [int] NOT NULL,
	[ImageFileName] [nvarchar](255) NULL,
	[ImageFileBytes] [image] NULL,
	[Created] [datetime] NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModified] [datetime] NULL CONSTRAINT [DF_ws_ProductHistory_LastModified]  DEFAULT (getutcdate()),
	[LastModifedBy] [uniqueidentifier] NULL,
	[LogTime] [datetime] NOT NULL,
 CONSTRAINT [PK_ws_ProductHx] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_OfferPriceHistory]    Script Date: 03/27/2007 17:23:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OfferPriceHistory](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_OfferPriceHistory_Guid]  DEFAULT (newid()),
	[PriceGuid] [uniqueidentifier] NOT NULL,
	[OfferGuid] [uniqueidentifier] NOT NULL,
	[CurrencyGuid] [uniqueidentifier] NOT NULL,
	[Price] [decimal](15, 4) NOT NULL,
	[Created] [datetime] NOT NULL,
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[CreatedFromIP] [nvarchar](255) NULL,
	[LastModifed] [datetime] NULL,
	[LastModifiedBy] [uniqueidentifier] NOT NULL,
	[ModifiedFromIP] [nvarchar](255) NULL,
	[LogTime] [datetime] NOT NULL,
 CONSTRAINT [PK_ws_OfferPriceHx] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_OrderOfferProduct]    Script Date: 03/27/2007 17:24:32 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OrderOfferProduct](
	[Guid] [uniqueidentifier] NOT NULL,
	[OrderGuid] [uniqueidentifier] NOT NULL,
	[OfferGuid] [uniqueidentifier] NOT NULL,
	[ProductGuid] [uniqueidentifier] NOT NULL,
	[FullfillType] [tinyint] NOT NULL CONSTRAINT [DF_ws_OrderOfferProduct_FullfillType]  DEFAULT ((0)),
	[FullfillTermsGuid] [uniqueidentifier] NOT NULL,
	[Created] [datetime] NOT NULL,
 CONSTRAINT [PK_ws_OrderOfferProduct] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_GeoCountry]    Script Date: 03/27/2007 17:21:32 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_GeoCountry](
	[Guid] [uniqueidentifier] NOT NULL,
	[Name] [nvarchar](255) NOT NULL,
	[ISOCode2] [nchar](2) NOT NULL,
	[ISOCode3] [nchar](3) NOT NULL,
 CONSTRAINT [PK_ws_GeoCountry] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_Language]    Script Date: 03/27/2007 17:21:39 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_Language](
	[Guid] [uniqueidentifier] NOT NULL,
	[Name] [nvarchar](255) NOT NULL,
	[Code] [nchar](2) NOT NULL,
	[Sort] [int] NOT NULL,
 CONSTRAINT [PK_ws_Language] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_CartOffers]    Script Date: 03/27/2007 17:20:24 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_CartOffers](
	[ItemGuid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_CartOfferItems_ItemGuid]  DEFAULT (newid()),
	[CartGuid] [uniqueidentifier] NOT NULL,
	[OfferGuid] [uniqueidentifier] NOT NULL,
	[PriceGuid] [uniqueidentifier] NOT NULL,
	[CurrencyGuid] [uniqueidentifier] NOT NULL,
	[TaxClassGuid] [uniqueidentifier] NULL,
	[OfferPrice] [decimal](15, 4) NOT NULL,
	[AddedToCart] [datetime] NOT NULL CONSTRAINT [DF_ws_CartOfferItems_AddedToCart]  DEFAULT (getutcdate()),
	[Quantity] [int] NOT NULL CONSTRAINT [DF_ws_CartOfferItems_Quantity]  DEFAULT ((1)),
 CONSTRAINT [PK_ws_CartOfferItems] PRIMARY KEY CLUSTERED 
(
	[ItemGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_OrderOffers]    Script Date: 03/27/2007 17:24:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OrderOffers](
	[ItemGuid] [uniqueidentifier] NOT NULL,
	[OrderGuid] [uniqueidentifier] NOT NULL,
	[OfferGuid] [uniqueidentifier] NOT NULL,
	[PriceGuid] [uniqueidentifier] NOT NULL,
	[CurrencyGuid] [uniqueidentifier] NOT NULL,
	[TaxClassGuid] [uniqueidentifier] NOT NULL,
	[OfferPrice] [decimal](15, 4) NOT NULL,
	[AddedToCart] [datetime] NOT NULL,
	[Quantity] [int] NOT NULL,
 CONSTRAINT [PK_ws_CartOrderOfferItems] PRIMARY KEY CLUSTERED 
(
	[ItemGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_FullfillDownloadTicket]    Script Date: 03/27/2007 17:21:28 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_FullfillDownloadTicket](
	[Guid] [uniqueidentifier] NOT NULL,
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[OrderGuid] [uniqueidentifier] NOT NULL,
	[UserGuid] [uniqueidentifier] NOT NULL,
	[ProductGuid] [uniqueidentifier] NOT NULL,
	[FullfillTermsGuid] [uniqueidentifier] NOT NULL,
	[DownloadsAllowed] [int] NOT NULL CONSTRAINT [DF_ws_FullfillDownloadTicket_DownloadsAllowed]  DEFAULT ((0)),
	[ExpireAfterDays] [int] NOT NULL CONSTRAINT [DF_ws_FullfillDownloadTicket_ExpireDaysAfterPurchase]  DEFAULT ((0)),
	[CountAfterDownload] [bit] NOT NULL CONSTRAINT [DF_ws_FullfillDownloadTicket_CountAfterDownload]  DEFAULT ((1)),
	[PurchaseTime] [datetime] NOT NULL CONSTRAINT [DF_ws_FullfillDownloadTicket_PurchaseTime]  DEFAULT (getutcdate()),
	[DownloadedCount] [int] NOT NULL CONSTRAINT [DF_ws_FullfillDownloadTicket_DownloadedCount]  DEFAULT ((0)),
 CONSTRAINT [PK_ws_FullfillDownloadTicket] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_ProductCategory]    Script Date: 03/27/2007 17:25:00 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_ProductCategory](
	[ProductGuid] [uniqueidentifier] NOT NULL,
	[CategoryGuid] [uniqueidentifier] NOT NULL,
 CONSTRAINT [PK_ws_ProductCategory] PRIMARY KEY NONCLUSTERED 
(
	[ProductGuid] ASC,
	[CategoryGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_OfferProduct]    Script Date: 03/27/2007 17:23:31 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OfferProduct](
	[Guid] [uniqueidentifier] NOT NULL,
	[OfferGuid] [uniqueidentifier] NOT NULL,
	[ProductGuid] [uniqueidentifier] NOT NULL,
	[FullfillType] [tinyint] NOT NULL CONSTRAINT [DF_ws_OfferProduct_FullfillType]  DEFAULT ((1)),
	[FullFillTermsGuid] [uniqueidentifier] NOT NULL,
	[Quantity] [int] NOT NULL CONSTRAINT [DF_ws_OfferProduct_Quantity]  DEFAULT ((1)),
	[SortOrder] [int] NOT NULL CONSTRAINT [DF_ws_OfferProduct_SortOrder]  DEFAULT ((0)),
	[IsDeleted] [bit] NOT NULL CONSTRAINT [DF_ws_OfferProduct_IsDeleted]  DEFAULT ((0)),
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_OfferProduct_Created]  DEFAULT (getutcdate()),
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[CreatedFromIP] [nvarchar](255) NULL,
	[DeletedBy] [uniqueidentifier] NULL,
	[DeletedFromIP] [nvarchar](255) NULL,
	[DeletedTime] [datetime] NULL,
	[LastModified] [datetime] NULL,
	[LastModifiedBy] [uniqueidentifier] NULL,
	[LastModifiedFromIP] [nvarchar](255) NULL,
 CONSTRAINT [PK_ws_OfferProduct] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_ProductRating]    Script Date: 03/27/2007 17:25:25 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_ProductRating](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_ProductRating_Guid]  DEFAULT (newid()),
	[ProductGuid] [uniqueidentifier] NOT NULL,
	[UserGuid] [uniqueidentifier] NOT NULL,
	[Rating] [tinyint] NULL CONSTRAINT [DF_ws_ProductRating_Rating]  DEFAULT ((0)),
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_ProductRating_Created]  DEFAULT (getutcdate()),
	[LastModified] [datetime] NULL,
	[CreatedFromIPAddress] [nvarchar](255) NULL,
 CONSTRAINT [PK_ws_ProductRating] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_ProductReview]    Script Date: 03/27/2007 17:25:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_ProductReview](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_ProductReview_Guid]  DEFAULT (newid()),
	[RatingGuid] [uniqueidentifier] NOT NULL,
	[ProductGuid] [uniqueidentifier] NOT NULL,
	[UserGuid] [uniqueidentifier] NOT NULL,
	[LanguageGuid] [uniqueidentifier] NOT NULL,
	[Review] [ntext] NOT NULL,
	[ViewCount] [int] NOT NULL CONSTRAINT [DF_ws_ProductReview_ViewCount]  DEFAULT ((0)),
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_ProductReview_Created]  DEFAULT (getutcdate()),
	[LastModifed] [datetime] NULL,
	[CreatedFromIPAddress] [nvarchar](255) NULL,
 CONSTRAINT [PK_ws_ProductReview] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_ProductDescription]    Script Date: 03/27/2007 17:25:04 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_ProductDescription](
	[ProductGuid] [uniqueidentifier] NOT NULL,
	[LanguageGuid] [uniqueidentifier] NOT NULL,
	[Name] [nvarchar](255) NOT NULL,
	[Description] [ntext] NULL,
 CONSTRAINT [PK_ws_ProductDescription] PRIMARY KEY CLUSTERED 
(
	[ProductGuid] ASC,
	[LanguageGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_OrderStatusDescription]    Script Date: 03/27/2007 17:24:42 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OrderStatusDescription](
	[StatusGuid] [uniqueidentifier] NOT NULL,
	[LanguageGuid] [uniqueidentifier] NOT NULL,
	[Description] [nvarchar](255) NULL,
 CONSTRAINT [PK_ws_CartOrderStatusDescription] PRIMARY KEY CLUSTERED 
(
	[StatusGuid] ASC,
	[LanguageGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_OfferPrice]    Script Date: 03/27/2007 17:22:55 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OfferPrice](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_OfferPrice_Guid]  DEFAULT (newid()),
	[OfferGuid] [uniqueidentifier] NOT NULL,
	[CurrencyGuid] [uniqueidentifier] NOT NULL,
	[Price] [decimal](15, 4) NOT NULL,
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_OfferPrice_Created]  DEFAULT (getutcdate()),
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[CreatedFromIP] [nvarchar](255) NULL,
	[LastModifed] [datetime] NULL,
	[LastModifiedBy] [uniqueidentifier] NOT NULL,
	[ModifiedFromIP] [nvarchar](255) NULL,
 CONSTRAINT [PK_ws_OfferPrice] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_FullfillDownloadTerms]    Script Date: 03/27/2007 17:21:16 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_FullfillDownloadTerms](
	[Guid] [uniqueidentifier] NOT NULL,
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[DownloadsAllowed] [int] NOT NULL CONSTRAINT [DF_ws_FullfillmentDownloadTerms_DownloadsAllowed]  DEFAULT ((1)),
	[ExpireAfterDays] [int] NOT NULL,
	[CountAfterDownload] [bit] NOT NULL CONSTRAINT [DF_ws_FullfillDownloadTerms_CountFromFirstDownload]  DEFAULT ((1)),
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_FullfillmentDownloadTerms_Created]  DEFAULT (getutcdate()),
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[CreatedFromIP] [nvarchar](255) NULL,
	[LastModified] [datetime] NULL,
	[LastModifedBy] [uniqueidentifier] NULL,
	[LastModifedFromIPAddress] [nvarchar](255) NULL,
 CONSTRAINT [PK_ws_FullfillmentDownloadTerms] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_Offer]    Script Date: 03/27/2007 17:21:49 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_Offer](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_Offer_Guid]  DEFAULT (newid()),
	[StoreGuid] [uniqueidentifier] NULL,
	[IsVisible] [bit] NOT NULL CONSTRAINT [DF_ws_Offer_IsVisible]  DEFAULT ((1)),
	[IsSpecial] [bit] NOT NULL CONSTRAINT [DF_ws_Offer_IsSpecial]  DEFAULT ((0)),
	[TaxClassGuid] [uniqueidentifier] NULL,
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_Offer_Created]  DEFAULT (getutcdate()),
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[CreatedFromIP] [nvarchar](255) NOT NULL,
	[IsDeleted] [bit] NOT NULL CONSTRAINT [DF_ws_Offer_IsDeleted]  DEFAULT ((0)),
	[DeletedTime] [datetime] NULL,
	[DeletedBy] [uniqueidentifier] NULL,
	[DeletedFromIP] [nvarchar](255) NULL,
	[LastModified] [datetime] NULL,
	[LastModifiedBy] [uniqueidentifier] NULL,
	[LastModifiedFromIP] [nvarchar](255) NULL,
 CONSTRAINT [PK_ws_Offer] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_Product]    Script Date: 03/27/2007 17:24:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_Product](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_Table_1_ID]  DEFAULT (newid()),
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[TaxClassGuid] [uniqueidentifier] NOT NULL,
	[Sku] [nvarchar](255) NOT NULL,
	[ModelNumber] [nvarchar](255) NULL,
	[Status] [tinyint] NOT NULL CONSTRAINT [DF_ws_Product_Status]  DEFAULT ((1)),
	[FullfillmentType] [tinyint] NOT NULL CONSTRAINT [DF_ws_Product_FullfillmentType]  DEFAULT ((1)),
	[Weight] [decimal](7, 2) NOT NULL,
	[UnitCost] [decimal](15, 4) NOT NULL CONSTRAINT [DF_ws_Product_UnitCost]  DEFAULT ((0)),
	[RetailPrice] [decimal](15, 4) NOT NULL CONSTRAINT [DF_ws_Product_RetailPrice]  DEFAULT ((0)),
	[QuantityOnHand] [int] NOT NULL CONSTRAINT [DF_ws_Product_QuantityOnHand]  DEFAULT ((0)),
	[ImageFileName] [nvarchar](255) NULL,
	[ImageFileBytes] [image] NULL,
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_Product_Created]  DEFAULT (getutcdate()),
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModified] [datetime] NULL,
	[LastModifedBy] [uniqueidentifier] NULL,
	[IsDeleted] [bit] NOT NULL CONSTRAINT [DF_ws_Product_IsDeleted]  DEFAULT ((0)),
	[DeletedBy] [uniqueidentifier] NULL,
	[DeletedFromIP] [nvarchar](255) NULL,
	[DeletedTime] [datetime] NULL,
 CONSTRAINT [PK_ws_Product] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
CREATE UNIQUE CLUSTERED INDEX [IX_ws_Product] ON [dbo].[ws_Product] 
(
	[Sku] ASC
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_Category]    Script Date: 03/27/2007 17:20:54 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_Category](
	[Guid] [uniqueidentifier] NOT NULL,
	[ParentGuid] [uniqueidentifier] NOT NULL,
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[ImageFileName] [nvarchar](75) NULL,
	[Sort] [int] NOT NULL CONSTRAINT [DF_ws_Category_Sort]  DEFAULT ((1000)),
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_Category_Created]  DEFAULT (getutcdate()),
	[LastModified] [datetime] NULL,
 CONSTRAINT [PK_ws_Category] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_StoreLanguage]    Script Date: 03/27/2007 17:26:23 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_StoreLanguage](
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[LanguageGuid] [uniqueidentifier] NOT NULL,
 CONSTRAINT [PK_ws_StoreLanguage] PRIMARY KEY CLUSTERED 
(
	[StoreGuid] ASC,
	[LanguageGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_TaxRate]    Script Date: 03/27/2007 17:26:47 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_TaxRate](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_TaxRate_Guid]  DEFAULT (newid()),
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[GeoZoneGuid] [uniqueidentifier] NOT NULL,
	[TaxClassGuid] [uniqueidentifier] NOT NULL,
	[Priority] [int] NOT NULL CONSTRAINT [DF_ws_TaxRate_Priority]  DEFAULT ((1)),
	[Rate] [decimal](18, 4) NOT NULL,
	[Description] [nvarchar](255) NOT NULL,
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_TaxRate_Created]  DEFAULT (getutcdate()),
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[LastModified] [datetime] NULL,
	[ModifiedBy] [uniqueidentifier] NULL,
 CONSTRAINT [PK_ws_TaxRate] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_Order]    Script Date: 03/27/2007 17:24:26 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_Order](
	[OrderGuid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_CartOrder_OrderID]  DEFAULT (newid()),
	[OrderNo] [int] IDENTITY(1,1) NOT NULL,
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[UserGuid] [uniqueidentifier] NOT NULL,
	[CustomerName] [nvarchar](255) NULL,
	[CustomerCompany] [nvarchar](255) NULL,
	[CustomerAddressLine1] [nvarchar](255) NULL,
	[CustomerAddressLine2] [nvarchar](255) NULL,
	[CustomerSuburb] [nvarchar](255) NULL,
	[CustomerCity] [nvarchar](255) NULL,
	[CustomerPostalCode] [nvarchar](20) NULL,
	[CustomerState] [nvarchar](255) NULL,
	[CustomerCountry] [nvarchar](255) NULL,
	[CustomerTelephoneDay] [nvarchar](32) NULL,
	[CustomerTelephoneNight] [nvarchar](32) NULL,
	[CustomerEmail] [nvarchar](96) NULL,
	[CustomerEmailVerified] [bit] NOT NULL CONSTRAINT [DF_ws_CartOrder_CustomerEmailVerified]  DEFAULT ((0)),
	[DeliveryName] [nvarchar](255) NULL,
	[DeliveryCompany] [nvarchar](255) NULL,
	[DeliveryAddress1] [nvarchar](255) NULL,
	[DeliveryAddress2] [nvarchar](255) NULL,
	[DeliverySuburb] [nvarchar](255) NULL,
	[DeliveryCity] [nvarchar](255) NULL,
	[DeliveryPostalCode] [nvarchar](20) NULL,
	[DeliveryState] [nvarchar](255) NULL,
	[DeliveryCountry] [nvarchar](255) NULL,
	[BillingName] [nvarchar](255) NULL,
	[BillingCompany] [nvarchar](255) NULL,
	[BillingAddress1] [nvarchar](255) NULL,
	[BillingAddress2] [nvarchar](255) NULL,
	[BillingSuburb] [nvarchar](255) NULL,
	[BillingCity] [nvarchar](255) NULL,
	[BillingPostalCode] [nvarchar](20) NULL,
	[BillingState] [nvarchar](255) NULL,
	[BillingCountry] [nvarchar](255) NULL,
	[CardTypeGuid] [uniqueidentifier] NOT NULL,
	[CardOwner] [nvarchar](100) NULL,
	[CardNumber] [nvarchar](255) NULL,
	[CardExpires] [nvarchar](6) NULL,
	[CardSecurityCode] [nvarchar](50) NULL,
	[CurrencyGuid] [uniqueidentifier] NOT NULL,
	[CurrencyValue] [decimal](13, 8) NULL,
	[SubTotal] [decimal](15, 4) NULL,
	[TaxTotal] [decimal](15, 4) NULL,
	[ShippingTotal] [decimal](15, 4) NULL CONSTRAINT [DF_ws_Order_ShippingTotal]  DEFAULT ((0)),
	[OrderTotal] [decimal](15, 4) NULL,
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_CartOrder_Created]  DEFAULT (getutcdate()),
	[CreatedFromIP] [nvarchar](255) NULL,
	[Completed] [datetime] NULL,
	[CompletedFromIP] [nvarchar](255) NULL,
	[LastModified] [datetime] NULL,
	[LastUserActivity] [datetime] NULL,
	[StatusGuid] [uniqueidentifier] NULL,
	[GatewayTransID] [nvarchar](255) NULL,
	[GatewayRawResponse] [ntext] NULL,
	[GatewayAuthCode] [nvarchar](50) NULL,
	[TaxZoneGuid] [uniqueidentifier] NULL,
 CONSTRAINT [PK_ws_CartOrder] PRIMARY KEY CLUSTERED 
(
	[OrderGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_StoreCurrency]    Script Date: 03/27/2007 17:26:20 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_StoreCurrency](
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[CurrencyGuid] [uniqueidentifier] NOT NULL,
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_StoreCurrency_Created]  DEFAULT (getutcdate()),
 CONSTRAINT [PK_ws_StoreCurrency] PRIMARY KEY NONCLUSTERED 
(
	[StoreGuid] ASC,
	[CurrencyGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_TaxClass]    Script Date: 03/27/2007 17:26:33 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_TaxClass](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_TaxClass_Guid]  DEFAULT (newid()),
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[Title] [nvarchar](255) NOT NULL,
	[Description] [ntext] NOT NULL,
	[LastModified] [datetime] NULL,
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_TaxClass_Created]  DEFAULT (getutcdate()),
 CONSTRAINT [PK_ws_TaxClass] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_Cart]    Script Date: 03/27/2007 17:20:18 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_Cart](
	[CartGuid] [uniqueidentifier] NOT NULL,
	[StoreGuid] [uniqueidentifier] NOT NULL,
	[UserGuid] [uniqueidentifier] NOT NULL,
	[CurrencyGuid] [uniqueidentifier] NULL,
	[CurrencyValue] [decimal](13, 8) NOT NULL CONSTRAINT [DF_ws_Cart_CurrencyValue]  DEFAULT ((0)),
	[SubTotal] [decimal](15, 4) NOT NULL CONSTRAINT [DF_ws_Cart_SubTotal]  DEFAULT ((0)),
	[TaxTotal] [decimal](15, 4) NOT NULL CONSTRAINT [DF_ws_Cart_TaxTotal]  DEFAULT ((0)),
	[ShippingTotal] [decimal](15, 4) NOT NULL CONSTRAINT [DF_ws_Cart_ShippingTotal]  DEFAULT ((0)),
	[OrderTotal] [decimal](15, 4) NOT NULL CONSTRAINT [DF_ws_Cart_OrderTotal]  DEFAULT ((0)),
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_Cart_Created_1]  DEFAULT (getutcdate()),
	[CreatedFromIP] [nvarchar](255) NULL,
	[LastModified] [datetime] NULL,
	[LastUserActivity] [datetime] NULL,
 CONSTRAINT [PK_ws_Cart_1] PRIMARY KEY CLUSTERED 
(
	[CartGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_GeoZone]    Script Date: 03/27/2007 17:21:34 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_GeoZone](
	[Guid] [uniqueidentifier] NOT NULL,
	[CountryGuid] [uniqueidentifier] NOT NULL,
	[Name] [nvarchar](255) NOT NULL,
	[Code] [nvarchar](255) NOT NULL,
 CONSTRAINT [PK_ws_GeoZone] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_FullfillDownloadTermsDesc]    Script Date: 03/27/2007 17:21:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_FullfillDownloadTermsDesc](
	[TermsGuid] [uniqueidentifier] NOT NULL,
	[LanguageGuid] [uniqueidentifier] NOT NULL,
	[Name] [nvarchar](255) NOT NULL,
	[Description] [ntext] NOT NULL,
 CONSTRAINT [PK_ws_FullfillDownloadTermsDesc] PRIMARY KEY CLUSTERED 
(
	[TermsGuid] ASC,
	[LanguageGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_OfferDescription]    Script Date: 03/27/2007 17:22:22 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OfferDescription](
	[OfferGuid] [uniqueidentifier] NOT NULL,
	[LanguageGuid] [uniqueidentifier] NOT NULL,
	[ShortDescription] [nvarchar](255) NOT NULL,
	[LongDescription] [ntext] NULL,
 CONSTRAINT [PK_ws_OfferDescription] PRIMARY KEY CLUSTERED 
(
	[OfferGuid] ASC,
	[LanguageGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_CategoryDescription]    Script Date: 03/27/2007 17:20:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_CategoryDescription](
	[CategoryGuid] [uniqueidentifier] NOT NULL,
	[LanguageGuid] [uniqueidentifier] NOT NULL,
	[Name] [nvarchar](255) NOT NULL,
 CONSTRAINT [PK_ws_CategoryDescription] PRIMARY KEY NONCLUSTERED 
(
	[CategoryGuid] ASC,
	[LanguageGuid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_FullfillDownloadHistory]    Script Date: 03/27/2007 17:21:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_FullfillDownloadHistory](
	[Guid] [uniqueidentifier] NOT NULL,
	[TicketGuid] [uniqueidentifier] NOT NULL,
	[UTCTimestamp] [datetime] NOT NULL CONSTRAINT [DF_ws_FullfillDownloadHistory_UTCTimestamp]  DEFAULT (getutcdate()),
	[IPAddress] [nvarchar](255) NOT NULL,
 CONSTRAINT [PK_ws_FullfillDownloadHistory] PRIMARY KEY NONCLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ws_OfferAvailability]    Script Date: 03/27/2007 17:22:00 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ws_OfferAvailability](
	[Guid] [uniqueidentifier] NOT NULL CONSTRAINT [DF_ws_OfferDateRange_Guid]  DEFAULT (newid()),
	[OfferGuid] [uniqueidentifier] NOT NULL,
	[BeginUTC] [datetime] NOT NULL,
	[EndUTC] [datetime] NOT NULL,
	[RequiresOfferCode] [bit] NOT NULL CONSTRAINT [DF_ws_OfferAvailability_RequiresOfferCode]  DEFAULT ((0)),
	[OfferCode] [nvarchar](50) NOT NULL,
	[MaxAllowedPerCustomer] [int] NOT NULL CONSTRAINT [DF_ws_OfferAvailability_MaxAllowedPerCustomer]  DEFAULT ((0)),
	[Created] [datetime] NOT NULL CONSTRAINT [DF_ws_OfferDateRange_Created]  DEFAULT (getutcdate()),
	[CreatedBy] [uniqueidentifier] NOT NULL,
	[CreatedFromIP] [nvarchar](255) NOT NULL,
	[IsDeleted] [bit] NOT NULL CONSTRAINT [DF_ws_OfferDateRange_IsDeleted]  DEFAULT ((0)),
	[DeletedBy] [uniqueidentifier] NULL,
	[DeletedTime] [datetime] NULL,
	[DeletedFromIP] [nvarchar](255) NULL,
	[LastModified] [datetime] NULL,
	[LastModifedBy] [uniqueidentifier] NULL,
	[LastModifedFromIP] [nvarchar](255) NULL,
 CONSTRAINT [PK_ws_OfferDateRange] PRIMARY KEY CLUSTERED 
(
	[Guid] ASC
) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  ForeignKey [FK_ws_Cart_ws_Store]    Script Date: 03/27/2007 17:20:18 ******/
ALTER TABLE [dbo].[ws_Cart]  WITH CHECK ADD  CONSTRAINT [FK_ws_Cart_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_Cart] CHECK CONSTRAINT [FK_ws_Cart_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_CartOffers_ws_Cart]    Script Date: 03/27/2007 17:20:24 ******/
ALTER TABLE [dbo].[ws_CartOffers]  WITH CHECK ADD  CONSTRAINT [FK_ws_CartOffers_ws_Cart] FOREIGN KEY([CartGuid])
REFERENCES [dbo].[ws_Cart] ([CartGuid])
GO
ALTER TABLE [dbo].[ws_CartOffers] CHECK CONSTRAINT [FK_ws_CartOffers_ws_Cart]
GO
/****** Object:  ForeignKey [FK_ws_CartOffers_ws_Currency]    Script Date: 03/27/2007 17:20:25 ******/
ALTER TABLE [dbo].[ws_CartOffers]  WITH CHECK ADD  CONSTRAINT [FK_ws_CartOffers_ws_Currency] FOREIGN KEY([CurrencyGuid])
REFERENCES [dbo].[ws_Currency] ([Guid])
GO
ALTER TABLE [dbo].[ws_CartOffers] CHECK CONSTRAINT [FK_ws_CartOffers_ws_Currency]
GO
/****** Object:  ForeignKey [FK_ws_CartOffers_ws_Offer]    Script Date: 03/27/2007 17:20:25 ******/
ALTER TABLE [dbo].[ws_CartOffers]  WITH CHECK ADD  CONSTRAINT [FK_ws_CartOffers_ws_Offer] FOREIGN KEY([OfferGuid])
REFERENCES [dbo].[ws_Offer] ([Guid])
GO
ALTER TABLE [dbo].[ws_CartOffers] CHECK CONSTRAINT [FK_ws_CartOffers_ws_Offer]
GO
/****** Object:  ForeignKey [FK_ws_CartOffers_ws_OfferPrice]    Script Date: 03/27/2007 17:20:25 ******/
ALTER TABLE [dbo].[ws_CartOffers]  WITH CHECK ADD  CONSTRAINT [FK_ws_CartOffers_ws_OfferPrice] FOREIGN KEY([PriceGuid])
REFERENCES [dbo].[ws_OfferPrice] ([Guid])
GO
ALTER TABLE [dbo].[ws_CartOffers] CHECK CONSTRAINT [FK_ws_CartOffers_ws_OfferPrice]
GO
/****** Object:  ForeignKey [FK_ws_Category_ws_Store]    Script Date: 03/27/2007 17:20:55 ******/
ALTER TABLE [dbo].[ws_Category]  WITH CHECK ADD  CONSTRAINT [FK_ws_Category_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_Category] CHECK CONSTRAINT [FK_ws_Category_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_CategoryDescription_ws_Category]    Script Date: 03/27/2007 17:20:57 ******/
ALTER TABLE [dbo].[ws_CategoryDescription]  WITH CHECK ADD  CONSTRAINT [FK_ws_CategoryDescription_ws_Category] FOREIGN KEY([CategoryGuid])
REFERENCES [dbo].[ws_Category] ([Guid])
GO
ALTER TABLE [dbo].[ws_CategoryDescription] CHECK CONSTRAINT [FK_ws_CategoryDescription_ws_Category]
GO
/****** Object:  ForeignKey [FK_ws_CategoryDescription_ws_Language]    Script Date: 03/27/2007 17:20:57 ******/
ALTER TABLE [dbo].[ws_CategoryDescription]  WITH CHECK ADD  CONSTRAINT [FK_ws_CategoryDescription_ws_Language] FOREIGN KEY([LanguageGuid])
REFERENCES [dbo].[ws_Language] ([Guid])
GO
ALTER TABLE [dbo].[ws_CategoryDescription] CHECK CONSTRAINT [FK_ws_CategoryDescription_ws_Language]
GO
/****** Object:  ForeignKey [FK_ws_FullfillDownloadHistory_ws_FullfillDownloadTicket]    Script Date: 03/27/2007 17:21:08 ******/
ALTER TABLE [dbo].[ws_FullfillDownloadHistory]  WITH CHECK ADD  CONSTRAINT [FK_ws_FullfillDownloadHistory_ws_FullfillDownloadTicket] FOREIGN KEY([TicketGuid])
REFERENCES [dbo].[ws_FullfillDownloadTicket] ([Guid])
GO
ALTER TABLE [dbo].[ws_FullfillDownloadHistory] CHECK CONSTRAINT [FK_ws_FullfillDownloadHistory_ws_FullfillDownloadTicket]
GO
/****** Object:  ForeignKey [FK_ws_FullfillDownloadTerms_ws_Store]    Script Date: 03/27/2007 17:21:17 ******/
ALTER TABLE [dbo].[ws_FullfillDownloadTerms]  WITH CHECK ADD  CONSTRAINT [FK_ws_FullfillDownloadTerms_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_FullfillDownloadTerms] CHECK CONSTRAINT [FK_ws_FullfillDownloadTerms_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_FullfillDownloadTermsDesc_ws_FullfillDownloadTerms]    Script Date: 03/27/2007 17:21:20 ******/
ALTER TABLE [dbo].[ws_FullfillDownloadTermsDesc]  WITH CHECK ADD  CONSTRAINT [FK_ws_FullfillDownloadTermsDesc_ws_FullfillDownloadTerms] FOREIGN KEY([TermsGuid])
REFERENCES [dbo].[ws_FullfillDownloadTerms] ([Guid])
GO
ALTER TABLE [dbo].[ws_FullfillDownloadTermsDesc] CHECK CONSTRAINT [FK_ws_FullfillDownloadTermsDesc_ws_FullfillDownloadTerms]
GO
/****** Object:  ForeignKey [FK_ws_FullfillDownloadTermsDesc_ws_Language]    Script Date: 03/27/2007 17:21:20 ******/
ALTER TABLE [dbo].[ws_FullfillDownloadTermsDesc]  WITH CHECK ADD  CONSTRAINT [FK_ws_FullfillDownloadTermsDesc_ws_Language] FOREIGN KEY([LanguageGuid])
REFERENCES [dbo].[ws_Language] ([Guid])
GO
ALTER TABLE [dbo].[ws_FullfillDownloadTermsDesc] CHECK CONSTRAINT [FK_ws_FullfillDownloadTermsDesc_ws_Language]
GO
/****** Object:  ForeignKey [FK_ws_FullfillDownloadTicket_ws_FullfillDownloadTerms]    Script Date: 03/27/2007 17:21:29 ******/
ALTER TABLE [dbo].[ws_FullfillDownloadTicket]  WITH CHECK ADD  CONSTRAINT [FK_ws_FullfillDownloadTicket_ws_FullfillDownloadTerms] FOREIGN KEY([FullfillTermsGuid])
REFERENCES [dbo].[ws_FullfillDownloadTerms] ([Guid])
GO
ALTER TABLE [dbo].[ws_FullfillDownloadTicket] CHECK CONSTRAINT [FK_ws_FullfillDownloadTicket_ws_FullfillDownloadTerms]
GO
/****** Object:  ForeignKey [FK_ws_FullfillDownloadTicket_ws_Product]    Script Date: 03/27/2007 17:21:29 ******/
ALTER TABLE [dbo].[ws_FullfillDownloadTicket]  WITH CHECK ADD  CONSTRAINT [FK_ws_FullfillDownloadTicket_ws_Product] FOREIGN KEY([ProductGuid])
REFERENCES [dbo].[ws_Product] ([Guid])
GO
ALTER TABLE [dbo].[ws_FullfillDownloadTicket] CHECK CONSTRAINT [FK_ws_FullfillDownloadTicket_ws_Product]
GO
/****** Object:  ForeignKey [FK_ws_FullfillDownloadTicket_ws_Store]    Script Date: 03/27/2007 17:21:29 ******/
ALTER TABLE [dbo].[ws_FullfillDownloadTicket]  WITH CHECK ADD  CONSTRAINT [FK_ws_FullfillDownloadTicket_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_FullfillDownloadTicket] CHECK CONSTRAINT [FK_ws_FullfillDownloadTicket_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_GeoZone_ws_GeoCountry]    Script Date: 03/27/2007 17:21:35 ******/
ALTER TABLE [dbo].[ws_GeoZone]  WITH CHECK ADD  CONSTRAINT [FK_ws_GeoZone_ws_GeoCountry] FOREIGN KEY([CountryGuid])
REFERENCES [dbo].[ws_GeoCountry] ([Guid])
GO
ALTER TABLE [dbo].[ws_GeoZone] CHECK CONSTRAINT [FK_ws_GeoZone_ws_GeoCountry]
GO
/****** Object:  ForeignKey [FK_ws_Offer_ws_Store]    Script Date: 03/27/2007 17:21:49 ******/
ALTER TABLE [dbo].[ws_Offer]  WITH CHECK ADD  CONSTRAINT [FK_ws_Offer_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_Offer] CHECK CONSTRAINT [FK_ws_Offer_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_OfferAvailability_ws_Offer]    Script Date: 03/27/2007 17:22:01 ******/
ALTER TABLE [dbo].[ws_OfferAvailability]  WITH CHECK ADD  CONSTRAINT [FK_ws_OfferAvailability_ws_Offer] FOREIGN KEY([OfferGuid])
REFERENCES [dbo].[ws_Offer] ([Guid])
GO
ALTER TABLE [dbo].[ws_OfferAvailability] CHECK CONSTRAINT [FK_ws_OfferAvailability_ws_Offer]
GO
/****** Object:  ForeignKey [FK_ws_OfferDescription_ws_Language]    Script Date: 03/27/2007 17:22:22 ******/
ALTER TABLE [dbo].[ws_OfferDescription]  WITH CHECK ADD  CONSTRAINT [FK_ws_OfferDescription_ws_Language] FOREIGN KEY([LanguageGuid])
REFERENCES [dbo].[ws_Language] ([Guid])
GO
ALTER TABLE [dbo].[ws_OfferDescription] CHECK CONSTRAINT [FK_ws_OfferDescription_ws_Language]
GO
/****** Object:  ForeignKey [FK_ws_OfferDescription_ws_Offer]    Script Date: 03/27/2007 17:22:25 ******/
ALTER TABLE [dbo].[ws_OfferDescription]  WITH CHECK ADD  CONSTRAINT [FK_ws_OfferDescription_ws_Offer] FOREIGN KEY([OfferGuid])
REFERENCES [dbo].[ws_Offer] ([Guid])
GO
ALTER TABLE [dbo].[ws_OfferDescription] CHECK CONSTRAINT [FK_ws_OfferDescription_ws_Offer]
GO
/****** Object:  ForeignKey [FK_ws_OfferPrice_ws_Currency]    Script Date: 03/27/2007 17:22:55 ******/
ALTER TABLE [dbo].[ws_OfferPrice]  WITH CHECK ADD  CONSTRAINT [FK_ws_OfferPrice_ws_Currency] FOREIGN KEY([CurrencyGuid])
REFERENCES [dbo].[ws_Currency] ([Guid])
GO
ALTER TABLE [dbo].[ws_OfferPrice] CHECK CONSTRAINT [FK_ws_OfferPrice_ws_Currency]
GO
/****** Object:  ForeignKey [FK_ws_OfferPrice_ws_Offer]    Script Date: 03/27/2007 17:22:56 ******/
ALTER TABLE [dbo].[ws_OfferPrice]  WITH CHECK ADD  CONSTRAINT [FK_ws_OfferPrice_ws_Offer] FOREIGN KEY([OfferGuid])
REFERENCES [dbo].[ws_Offer] ([Guid])
GO
ALTER TABLE [dbo].[ws_OfferPrice] CHECK CONSTRAINT [FK_ws_OfferPrice_ws_Offer]
GO
/****** Object:  ForeignKey [FK_ws_OfferProduct_ws_Offer]    Script Date: 03/27/2007 17:23:31 ******/
ALTER TABLE [dbo].[ws_OfferProduct]  WITH CHECK ADD  CONSTRAINT [FK_ws_OfferProduct_ws_Offer] FOREIGN KEY([OfferGuid])
REFERENCES [dbo].[ws_Offer] ([Guid])
GO
ALTER TABLE [dbo].[ws_OfferProduct] CHECK CONSTRAINT [FK_ws_OfferProduct_ws_Offer]
GO
/****** Object:  ForeignKey [FK_ws_OfferProduct_ws_Product]    Script Date: 03/27/2007 17:23:32 ******/
ALTER TABLE [dbo].[ws_OfferProduct]  WITH CHECK ADD  CONSTRAINT [FK_ws_OfferProduct_ws_Product] FOREIGN KEY([ProductGuid])
REFERENCES [dbo].[ws_Product] ([Guid])
GO
ALTER TABLE [dbo].[ws_OfferProduct] CHECK CONSTRAINT [FK_ws_OfferProduct_ws_Product]
GO
/****** Object:  ForeignKey [FK_ws_Order_ws_Store]    Script Date: 03/27/2007 17:24:26 ******/
ALTER TABLE [dbo].[ws_Order]  WITH CHECK ADD  CONSTRAINT [FK_ws_Order_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_Order] CHECK CONSTRAINT [FK_ws_Order_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_CartOrderOffers_ws_CartOrder]    Script Date: 03/27/2007 17:24:37 ******/
ALTER TABLE [dbo].[ws_OrderOffers]  WITH CHECK ADD  CONSTRAINT [FK_ws_CartOrderOffers_ws_CartOrder] FOREIGN KEY([OrderGuid])
REFERENCES [dbo].[ws_Order] ([OrderGuid])
GO
ALTER TABLE [dbo].[ws_OrderOffers] CHECK CONSTRAINT [FK_ws_CartOrderOffers_ws_CartOrder]
GO
/****** Object:  ForeignKey [FK_ws_CartOrderOffers_ws_Currency]    Script Date: 03/27/2007 17:24:37 ******/
ALTER TABLE [dbo].[ws_OrderOffers]  WITH CHECK ADD  CONSTRAINT [FK_ws_CartOrderOffers_ws_Currency] FOREIGN KEY([CurrencyGuid])
REFERENCES [dbo].[ws_Currency] ([Guid])
GO
ALTER TABLE [dbo].[ws_OrderOffers] CHECK CONSTRAINT [FK_ws_CartOrderOffers_ws_Currency]
GO
/****** Object:  ForeignKey [FK_ws_CartOrderOffers_ws_Offer]    Script Date: 03/27/2007 17:24:38 ******/
ALTER TABLE [dbo].[ws_OrderOffers]  WITH CHECK ADD  CONSTRAINT [FK_ws_CartOrderOffers_ws_Offer] FOREIGN KEY([OfferGuid])
REFERENCES [dbo].[ws_Offer] ([Guid])
GO
ALTER TABLE [dbo].[ws_OrderOffers] CHECK CONSTRAINT [FK_ws_CartOrderOffers_ws_Offer]
GO
/****** Object:  ForeignKey [FK_ws_CartOrderOffers_ws_OfferPrice]    Script Date: 03/27/2007 17:24:38 ******/
ALTER TABLE [dbo].[ws_OrderOffers]  WITH CHECK ADD  CONSTRAINT [FK_ws_CartOrderOffers_ws_OfferPrice] FOREIGN KEY([PriceGuid])
REFERENCES [dbo].[ws_OfferPrice] ([Guid])
GO
ALTER TABLE [dbo].[ws_OrderOffers] CHECK CONSTRAINT [FK_ws_CartOrderOffers_ws_OfferPrice]
GO
/****** Object:  ForeignKey [FK_ws_OrderStatusDescription_ws_Language]    Script Date: 03/27/2007 17:24:43 ******/
ALTER TABLE [dbo].[ws_OrderStatusDescription]  WITH CHECK ADD  CONSTRAINT [FK_ws_OrderStatusDescription_ws_Language] FOREIGN KEY([LanguageGuid])
REFERENCES [dbo].[ws_Language] ([Guid])
GO
ALTER TABLE [dbo].[ws_OrderStatusDescription] CHECK CONSTRAINT [FK_ws_OrderStatusDescription_ws_Language]
GO
/****** Object:  ForeignKey [FK_ws_OrderStatusDescription_ws_OrderStatus]    Script Date: 03/27/2007 17:24:43 ******/
ALTER TABLE [dbo].[ws_OrderStatusDescription]  WITH CHECK ADD  CONSTRAINT [FK_ws_OrderStatusDescription_ws_OrderStatus] FOREIGN KEY([StatusGuid])
REFERENCES [dbo].[ws_OrderStatus] ([Guid])
GO
ALTER TABLE [dbo].[ws_OrderStatusDescription] CHECK CONSTRAINT [FK_ws_OrderStatusDescription_ws_OrderStatus]
GO
/****** Object:  ForeignKey [FK_ws_Product_ws_Store]    Script Date: 03/27/2007 17:24:59 ******/
ALTER TABLE [dbo].[ws_Product]  WITH CHECK ADD  CONSTRAINT [FK_ws_Product_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_Product] CHECK CONSTRAINT [FK_ws_Product_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_ProductCategory_ws_Category]    Script Date: 03/27/2007 17:25:01 ******/
ALTER TABLE [dbo].[ws_ProductCategory]  WITH CHECK ADD  CONSTRAINT [FK_ws_ProductCategory_ws_Category] FOREIGN KEY([CategoryGuid])
REFERENCES [dbo].[ws_Category] ([Guid])
GO
ALTER TABLE [dbo].[ws_ProductCategory] CHECK CONSTRAINT [FK_ws_ProductCategory_ws_Category]
GO
/****** Object:  ForeignKey [FK_ws_ProductCategory_ws_Product]    Script Date: 03/27/2007 17:25:01 ******/
ALTER TABLE [dbo].[ws_ProductCategory]  WITH CHECK ADD  CONSTRAINT [FK_ws_ProductCategory_ws_Product] FOREIGN KEY([ProductGuid])
REFERENCES [dbo].[ws_Product] ([Guid])
GO
ALTER TABLE [dbo].[ws_ProductCategory] CHECK CONSTRAINT [FK_ws_ProductCategory_ws_Product]
GO
/****** Object:  ForeignKey [FK_ws_ProductDescription_ws_Language]    Script Date: 03/27/2007 17:25:04 ******/
ALTER TABLE [dbo].[ws_ProductDescription]  WITH CHECK ADD  CONSTRAINT [FK_ws_ProductDescription_ws_Language] FOREIGN KEY([LanguageGuid])
REFERENCES [dbo].[ws_Language] ([Guid])
GO
ALTER TABLE [dbo].[ws_ProductDescription] CHECK CONSTRAINT [FK_ws_ProductDescription_ws_Language]
GO
/****** Object:  ForeignKey [FK_ws_ProductDescription_ws_Product]    Script Date: 03/27/2007 17:25:04 ******/
ALTER TABLE [dbo].[ws_ProductDescription]  WITH CHECK ADD  CONSTRAINT [FK_ws_ProductDescription_ws_Product] FOREIGN KEY([ProductGuid])
REFERENCES [dbo].[ws_Product] ([Guid])
GO
ALTER TABLE [dbo].[ws_ProductDescription] CHECK CONSTRAINT [FK_ws_ProductDescription_ws_Product]
GO
/****** Object:  ForeignKey [FK_ws_ProductRating_ws_Product]    Script Date: 03/27/2007 17:25:25 ******/
ALTER TABLE [dbo].[ws_ProductRating]  WITH CHECK ADD  CONSTRAINT [FK_ws_ProductRating_ws_Product] FOREIGN KEY([ProductGuid])
REFERENCES [dbo].[ws_Product] ([Guid])
GO
ALTER TABLE [dbo].[ws_ProductRating] CHECK CONSTRAINT [FK_ws_ProductRating_ws_Product]
GO
/****** Object:  ForeignKey [FK_ws_ProductReview_ws_Product]    Script Date: 03/27/2007 17:25:37 ******/
ALTER TABLE [dbo].[ws_ProductReview]  WITH CHECK ADD  CONSTRAINT [FK_ws_ProductReview_ws_Product] FOREIGN KEY([ProductGuid])
REFERENCES [dbo].[ws_Product] ([Guid])
GO
ALTER TABLE [dbo].[ws_ProductReview] CHECK CONSTRAINT [FK_ws_ProductReview_ws_Product]
GO
/****** Object:  ForeignKey [FK_ws_StoreCurrency_ws_Store]    Script Date: 03/27/2007 17:26:21 ******/
ALTER TABLE [dbo].[ws_StoreCurrency]  WITH CHECK ADD  CONSTRAINT [FK_ws_StoreCurrency_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_StoreCurrency] CHECK CONSTRAINT [FK_ws_StoreCurrency_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_StoreLanguage_ws_Language]    Script Date: 03/27/2007 17:26:24 ******/
ALTER TABLE [dbo].[ws_StoreLanguage]  WITH CHECK ADD  CONSTRAINT [FK_ws_StoreLanguage_ws_Language] FOREIGN KEY([LanguageGuid])
REFERENCES [dbo].[ws_Language] ([Guid])
GO
ALTER TABLE [dbo].[ws_StoreLanguage] CHECK CONSTRAINT [FK_ws_StoreLanguage_ws_Language]
GO
/****** Object:  ForeignKey [FK_ws_StoreLanguage_ws_Store]    Script Date: 03/27/2007 17:26:24 ******/
ALTER TABLE [dbo].[ws_StoreLanguage]  WITH CHECK ADD  CONSTRAINT [FK_ws_StoreLanguage_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_StoreLanguage] CHECK CONSTRAINT [FK_ws_StoreLanguage_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_TaxClass_ws_Store]    Script Date: 03/27/2007 17:26:34 ******/
ALTER TABLE [dbo].[ws_TaxClass]  WITH CHECK ADD  CONSTRAINT [FK_ws_TaxClass_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_TaxClass] CHECK CONSTRAINT [FK_ws_TaxClass_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_TaxRate_ws_GeoZone]    Script Date: 03/27/2007 17:26:47 ******/
ALTER TABLE [dbo].[ws_TaxRate]  WITH CHECK ADD  CONSTRAINT [FK_ws_TaxRate_ws_GeoZone] FOREIGN KEY([GeoZoneGuid])
REFERENCES [dbo].[ws_GeoZone] ([Guid])
GO
ALTER TABLE [dbo].[ws_TaxRate] CHECK CONSTRAINT [FK_ws_TaxRate_ws_GeoZone]
GO
/****** Object:  ForeignKey [FK_ws_TaxRate_ws_Store]    Script Date: 03/27/2007 17:26:48 ******/
ALTER TABLE [dbo].[ws_TaxRate]  WITH CHECK ADD  CONSTRAINT [FK_ws_TaxRate_ws_Store] FOREIGN KEY([StoreGuid])
REFERENCES [dbo].[ws_Store] ([Guid])
GO
ALTER TABLE [dbo].[ws_TaxRate] CHECK CONSTRAINT [FK_ws_TaxRate_ws_Store]
GO
/****** Object:  ForeignKey [FK_ws_TaxRate_ws_TaxClass]    Script Date: 03/27/2007 17:26:48 ******/
ALTER TABLE [dbo].[ws_TaxRate]  WITH CHECK ADD  CONSTRAINT [FK_ws_TaxRate_ws_TaxClass] FOREIGN KEY([TaxClassGuid])
REFERENCES [dbo].[ws_TaxClass] ([Guid])
GO
ALTER TABLE [dbo].[ws_TaxRate] CHECK CONSTRAINT [FK_ws_TaxRate_ws_TaxClass]
GO

/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTerms_SelectPage]    Script Date: 03/27/2007 17:32:48 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTerms_SelectPage]

-- Author:   			Joe Audette
-- Created: 			2/23/2007
-- Last Modified: 		2/23/2007

@StoreGuid uniqueidentifier,
@LanguageGuid uniqueidentifier,
@PageNumber 			int,
@PageSize 			int

AS
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
Guid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( Guid
)

SELECT
		dt.[Guid]
		
FROM
		[dbo].[ws_FullfillDownloadTerms] dt

LEFT OUTER JOIN
		[dbo].[ws_FullfillDownloadTermsDesc] dtd

ON		dt.Guid = dtd.TermsGuid
AND		dtd.LanguageGuid = @LanguageGuid

		
WHERE	dt.[StoreGuid] = @StoreGuid

ORDER BY dtd.[Name]

END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,
		'Name' = COALESCE(dtd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_FullfillDownloadTermsDesc]
			WHERE [dbo].[ws_FullfillDownloadTermsDesc].[TermsGuid] = t1.Guid)
			),

		'Description' = dtd.[Description],
			

		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_FullfillDownloadTerms] t1

JOIN			#PageIndex t2
ON			
		t1.[Guid] = t2.[Guid]

LEFT OUTER JOIN
		[dbo].[ws_FullfillDownloadTermsDesc] dtd

ON		t1.Guid = dtd.TermsGuid
AND		dtd.LanguageGuid = @LanguageGuid
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID

DROP TABLE #PageIndex
GO
/****** Object:  StoredProcedure [dbo].[ws_Product_Delete]    Script Date: 03/27/2007 17:35:16 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Product_Delete]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		2/28/2007
*/
	
@Guid uniqueidentifier, 
@DeletedTime datetime, 
@DeletedBy uniqueidentifier, 
@DeletedFromIP nvarchar(255)



AS
UPDATE 		[dbo].[ws_Product] 

SET
			[IsDeleted] = 1,
			[DeletedTime] = @DeletedTime,
			[DeletedBy] = @DeletedBy,
			[DeletedFromIP] = @DeletedFromIP
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Product_SelectPage]    Script Date: 03/27/2007 17:35:21 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Product_SelectPage]

-- Author:   			Joe Audette
-- Created: 			2/24/2007
-- Last Modified: 		2/24/2007

@StoreGuid		uniqueidentifier,
@LanguageGuid	uniqueidentifier,
@PageNumber 	int,
@PageSize 		int

AS
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
Guid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( 
Guid
)

SELECT
		p.[Guid]
		
FROM
		[dbo].[ws_Product] p

LEFT OUTER JOIN
		[dbo].[ws_ProductDescription] pd

ON		p.Guid = pd.ProductGuid
AND		pd.LanguageGuid = @LanguageGuid
		
WHERE
		p.StoreGuid = @StoreGuid
		AND p.[IsDeleted] = 0

ORDER BY
		pd.[Name]

END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,

		'Name' = COALESCE(pd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_ProductDescription]
			WHERE [dbo].[ws_ProductDescription].[ProductGuid] = t1.Guid)
			),

		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_Product] t1

JOIN			#PageIndex t2
ON			
		t1.[Guid] = t2.[Guid]

LEFT OUTER JOIN
		[dbo].[ws_ProductDescription] pd

ON		t1.Guid = pd.ProductGuid
AND		pd.LanguageGuid = @LanguageGuid
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID

DROP TABLE #PageIndex
GO
/****** Object:  StoredProcedure [dbo].[ws_Product_Insert]    Script Date: 03/27/2007 17:35:18 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Product_Insert]

/*
Author:   			Joe Audette
Created: 			2/24/2007
Last Modified: 		2/24/2007
*/

@Guid uniqueidentifier,
@StoreGuid uniqueidentifier,
@TaxClassGuid uniqueidentifier,
@Sku nvarchar(255),
@ModelNumber nvarchar(255),
@Status tinyint,
@FullfillmentType tinyint,
@Weight decimal(7, 2),
@QuantityOnHand int,
@ImageFileName nvarchar(255),
@ImageFileBytes image,
@Created datetime,
@CreatedBy uniqueidentifier,
@LastModified datetime,
@LastModifedBy uniqueidentifier

	
AS

INSERT INTO 	[dbo].[ws_Product] 
(
				[Guid],
				[StoreGuid],
				[TaxClassGuid],
				[Sku],
				[ModelNumber],
				[Status],
				[FullfillmentType],
				[Weight],
				[QuantityOnHand],
				[ImageFileName],
				[ImageFileBytes],
				[Created],
				[CreatedBy],
				[LastModified],
				[LastModifedBy]
) 

VALUES 
(
				@Guid,
				@StoreGuid,
				@TaxClassGuid,
				@Sku,
				@ModelNumber,
				@Status,
				@FullfillmentType,
				@Weight,
				@QuantityOnHand,
				@ImageFileName,
				@ImageFileBytes,
				@Created,
				@CreatedBy,
				@LastModified,
				@LastModifedBy
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_Product_Update]    Script Date: 03/27/2007 17:35:22 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Product_Update]

/*
Author:   			Joe Audette
Created: 			2/24/2007
Last Modified: 		2/24/2007
*/
	
@Guid uniqueidentifier, 
@TaxClassGuid uniqueidentifier, 
@Sku nvarchar(255), 
@ModelNumber nvarchar(255), 
@Status tinyint, 
@FullfillmentType tinyint, 
@Weight decimal(7, 2), 
@QuantityOnHand int, 
@ImageFileName nvarchar(255), 
@ImageFileBytes image, 
@LastModified datetime, 
@LastModifedBy uniqueidentifier 


AS

UPDATE 		[dbo].[ws_Product] 

SET
			[TaxClassGuid] = @TaxClassGuid,
			[Sku] = @Sku,
			[ModelNumber] = @ModelNumber,
			[Status] = @Status,
			[FullfillmentType] = @FullfillmentType,
			[Weight] = @Weight,
			[QuantityOnHand] = @QuantityOnHand,
			[ImageFileName] = @ImageFileName,
			[ImageFileBytes] = @ImageFileBytes,
			[LastModified] = @LastModified,
			[LastModifedBy] = @LastModifedBy
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Offer_SelectPage]    Script Date: 03/27/2007 17:33:34 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Offer_SelectPage]

-- Author:   			Joe Audette
-- Created: 			2/28/2007
-- Last Modified: 		2/28/2007

@StoreGuid uniqueidentifier,
@LanguageGuid uniqueidentifier,
@PageNumber 			int,
@PageSize 			int

AS
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
Guid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( 
Guid
)

SELECT
		o.[Guid]
		
FROM
		[dbo].[ws_Offer] o

LEFT OUTER JOIN
		[dbo].[ws_OfferDescription] od

ON		o.Guid = od.OfferGuid
AND		od.LanguageGuid = @LanguageGuid
		
WHERE  o.[StoreGuid] = @StoreGuid
		AND o.[IsDeleted] = 0

ORDER BY od.[ShortDescription]

END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,
		'Name' = COALESCE(od.[ShortDescription],
			(SELECT TOP 1 [ShortDescription] + ' needs translation'
			FROM [dbo].[ws_OfferDescription]
			WHERE [dbo].[ws_OfferDescription].[OfferGuid] = t1.Guid)
			),

		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_Offer] t1

JOIN			#PageIndex t2
ON			
		t1.[Guid] = t2.[Guid]

LEFT OUTER JOIN
		[dbo].[ws_OfferDescription] od

ON		t1.Guid = od.OfferGuid
AND		od.LanguageGuid = @LanguageGuid
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID

DROP TABLE #PageIndex
GO
/****** Object:  StoredProcedure [dbo].[ws_Offer_Delete]    Script Date: 03/27/2007 17:33:28 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Offer_Delete]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		2/28/2007
*/
	
@Guid uniqueidentifier, 
@IsDeleted bit,
@DeletedTime datetime, 
@DeletedBy uniqueidentifier, 
@DeletedFromIP nvarchar(255)



AS
UPDATE 		[dbo].[ws_Offer] 

SET
			[IsDeleted] = @IsDeleted,
			[DeletedTime] = @DeletedTime,
			[DeletedBy] = @DeletedBy,
			[DeletedFromIP] = @DeletedFromIP
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Order_Delete]    Script Date: 03/27/2007 17:34:34 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Order_Delete]

/*
Author:   			Joe Audette
Created: 			3/17/2007
Last Modified: 		3/17/2007
*/

@OrderGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_Order]
WHERE
	[OrderGuid] = @OrderGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_Order_SelectByUser]    Script Date: 03/27/2007 17:34:47 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Order_SelectByUser]

/*
Author:   			Joe Audette
Created: 			3/17/2007
Last Modified: 		3/23/2007
*/

@StoreGuid uniqueidentifier,
@UserGuid uniqueidentifier

AS


SELECT
		[OrderGuid],
		[OrderNo],
		[StoreGuid],
		[UserGuid],
		[CustomerName],
		[CustomerCompany],
		[CustomerAddressLine1],
		[CustomerAddressLine2],
		[CustomerSuburb],
		[CustomerCity],
		[CustomerPostalCode],
		[CustomerState],
		[CustomerCountry],
		[CustomerTelephoneDay],
		[CustomerTelephoneNight],
		[CustomerEmail],
		[CustomerEmailVerified],
		[DeliveryName],
		[DeliveryCompany],
		[DeliveryAddress1],
		[DeliveryAddress2],
		[DeliverySuburb],
		[DeliveryCity],
		[DeliveryPostalCode],
		[DeliveryState],
		[DeliveryCountry],
		[BillingName],
		[BillingCompany],
		[BillingAddress1],
		[BillingAddress2],
		[BillingSuburb],
		[BillingCity],
		[BillingPostalCode],
		[BillingState],
		[BillingCountry],
		[CardTypeGuid],
		[CardOwner],
		[CardNumber],
		[CardExpires],
		[CardSecurityCode],
		[CurrencyGuid],
		[CurrencyValue],
		[SubTotal],
		[TaxTotal],
		[OrderTotal],
		[Created],
		[CreatedFromIP],
		[Completed],
		[CompletedFromIP],
		[LastModified],
		[LastUserActivity],
		[StatusGuid],
		[GatewayTransID],
		[GatewayRawResponse],
		[GatewayAuthCode],
		[TaxZoneGuid]
		
FROM
		[dbo].[ws_Order]
		
WHERE
		[StoreGuid] = @StoreGuid
		AND [UserGuid] = @UserGuid

ORDER BY [Completed] desc
GO
/****** Object:  StoredProcedure [dbo].[ws_Order_SelectPage]    Script Date: 03/27/2007 17:34:49 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Order_SelectPage]

-- Author:   			Joe Audette
-- Created: 			3/17/2007
-- Last Modified: 		3/17/2007

@StoreGuid uniqueidentifier,
@PageNumber 			int,
@PageSize 			int

AS

DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
OrderGuid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( 
OrderGuid
)

SELECT
		[OrderGuid]
		
FROM
		[dbo].[ws_Order]
		
WHERE  [StoreGuid] = @StoreGuid

ORDER BY [Created] DESC

END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,
		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_Order] t1

JOIN			#PageIndex t2
ON			
		t1.[OrderGuid] = t2.[OrderGuid]
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID

DROP TABLE #PageIndex
GO
/****** Object:  StoredProcedure [dbo].[ws_Cart_Delete]    Script Date: 03/27/2007 17:31:53 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Cart_Delete]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/5/2007
*/

@CartGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_Cart]
WHERE
	[CartGuid] = @CartGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTicket_SelectPageByStore]    Script Date: 03/27/2007 17:33:04 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTicket_SelectPageByStore]

-- Author:   			Joe Audette
-- Created: 			3/25/2007
-- Last Modified: 		3/25/2007


@StoreGuid uniqueidentifier,
@PageNumber 			int,
@PageSize 			int

AS

DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
Guid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( 
Guid
)

SELECT
		[Guid]
		
FROM
		[dbo].[ws_FullfillDownloadTicket]
		
WHERE
		[StoreGuid] = @StoreGuid

ORDER BY 
		[PurchaseTime] DESC
END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,
		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_FullfillDownloadTicket] t1

JOIN			#PageIndex t2
ON			
		t1.[Guid] = t2.[Guid]
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID

DROP TABLE #PageIndex
GO
/****** Object:  StoredProcedure [dbo].[ws_CartOffers_Delete]    Script Date: 03/27/2007 17:31:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CartOffers_Delete]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/5/2007
*/

@ItemGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_CartOffers]
WHERE
	[ItemGuid] = @ItemGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_Category_SelectPage]    Script Date: 03/27/2007 17:32:23 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Category_SelectPage]

-- Author:   			Joe Audette
-- Created: 			2/21/2007
-- Last Modified: 		2/21/2007

@StoreGuid		uniqueidentifier,
@LanguageGuid	uniqueidentifier,
@PageNumber 	int,
@PageSize 		int

AS
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
	Guid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( Guid
)

SELECT
		c.[Guid]
		
FROM
		[dbo].[ws_Category] c

LEFT OUTER JOIN
		[dbo].[ws_CategoryDescription] cd

ON		c.Guid = cd.CategoryGuid
AND		cd.LanguageGuid = @LanguageGuid
		
WHERE	c.[StoreGuid] = @StoreGuid

ORDER BY	cd.[Name]

END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,
		'Name' = COALESCE(cd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_CategoryDescription]
			WHERE [dbo].[ws_CategoryDescription].[CategoryGuid] = t1.Guid)
			),


		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_Category] t1

JOIN			#PageIndex t2
ON			
		t1.[Guid] = t2.[Guid]

LEFT OUTER JOIN
		[dbo].[ws_CategoryDescription] cd

ON		t1.Guid = cd.CategoryGuid
AND		cd.LanguageGuid = @LanguageGuid
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID

DROP TABLE #PageIndex
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoCountry_SelectPage]    Script Date: 03/27/2007 17:33:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoCountry_SelectPage]

-- Author:   			Joe Audette
-- Created: 			2/16/2007
-- Last Modified: 		2/16/2007


@PageNumber 			int,
@PageSize 			int

AS
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
Guid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( 
Guid
)

SELECT
		[Guid]
		
FROM
		[dbo].[ws_GeoCountry]
		
-- WHERE

ORDER BY [Name]

END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,
		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_GeoCountry] t1

JOIN			#PageIndex t2
ON			
		t1.[Guid] = t2.[Guid]
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID

DROP TABLE #PageIndex
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoZone_SelectPage]    Script Date: 03/27/2007 17:33:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoZone_SelectPage]

-- Author:   			Joe Audette
-- Created: 			2/16/2007
-- Last Modified: 		2/16/2007


@PageNumber 			int,
@PageSize 			int

AS
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
Guid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( 
Guid
)

SELECT
		t1.[Guid]
		
FROM
		[dbo].[ws_GeoZone] t1

JOIN	ws_GeoCountry t3
ON		t1.CountryGuid = t3.Guid
		
-- WHERE

ORDER BY t3.[Name] asc, t1.[Name] asc

END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,
		t3.[Name] As CountryName,
		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_GeoZone] t1

JOIN			#PageIndex t2
ON			
		t1.[Guid] = t2.[Guid]

JOIN	ws_GeoCountry t3
ON		t1.CountryGuid = t3.Guid
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID
DROP TABLE #PageIndex
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoZone_SelectPageByCountry]    Script Date: 03/27/2007 17:33:20 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoZone_SelectPageByCountry]

-- Author:   			Joe Audette
-- Created: 			2/17/2007
-- Last Modified: 		2/17/2007

@CountryGuid		uniqueidentifier,
@PageNumber 			int,
@PageSize 			int

AS
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
Guid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( 
Guid
)

SELECT
		t1.[Guid]
		
FROM
		[dbo].[ws_GeoZone] t1

JOIN	ws_GeoCountry t3
ON		t1.CountryGuid = t3.Guid
		
WHERE	t1.CountryGuid = @CountryGuid

ORDER BY t3.[Name] asc, t1.[Name] asc

END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,
		t3.[Name] As CountryName,
		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_GeoZone] t1

JOIN			#PageIndex t2
ON			
		t1.[Guid] = t2.[Guid]

JOIN	ws_GeoCountry t3
ON		t1.CountryGuid = t3.Guid
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID
GO
/****** Object:  StoredProcedure [dbo].[ws_Language_SelectPage]    Script Date: 03/27/2007 17:33:25 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_Language_SelectPage]

-- Author:   			Joe Audette
-- Created: 			2/17/2007
-- Last Modified: 		2/17/2007

@PageNumber 			int,
@PageSize 			int

AS
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
Guid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( 
Guid
)

SELECT
		[Guid]
		
FROM
		[dbo].[ws_Language]
		
-- WHERE

ORDER BY  [Name]

END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,
		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_Language] t1

JOIN			#PageIndex t2
ON			
		t1.[Guid] = t2.[Guid]
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID

DROP TABLE #PageIndex
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxClass_SelectPage]    Script Date: 03/27/2007 17:35:41 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_TaxClass_SelectPage]

-- Author:   			Joe Audette
-- Created: 			2/17/2007
-- Last Modified: 		2/17/2007

@StoreGuid		uniqueidentifier,
@PageNumber 			int,
@PageSize 			int

AS
DECLARE @PageLowerBound int
DECLARE @PageUpperBound int


SET @PageLowerBound = (@PageSize * @PageNumber) - @PageSize
SET @PageUpperBound = @PageLowerBound + @PageSize + 1

CREATE TABLE #PageIndex 
(
	IndexID int IDENTITY (1, 1) NOT NULL,
Guid UniqueIdentifier
)

BEGIN

INSERT INTO #PageIndex ( 
Guid
)

SELECT
		[Guid]
		
FROM
		[dbo].[ws_TaxClass]
		
WHERE [StoreGuid] = @StoreGuid

ORDER BY [Title]

END

DECLARE @TotalRows int
DECLARE @TotalPages int
DECLARE @Remainder int

SET @TotalRows = (SELECT Count(*) FROM #PageIndex)
SET @TotalPages = @TotalRows / @PageSize
SET @Remainder = @TotalRows % @PageSize
IF @Remainder > 0 
SET @TotalPages = @TotalPages + 1


SELECT
		t1.*,
		'TotalPages' = @TotalPages
		
FROM
		[dbo].[ws_TaxClass] t1

JOIN			#PageIndex t2
ON			
		t1.[Guid] = t2.[Guid]
		
WHERE
		t2.IndexID > @PageLowerBound 
		AND t2.IndexID < @PageUpperBound
		
ORDER BY t2.IndexID

DROP TABLE #PageIndex
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTerms_SelectOne]    Script Date: 03/27/2007 17:32:47 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTerms_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/23/2007
Last Modified: 		2/24/2007
*/

@Guid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS
SELECT
		dt.[Guid],
		dt.[StoreGuid],
		dt.[DownloadsAllowed],
		dt.[ExpireAfterDays],
		dt.[CountAfterDownload],
		dt.[Created],
		dt.[CreatedBy],
		dt.[CreatedFromIP],
		dt.[LastModified],
		dt.[LastModifedBy],
		dt.[LastModifedFromIPAddress],

		'Name' = COALESCE(dtd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_FullfillDownloadTermsDesc]
			WHERE [dbo].[ws_FullfillDownloadTermsDesc].[TermsGuid] = dt.Guid)
			),

		'Description' =dtd.[Description]
		
		
FROM
		[dbo].[ws_FullfillDownloadTerms] dt

LEFT OUTER JOIN
		[dbo].[ws_FullfillDownloadTermsDesc] dtd

ON		dt.Guid = dtd.TermsGuid
AND		dtd.LanguageGuid = @LanguageGuid
		
WHERE
		dt.[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTermsDesc_DeleteByTerms]    Script Date: 03/27/2007 17:32:51 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTermsDesc_DeleteByTerms]

/*
Author:   			Joe Audette
Created: 			2/23/2007
Last Modified: 		2/23/2007
*/

@TermsGuid uniqueidentifier


AS

DELETE FROM [dbo].[ws_FullfillDownloadTermsDesc]
WHERE
	[TermsGuid] = @TermsGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTermsDesc_Insert]    Script Date: 03/27/2007 17:32:55 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTermsDesc_Insert]


@TermsGuid uniqueidentifier,
@LanguageGuid uniqueidentifier,
@Name nvarchar(255),
@Description ntext


AS

INSERT INTO 		[dbo].[ws_FullfillDownloadTermsDesc] 
(
					[TermsGuid],
					[LanguageGuid],
					[Name],
					[Description]
) 

VALUES 
(
					@TermsGuid,
					@LanguageGuid,
					@Name,
					@Description
)
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTermsDesc_Update]    Script Date: 03/27/2007 17:32:57 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTermsDesc_Update]

/*
Author:   			Joe Audette
Created: 			2/23/2007
Last Modified: 		2/23/2007
*/
	
@TermsGuid uniqueidentifier, 
@LanguageGuid uniqueidentifier, 
@Name nvarchar(255), 
@Description ntext 


AS

UPDATE 		[dbo].[ws_FullfillDownloadTermsDesc] 

SET
			[Name] = @Name,
			[Description] = @Description
			
WHERE
			[TermsGuid] = @TermsGuid
			AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTermsDesc_SelectOne]    Script Date: 03/27/2007 17:32:56 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTermsDesc_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/24/2007
Last Modified: 		2/24/2007
*/

@TermsGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS


SELECT
		[TermsGuid],
		[LanguageGuid],
		[Name],
		[Description]
		
FROM
		[dbo].[ws_FullfillDownloadTermsDesc]
		
WHERE
		[TermsGuid] = @TermsGuid
		AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTerms_SelectAll]    Script Date: 03/27/2007 17:32:46 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTerms_SelectAll]

/*
Author:   			Joe Audette
Created: 			2/23/2007
Last Modified: 		2/23/2007
*/

@StoreGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS
SELECT
		dt.[Guid],
		dt.[StoreGuid],
		dt.[DownloadsAllowed],
		dt.[ExpireAfterDays],
		dt.[CountAfterDownload],
		dt.[Created],
		dt.[CreatedBy],
		dt.[CreatedFromIP],
		dt.[LastModified],
		dt.[LastModifedBy],
		dt.[LastModifedFromIPAddress],

		'Name' = COALESCE(dtd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_FullfillDownloadTermsDesc]
			WHERE [dbo].[ws_FullfillDownloadTermsDesc].[TermsGuid] = dt.Guid)
			),

		'Description' = dtd.[Description]
		
FROM
		[dbo].[ws_FullfillDownloadTerms] dt

LEFT OUTER JOIN
		[dbo].[ws_FullfillDownloadTermsDesc] dtd

ON		dt.Guid = dtd.TermsGuid
AND		dtd.LanguageGuid = @LanguageGuid


WHERE
		dt.[StoreGuid] = @StoreGuid

ORDER BY
		dtd.[Name]
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTermsDesc_Delete]    Script Date: 03/27/2007 17:32:51 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTermsDesc_Delete]

/*
Author:   			Joe Audette
Created: 			2/23/2007
Last Modified: 		2/23/2007
*/

@TermsGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_FullfillDownloadTermsDesc]
WHERE
	[TermsGuid] = @TermsGuid
	AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferHistory_Insert]    Script Date: 03/27/2007 17:34:00 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferHistory_Insert]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		3/15/2007
*/

@Guid uniqueidentifier,
@OfferGuid uniqueidentifier,
@StoreGuid uniqueidentifier,
@IsVisible bit,
@IsSpecial bit,
@Created datetime,
@CreatedBy uniqueidentifier,
@CreatedFromIP nvarchar(255),
@IsDeleted bit,
@DeletedTime datetime,
@DeletedBy uniqueidentifier,
@DeletedFromIP nvarchar(255),
@LastModified datetime,
@LastModifiedBy uniqueidentifier,
@LastModifiedFromIP nvarchar(255),
@LogTime datetime,
@TaxClassGuid uniqueidentifier

	
AS
INSERT INTO 	[dbo].[ws_OfferHistory] 
(
				[Guid],
				[OfferGuid],
				[StoreGuid],
				[TaxClassGuid],
				[IsVisible],
				[IsSpecial],
				[Created],
				[CreatedBy],
				[CreatedFromIP],
				[IsDeleted],
				[DeletedTime],
				[DeletedBy],
				[DeletedFromIP],
				[LastModified],
				[LastModifiedBy],
				[LastModifiedFromIP],
				[LogTime]
) 

VALUES 
(
				@Guid,
				@OfferGuid,
				@StoreGuid,
				@TaxClassGuid,
				@IsVisible,
				@IsSpecial,
				@Created,
				@CreatedBy,
				@CreatedFromIP,
				@IsDeleted,
				@DeletedTime,
				@DeletedBy,
				@DeletedFromIP,
				@LastModified,
				@LastModifiedBy,
				@LastModifiedFromIP,
				@LogTime
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferProduct_SelectByOffer]    Script Date: 03/27/2007 17:34:26 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferProduct_SelectByOffer]

/*
Author:   			Joe Audette
Created: 			3/2/2007
Last Modified: 		3/2/2007
*/

@OfferGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS


SELECT
		op.[Guid],
		op.[OfferGuid],
		op.[ProductGuid],
		op.[FullfillType],
		op.[FullFillTermsGuid],
		op.[Quantity],
		op.[SortOrder],
		
		'Name' = COALESCE(pd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_ProductDescription]
			WHERE [dbo].[ws_ProductDescription].[ProductGuid] = op.ProductGuid)
			)
		
FROM
		[dbo].[ws_OfferProduct] op

LEFT OUTER JOIN
		[dbo].[ws_ProductDescription] pd

ON		op.ProductGuid = pd.ProductGuid
AND		pd.LanguageGuid = @LanguageGuid
		
WHERE
		op.[OfferGuid] = @OfferGuid
		AND op.[IsDeleted] = 0

ORDER BY
		op.[SortOrder]
GO
/****** Object:  StoredProcedure [dbo].[ws_ProductDescription_Delete]    Script Date: 03/27/2007 17:35:23 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_ProductDescription_Delete]

/*
Author:   			Joe Audette
Created: 			2/24/2007
Last Modified: 		2/24/2007
*/

@ProductGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_ProductDescription]
WHERE
	[ProductGuid] = @ProductGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_ProductDescription_SelectOne]    Script Date: 03/27/2007 17:35:24 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_ProductDescription_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/24/2007
Last Modified: 		2/24/2007
*/

@ProductGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS


SELECT
		[ProductGuid],
		[LanguageGuid],
		[Name],
		[Description]
		
FROM
		[dbo].[ws_ProductDescription]
		
WHERE
		[ProductGuid] = @ProductGuid
		AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_ProductDescription_Insert]    Script Date: 03/27/2007 17:35:23 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_ProductDescription_Insert]

@ProductGuid uniqueidentifier,
@LanguageGuid uniqueidentifier,
@Name nvarchar(255),
@Description ntext


AS

INSERT INTO 		[dbo].[ws_ProductDescription] 
(
					[ProductGuid],
					[LanguageGuid],
					[Name],
					[Description]
) 

VALUES 
(
					@ProductGuid,
					@LanguageGuid,
					@Name,
					@Description
)
GO
/****** Object:  StoredProcedure [dbo].[ws_ProductDescription_Update]    Script Date: 03/27/2007 17:35:25 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_ProductDescription_Update]

/*
Author:   			Joe Audette
Created: 			2/24/2007
Last Modified: 		2/24/2007
*/
	
@ProductGuid uniqueidentifier, 
@LanguageGuid uniqueidentifier, 
@Name nvarchar(255), 
@Description ntext 


AS

UPDATE 		[dbo].[ws_ProductDescription] 

SET
			[Name] = @Name,
			[Description] = @Description
			
WHERE
			[ProductGuid] = @ProductGuid
			AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_Product_SelectAll]    Script Date: 03/27/2007 17:35:18 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Product_SelectAll]

/*
Author:   			Joe Audette
Created: 			2/24/2007
Last Modified: 		2/24/2007
*/

@StoreGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS
SELECT
		p.[Guid],
		p.[StoreGuid],
		p.[TaxClassGuid],
		p.[Sku],
		p.[ModelNumber],
		p.[Status],
		p.[FullfillmentType],
		p.[Weight],
		p.[QuantityOnHand],
		p.[ImageFileName],
		p.[ImageFileBytes],
		p.[Created],
		p.[CreatedBy],
		p.[LastModified],
		p.[LastModifedBy],

		'Name' = COALESCE(pd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_ProductDescription]
			WHERE [dbo].[ws_ProductDescription].[ProductGuid] = p.Guid)
			)
		
FROM
		[dbo].[ws_Product] p

LEFT OUTER JOIN
		[dbo].[ws_ProductDescription] pd

ON		p.Guid = pd.ProductGuid
AND		pd.LanguageGuid = @LanguageGuid
		
WHERE
		p.[StoreGuid] = @StoreGuid
		AND p.[IsDeleted] = 0

ORDER BY

COALESCE(pd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_ProductDescription]
			WHERE [dbo].[ws_ProductDescription].[ProductGuid] = p.Guid)
			)
GO
/****** Object:  StoredProcedure [dbo].[ws_Product_SelectOne]    Script Date: 03/27/2007 17:35:20 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Product_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/24/2007
Last Modified: 		2/24/2007
*/

@Guid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS


SELECT
		p.[Guid],
		p.[StoreGuid],
		p.[TaxClassGuid],
		p.[Sku],
		p.[ModelNumber],
		p.[Status],
		p.[FullfillmentType],
		p.[Weight],
		p.[QuantityOnHand],
		p.[ImageFileName],
		p.[ImageFileBytes],
		p.[Created],
		p.[CreatedBy],
		p.[LastModified],
		p.[LastModifedBy],

		'Name' = COALESCE(pd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_ProductDescription]
			WHERE [dbo].[ws_ProductDescription].[ProductGuid] = p.Guid)
			),

		'Description' = pd.[Description]
		
FROM
		[dbo].[ws_Product] p

LEFT OUTER JOIN
		[dbo].[ws_ProductDescription] pd

ON		p.Guid = pd.ProductGuid
AND		pd.LanguageGuid = @LanguageGuid
		
WHERE
		p.[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTicket_SelectByOrder]    Script Date: 03/27/2007 17:33:02 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTicket_SelectByOrder]

/*
Author:   			Joe Audette
Created: 			3/25/2007
Last Modified: 		3/25/2007
*/

@OrderGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS


SELECT
		fdt.[Guid],
		fdt.[StoreGuid],
		fdt.[OrderGuid],
		fdt.[UserGuid],
		fdt.[ProductGuid],
		fdt.[FullfillTermsGuid],
		fdt.[DownloadsAllowed],
		fdt.[ExpireAfterDays],
		fdt.[CountAfterDownload],
		fdt.[PurchaseTime],
		fdt.[DownloadedCount],

		'Name' = COALESCE(pd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_ProductDescription]
			WHERE [dbo].[ws_ProductDescription].[ProductGuid] = fdt.[ProductGuid])
			)
		
FROM
		[dbo].[ws_FullfillDownloadTicket] fdt

LEFT OUTER JOIN
		[dbo].[ws_ProductDescription] pd

ON		fdt.[ProductGuid] = pd.ProductGuid
AND		pd.LanguageGuid = @LanguageGuid
		
WHERE
		fdt.[OrderGuid] = @OrderGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderOfferProduct_SelectByOrder]    Script Date: 03/27/2007 17:35:00 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderOfferProduct_SelectByOrder]

/*
Author:   			Joe Audette
Created: 			3/18/2007
Last Modified: 		3/25/2007
*/

@OrderGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS


SELECT
		oop.[Guid],
		oop.[OrderGuid],
		oop.[OfferGuid],
		oop.[ProductGuid],
		oop.[FullfillType],
		oop.[FullfillTermsGuid],
		oop.[Created],

		'Name' = COALESCE(pd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_ProductDescription]
			WHERE [dbo].[ws_ProductDescription].[ProductGuid] = oop.ProductGuid)
			)
		
FROM
		[dbo].[ws_OrderOfferProduct] oop

LEFT OUTER JOIN
		[dbo].[ws_ProductDescription] pd

ON		oop.ProductGuid = pd.ProductGuid
AND		pd.LanguageGuid = @LanguageGuid
		
WHERE
		oop.[OrderGuid] = @OrderGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferAvailabilityHistory_Insert]    Script Date: 03/27/2007 17:33:50 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferAvailabilityHistory_Insert]

/*
Author:   			Joe Audette
Created: 			3/1/2007
Last Modified: 		3/1/2007
*/

@Guid uniqueidentifier,
@AvailabilityGuid uniqueidentifier,
@OfferGuid uniqueidentifier,
@BeginUTC datetime,
@EndUTC datetime,
@RequiresOfferCode bit,
@OfferCode nvarchar(50),
@MaxAllowedPerCustomer int,
@Created datetime,
@CreatedBy uniqueidentifier,
@CreatedFromIP nvarchar(255),
@IsDeleted bit,
@DeletedBy uniqueidentifier,
@DeletedTime datetime,
@DeletedFromIP nvarchar(255),
@LastModified datetime,
@LastModifedBy uniqueidentifier,
@LastModifedFromIP nvarchar(255),
@LogTime datetime

	
AS

INSERT INTO 	[dbo].[ws_OfferAvailabilityHistory] 
(
				[Guid],
				[AvailabilityGuid],
				[OfferGuid],
				[BeginUTC],
				[EndUTC],
				[RequiresOfferCode],
				[OfferCode],
				[MaxAllowedPerCustomer],
				[Created],
				[CreatedBy],
				[CreatedFromIP],
				[IsDeleted],
				[DeletedBy],
				[DeletedTime],
				[DeletedFromIP],
				[LastModified],
				[LastModifedBy],
				[LastModifedFromIP],
				[LogTime]
) 

VALUES 
(
				@Guid,
				@AvailabilityGuid,
				@OfferGuid,
				@BeginUTC,
				@EndUTC,
				@RequiresOfferCode,
				@OfferCode,
				@MaxAllowedPerCustomer,
				@Created,
				@CreatedBy,
				@CreatedFromIP,
				@IsDeleted,
				@DeletedBy,
				@DeletedTime,
				@DeletedFromIP,
				@LastModified,
				@LastModifedBy,
				@LastModifedFromIP,
				@LogTime
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferPrice_Insert]    Script Date: 03/27/2007 17:34:03 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferPrice_Insert]

/*
Author:   			Joe Audette
Created: 			3/3/2007
Last Modified: 		3/3/2007
*/

@Guid uniqueidentifier,
@OfferGuid uniqueidentifier,
@CurrencyGuid uniqueidentifier,
@Price decimal(15, 4),
@Created datetime,
@CreatedBy uniqueidentifier,
@CreatedFromIP nvarchar(255),
@LastModifed datetime,
@LastModifiedBy uniqueidentifier,
@ModifiedFromIP nvarchar(255)

	
AS

INSERT INTO 	[dbo].[ws_OfferPrice] 
(
				[Guid],
				[OfferGuid],
				[CurrencyGuid],
				[Price],
				[Created],
				[CreatedBy],
				[CreatedFromIP],
				[LastModifed],
				[LastModifiedBy],
				[ModifiedFromIP]
) 

VALUES 
(
				@Guid,
				@OfferGuid,
				@CurrencyGuid,
				@Price,
				@Created,
				@CreatedBy,
				@CreatedFromIP,
				@LastModifed,
				@LastModifiedBy,
				@ModifiedFromIP
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferPrice_Update]    Script Date: 03/27/2007 17:34:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferPrice_Update]

/*
Author:   			Joe Audette
Created: 			3/3/2007
Last Modified: 		3/3/2007
*/
	
@Guid uniqueidentifier, 
@CurrencyGuid uniqueidentifier, 
@Price decimal(15, 4), 
@LastModifed datetime, 
@LastModifiedBy uniqueidentifier, 
@ModifiedFromIP nvarchar(255) 


AS

UPDATE 		[dbo].[ws_OfferPrice] 

SET
			
			[CurrencyGuid] = @CurrencyGuid,
			[Price] = @Price,
			[LastModifed] = @LastModifed,
			[LastModifiedBy] = @LastModifiedBy,
			[ModifiedFromIP] = @ModifiedFromIP
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferPrice_SelectOne]    Script Date: 03/27/2007 17:34:05 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferPrice_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/3/2007
Last Modified: 		3/3/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[OfferGuid],
		[CurrencyGuid],
		[Price],
		[Created],
		[CreatedBy],
		[CreatedFromIP],
		[LastModifed],
		[LastModifiedBy],
		[ModifiedFromIP]
		
FROM
		[dbo].[ws_OfferPrice]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferPrice_SelectByOffer]    Script Date: 03/27/2007 17:34:04 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferPrice_SelectByOffer]

/*
Author:   			Joe Audette
Created: 			3/3/2007
Last Modified: 		3/3/2007
*/

@OfferGuid uniqueidentifier

AS
SELECT
		op.[Guid],
		op.[OfferGuid],
		op.[CurrencyGuid],
		op.[Price],
		'Currency' = c.[Title],
		'CurrencyCode' = c.[Code],
		c.[SymbolLeft],
		c.[SymbolRight]
		
		
FROM
		[dbo].[ws_OfferPrice] op

JOIN
		[dbo].[ws_Currency] c

ON		c.[Guid] = op.[CurrencyGuid]
		
WHERE
		op.[OfferGuid] = @OfferGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferPrice_Delete]    Script Date: 03/27/2007 17:34:01 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferPrice_Delete]

/*
Author:   			Joe Audette
Created: 			3/3/2007
Last Modified: 		3/3/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_OfferPrice]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Offer_SelectTop10Specials]    Script Date: 03/27/2007 17:33:35 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Offer_SelectTop10Specials]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/5/2007
*/

@StoreGuid uniqueidentifier,
@LanguageGuid uniqueidentifier,
@CurrencyGuid uniqueidentifier

AS
SELECT TOP 10
		o.[Guid],
		o.[StoreGuid],
	
		'Name' = COALESCE(od.[ShortDescription],
			(SELECT TOP 1 [ShortDescription] + ' needs translation'
			FROM [dbo].[ws_OfferDescription]
			WHERE [dbo].[ws_OfferDescription].[OfferGuid] = o.Guid)
			),

		'Description' = od.[LongDescription],
			

		'Currency' = c.[Title],
		c.SymbolLeft,
		c.SymbolRight,
		op.Price

		
FROM
		[dbo].[ws_Offer] o

LEFT OUTER JOIN
		[dbo].[ws_OfferDescription] od

ON		o.Guid = od.OfferGuid
AND		od.LanguageGuid = @LanguageGuid

JOIN	
		[dbo].[ws_OfferPrice] op
ON		op.[OfferGuid] = o.[Guid]
		AND op.[CurrencyGuid] = @CurrencyGuid

JOIN	
		[dbo].[ws_Currency] c
ON		c.[Guid] = op.CurrencyGuid
		
WHERE
		o.[StoreGuid] = @StoreGuid
		AND o.[IsDeleted] = 0
		AND o.[IsVisible] = 1
		AND o.[IsSpecial] = 1

ORDER BY
	COALESCE(od.[ShortDescription],
			(SELECT TOP 1 [ShortDescription] + ' needs translation'
			FROM [dbo].[ws_OfferDescription]
			WHERE [dbo].[ws_OfferDescription].[OfferGuid] = o.Guid)
			)
GO
/****** Object:  StoredProcedure [dbo].[ws_ProductFile_Delete]    Script Date: 03/27/2007 17:35:25 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_ProductFile_Delete]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		2/28/2007
*/

@ProductGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_ProductFile]
WHERE
	[ProductGuid] = @ProductGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_ProductFile_SelectOne]    Script Date: 03/27/2007 17:35:26 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_ProductFile_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		2/28/2007
*/

@ProductGuid uniqueidentifier

AS


SELECT
		[ProductGuid],
		[FileName],
		[FileImage],
		[ServerFileName],
		[ByteLength],
		[Created],
		[CreatedBy]
		
FROM
		[dbo].[ws_ProductFile]
		
WHERE
		[ProductGuid] = @ProductGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_ProductFile_Insert]    Script Date: 03/27/2007 17:35:26 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_ProductFile_Insert]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		2/28/2007
*/

@ProductGuid uniqueidentifier,
@FileName nvarchar(255),
@FileImage image,
@ServerFileName nvarchar(255),
@ByteLength int,
@Created datetime,
@CreatedBy uniqueidentifier

	
AS

INSERT INTO 	[dbo].[ws_ProductFile] 
(
				[ProductGuid],
				[FileName],
				[FileImage],
				[ServerFileName],
				[ByteLength],
				[Created],
				[CreatedBy]
) 

VALUES 
(
				@ProductGuid,
				@FileName,
				@FileImage,
				@ServerFileName,
				@ByteLength,
				@Created,
				@CreatedBy
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_ProductFile_Update]    Script Date: 03/27/2007 17:35:27 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_ProductFile_Update]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		2/28/2007
*/
	
@ProductGuid uniqueidentifier, 
@FileName nvarchar(255), 
@FileImage image, 
@ServerFileName nvarchar(255), 
@ByteLength int, 
@Created datetime, 
@CreatedBy uniqueidentifier 


AS

UPDATE 		[dbo].[ws_ProductFile] 

SET
			[FileName] = @FileName,
			[FileImage] = @FileImage,
			[ServerFileName] = @ServerFileName,
			[ByteLength] = @ByteLength,
			[Created] = @Created,
			[CreatedBy] = @CreatedBy
			
WHERE
			[ProductGuid] = @ProductGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferDescription_Delete]    Script Date: 03/27/2007 17:33:50 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferDescription_Delete]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		2/28/2007
*/

@OfferGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_OfferDescription]
WHERE
	[OfferGuid] = @OfferGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferDescription_SelectOne]    Script Date: 03/27/2007 17:33:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferDescription_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		2/28/2007
*/

@OfferGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS


SELECT
		[OfferGuid],
		[LanguageGuid],
		[ShortDescription],
		[LongDescription]
		
FROM
		[dbo].[ws_OfferDescription]
		
WHERE
		[OfferGuid] = @OfferGuid
		AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferDescription_Insert]    Script Date: 03/27/2007 17:33:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferDescription_Insert]

@OfferGuid uniqueidentifier,
@LanguageGuid uniqueidentifier,
@ShortDescription nvarchar(255),
@LongDescription ntext


AS

INSERT INTO 		[dbo].[ws_OfferDescription] 
(
					[OfferGuid],
					[LanguageGuid],
					[ShortDescription],
					[LongDescription]
) 

VALUES 
(
					@OfferGuid,
					@LanguageGuid,
					@ShortDescription,
					@LongDescription
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferDescription_Update]    Script Date: 03/27/2007 17:33:54 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferDescription_Update]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		2/28/2007
*/
	
@OfferGuid uniqueidentifier, 
@LanguageGuid uniqueidentifier, 
@ShortDescription nvarchar(255), 
@LongDescription ntext 


AS

UPDATE 		[dbo].[ws_OfferDescription] 

SET
			[ShortDescription] = @ShortDescription,
			[LongDescription] = @LongDescription
			
WHERE
			[OfferGuid] = @OfferGuid
			AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_Offer_SelectOne]    Script Date: 03/27/2007 17:33:33 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Offer_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		3/15/2007
*/

@Guid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS
SELECT
		o.[Guid],
		o.[StoreGuid],
		o.[IsVisible],
		o.[IsSpecial],
		o.[TaxClassGuid],
		o.[Created],
		o.[CreatedBy],
		o.[CreatedFromIP],
		o.[IsDeleted],
		o.[DeletedTime],
		o.[DeletedBy],
		o.[DeletedFromIP],
		o.[LastModified],
		o.[LastModifiedBy],
		o.[LastModifiedFromIP],

		'Name' = COALESCE(od.[ShortDescription],
			(SELECT TOP 1 [ShortDescription] + ' needs translation'
			FROM [dbo].[ws_OfferDescription]
			WHERE [dbo].[ws_OfferDescription].[OfferGuid] = o.Guid)
			),

		'Description' = od.[LongDescription]

		
FROM
		[dbo].[ws_Offer] o

LEFT OUTER JOIN
		[dbo].[ws_OfferDescription] od

ON		o.Guid = od.OfferGuid
AND		od.LanguageGuid = @LanguageGuid
		
WHERE
		o.[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_CartOffers_SelectByCart]    Script Date: 03/27/2007 17:31:59 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CartOffers_SelectByCart]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/15/2007
*/

@CartGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS
SELECT
		co.[ItemGuid],
		co.[CartGuid],
		co.[OfferGuid],
		co.[PriceGuid],
		co.[CurrencyGuid],
		co.[OfferPrice],
		co.[AddedToCart],
		co.[Quantity],
		co.[TaxClassGuid],


		'Name' = COALESCE(od.[ShortDescription],
			(SELECT TOP 1 [ShortDescription] + ' needs translation'
			FROM [dbo].[ws_OfferDescription]
			WHERE [dbo].[ws_OfferDescription].[OfferGuid] = co.OfferGuid)
			),

		'Currency' = c.[Title],
		'CurrencyCode' = c.[Code],
		c.[SymbolLeft],
		c.[SymbolRight]
		
FROM
		[dbo].[ws_CartOffers] co

LEFT OUTER JOIN
		[dbo].[ws_OfferDescription] od

ON		co.OfferGuid = od.OfferGuid
AND		od.LanguageGuid = @LanguageGuid


JOIN
		[dbo].[ws_Currency] c

ON		c.[Guid] = co.[CurrencyGuid]

		
WHERE
		co.[CartGuid] = @CartGuid



ORDER BY
		co.[AddedToCart]
GO
/****** Object:  StoredProcedure [dbo].[ws_CartOrderInfo_Update]    Script Date: 03/27/2007 17:32:18 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CartOrderInfo_Update]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/13/2007
*/
	
@CartGuid uniqueidentifier, 
@CustomerName nvarchar(255), 
@CustomerCompany nvarchar(255), 
@CustomerAddressLine1 nvarchar(255), 
@CustomerAddressLine2 nvarchar(255), 
@CustomerSuburb nvarchar(255), 
@CustomerCity nvarchar(255), 
@CustomerPostalCode nvarchar(20), 
@CustomerState nvarchar(255), 
@CustomerCountry nvarchar(255), 
@CustomerTelephoneDay nvarchar(32), 
@CustomerTelephoneNight nvarchar(32), 
@CustomerEmail nvarchar(96), 
@CustomerEmailVerified bit, 
@DeliveryName nvarchar(255), 
@DeliveryCompany nvarchar(255), 
@DeliveryAddress1 nvarchar(255), 
@DeliveryAddress2 nvarchar(255), 
@DeliverySuburb nvarchar(255), 
@DeliveryCity nvarchar(255), 
@DeliveryPostalCode nvarchar(20), 
@DeliveryState nvarchar(255), 
@DeliveryCountry nvarchar(255), 
@BillingName nvarchar(255), 
@BillingCompany nvarchar(255), 
@BillingAddress1 nvarchar(255), 
@BillingAddress2 nvarchar(255), 
@BillingSuburb nvarchar(255), 
@BillingCity nvarchar(255), 
@BillingPostalCode nvarchar(20), 
@BillingState nvarchar(255), 
@BillingCountry nvarchar(255), 
@CardTypeGuid uniqueidentifier, 
@CardOwner nvarchar(100), 
@CardNumber nvarchar(255), 
@CardExpires nvarchar(6), 
@CardSecurityCode nvarchar(50), 
@Completed datetime, 
@CompletedFromIP nvarchar(255),
@TaxZoneGuid uniqueidentifier


AS
UPDATE 		[dbo].[ws_CartOrderInfo] 

SET
			[CustomerName] = @CustomerName,
			[CustomerCompany] = @CustomerCompany,
			[CustomerAddressLine1] = @CustomerAddressLine1,
			[CustomerAddressLine2] = @CustomerAddressLine2,
			[CustomerSuburb] = @CustomerSuburb,
			[CustomerCity] = @CustomerCity,
			[CustomerPostalCode] = @CustomerPostalCode,
			[CustomerState] = @CustomerState,
			[CustomerCountry] = @CustomerCountry,
			[CustomerTelephoneDay] = @CustomerTelephoneDay,
			[CustomerTelephoneNight] = @CustomerTelephoneNight,
			[CustomerEmail] = @CustomerEmail,
			[CustomerEmailVerified] = @CustomerEmailVerified,
			[DeliveryName] = @DeliveryName,
			[DeliveryCompany] = @DeliveryCompany,
			[DeliveryAddress1] = @DeliveryAddress1,
			[DeliveryAddress2] = @DeliveryAddress2,
			[DeliverySuburb] = @DeliverySuburb,
			[DeliveryCity] = @DeliveryCity,
			[DeliveryPostalCode] = @DeliveryPostalCode,
			[DeliveryState] = @DeliveryState,
			[DeliveryCountry] = @DeliveryCountry,
			[BillingName] = @BillingName,
			[BillingCompany] = @BillingCompany,
			[BillingAddress1] = @BillingAddress1,
			[BillingAddress2] = @BillingAddress2,
			[BillingSuburb] = @BillingSuburb,
			[BillingCity] = @BillingCity,
			[BillingPostalCode] = @BillingPostalCode,
			[BillingState] = @BillingState,
			[BillingCountry] = @BillingCountry,
			[CardTypeGuid] = @CardTypeGuid,
			[CardOwner] = @CardOwner,
			[CardNumber] = @CardNumber,
			[CardExpires] = @CardExpires,
			[CardSecurityCode] = @CardSecurityCode,
			[Completed] = @Completed,
			[CompletedFromIP] = @CompletedFromIP,
			[TaxZoneGuid] = @TaxZoneGuid
			
WHERE
			[CartGuid] = @CartGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_CartOrderInfo_SelectOne]    Script Date: 03/27/2007 17:32:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CartOrderInfo_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/5/2007
*/

@CartGuid uniqueidentifier

AS
SELECT
		[CartGuid],
		[CustomerName],
		[CustomerCompany],
		[CustomerAddressLine1],
		[CustomerAddressLine2],
		[CustomerSuburb],
		[CustomerCity],
		[CustomerPostalCode],
		[CustomerState],
		[CustomerCountry],
		[CustomerTelephoneDay],
		[CustomerTelephoneNight],
		[CustomerEmail],
		[CustomerEmailVerified],
		[DeliveryName],
		[DeliveryCompany],
		[DeliveryAddress1],
		[DeliveryAddress2],
		[DeliverySuburb],
		[DeliveryCity],
		[DeliveryPostalCode],
		[DeliveryState],
		[DeliveryCountry],
		[BillingName],
		[BillingCompany],
		[BillingAddress1],
		[BillingAddress2],
		[BillingSuburb],
		[BillingCity],
		[BillingPostalCode],
		[BillingState],
		[BillingCountry],
		[CardTypeGuid],
		[CardOwner],
		[CardNumber],
		[CardExpires],
		[CardSecurityCode],
		[Completed],
		[CompletedFromIP],
		[TaxZoneGuid]
		
FROM
		[dbo].[ws_CartOrderInfo]
		
WHERE
		[CartGuid] = @CartGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_CartOrderInfo_Delete]    Script Date: 03/27/2007 17:32:01 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CartOrderInfo_Delete]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/5/2007
*/

@CartGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_CartOrderInfo]
WHERE
	[CartGuid] = @CartGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_CartOrderInfo_Insert]    Script Date: 03/27/2007 17:32:07 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CartOrderInfo_Insert]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/13/2007
*/

@CartGuid uniqueidentifier,
@CustomerName nvarchar(255),
@CustomerCompany nvarchar(255),
@CustomerAddressLine1 nvarchar(255),
@CustomerAddressLine2 nvarchar(255),
@CustomerSuburb nvarchar(255),
@CustomerCity nvarchar(255),
@CustomerPostalCode nvarchar(20),
@CustomerState nvarchar(255),
@CustomerCountry nvarchar(255),
@CustomerTelephoneDay nvarchar(32),
@CustomerTelephoneNight nvarchar(32),
@CustomerEmail nvarchar(96),
@CustomerEmailVerified bit,
@DeliveryName nvarchar(255),
@DeliveryCompany nvarchar(255),
@DeliveryAddress1 nvarchar(255),
@DeliveryAddress2 nvarchar(255),
@DeliverySuburb nvarchar(255),
@DeliveryCity nvarchar(255),
@DeliveryPostalCode nvarchar(20),
@DeliveryState nvarchar(255),
@DeliveryCountry nvarchar(255),
@BillingName nvarchar(255),
@BillingCompany nvarchar(255),
@BillingAddress1 nvarchar(255),
@BillingAddress2 nvarchar(255),
@BillingSuburb nvarchar(255),
@BillingCity nvarchar(255),
@BillingPostalCode nvarchar(20),
@BillingState nvarchar(255),
@BillingCountry nvarchar(255),
@CardTypeGuid uniqueidentifier,
@CardOwner nvarchar(100),
@CardNumber nvarchar(255),
@CardExpires nvarchar(6),
@CardSecurityCode nvarchar(50),
@Completed datetime,
@CompletedFromIP nvarchar(255),
@TaxZoneGuid uniqueidentifier

	
AS
INSERT INTO 	[dbo].[ws_CartOrderInfo] 
(
				[CartGuid],
				[CustomerName],
				[CustomerCompany],
				[CustomerAddressLine1],
				[CustomerAddressLine2],
				[CustomerSuburb],
				[CustomerCity],
				[CustomerPostalCode],
				[CustomerState],
				[CustomerCountry],
				[CustomerTelephoneDay],
				[CustomerTelephoneNight],
				[CustomerEmail],
				[CustomerEmailVerified],
				[DeliveryName],
				[DeliveryCompany],
				[DeliveryAddress1],
				[DeliveryAddress2],
				[DeliverySuburb],
				[DeliveryCity],
				[DeliveryPostalCode],
				[DeliveryState],
				[DeliveryCountry],
				[BillingName],
				[BillingCompany],
				[BillingAddress1],
				[BillingAddress2],
				[BillingSuburb],
				[BillingCity],
				[BillingPostalCode],
				[BillingState],
				[BillingCountry],
				[CardTypeGuid],
				[CardOwner],
				[CardNumber],
				[CardExpires],
				[CardSecurityCode],
				[Completed],
				[CompletedFromIP],
				[TaxZoneGuid]
) 

VALUES 
(
				@CartGuid,
				@CustomerName,
				@CustomerCompany,
				@CustomerAddressLine1,
				@CustomerAddressLine2,
				@CustomerSuburb,
				@CustomerCity,
				@CustomerPostalCode,
				@CustomerState,
				@CustomerCountry,
				@CustomerTelephoneDay,
				@CustomerTelephoneNight,
				@CustomerEmail,
				@CustomerEmailVerified,
				@DeliveryName,
				@DeliveryCompany,
				@DeliveryAddress1,
				@DeliveryAddress2,
				@DeliverySuburb,
				@DeliveryCity,
				@DeliveryPostalCode,
				@DeliveryState,
				@DeliveryCountry,
				@BillingName,
				@BillingCompany,
				@BillingAddress1,
				@BillingAddress2,
				@BillingSuburb,
				@BillingCity,
				@BillingPostalCode,
				@BillingState,
				@BillingCountry,
				@CardTypeGuid,
				@CardOwner,
				@CardNumber,
				@CardExpires,
				@CardSecurityCode,
				@Completed,
				@CompletedFromIP,
				@TaxZoneGuid
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderStatus_SelectByLanguage]    Script Date: 03/27/2007 17:35:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderStatus_SelectByLanguage]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

@LanguageGuid uniqueidentifier


AS
SELECT
		os.[Guid],
		os.[Sort],
		'Description' = COALESCE(
				osd.[Description], 
					(SELECT TOP 1 [Description] + ' translation needed'
					FROM ws_OrderStatusDescription
					WHERE ws_OrderStatusDescription.[StatusGuid] = os.[Guid]
					)
								)
		
FROM
		[dbo].[ws_OrderStatus] os

LEFT OUTER JOIN	[dbo].[ws_OrderStatusDescription] osd

ON		os.[Guid] = osd.[StatusGuid]
		AND	osd.[LanguageGuid] = @LanguageGuid
		
	
ORDER BY	os.[Sort]
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderStatus_Delete]    Script Date: 03/27/2007 17:35:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderStatus_Delete]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_OrderStatus]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderStatus_SelectOne]    Script Date: 03/27/2007 17:35:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderStatus_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[Sort]
		
FROM
		[dbo].[ws_OrderStatus]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderStatus_Insert]    Script Date: 03/27/2007 17:35:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderStatus_Insert]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

@Guid uniqueidentifier,
@Sort int

	
AS

INSERT INTO 	[dbo].[ws_OrderStatus] 
(
				[Guid],
				[Sort]
) 

VALUES 
(
				@Guid,
				@Sort
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderStatus_Update]    Script Date: 03/27/2007 17:35:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderStatus_Update]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/
	
@Guid uniqueidentifier, 
@Sort int 


AS

UPDATE 		[dbo].[ws_OrderStatus] 

SET
			[Sort] = @Sort
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Currency_Delete]    Script Date: 03/27/2007 17:32:32 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Currency_Delete]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_Currency]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Currency_SelectOne]    Script Date: 03/27/2007 17:32:36 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Currency_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[Title],
		[Code],
		[SymbolLeft],
		[SymbolRight],
		[DecimalPointChar],
		[ThousandsPointChar],
		[DecimalPlaces],
		[Value],
		[LastModified],
		[Created]
		
FROM
		[dbo].[ws_Currency]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Currency_SelectAll]    Script Date: 03/27/2007 17:32:35 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Currency_SelectAll]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

AS


SELECT
		[Guid],
		[Title],
		[Code],
		[SymbolLeft],
		[SymbolRight],
		[DecimalPointChar],
		[ThousandsPointChar],
		[DecimalPlaces],
		[Value],
		[LastModified],
		[Created]
		
FROM
		[dbo].[ws_Currency]

ORDER BY [Title]
GO
/****** Object:  StoredProcedure [dbo].[ws_Currency_Insert]    Script Date: 03/27/2007 17:32:34 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Currency_Insert]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

@Guid uniqueidentifier,
@Title nvarchar(50),
@Code nchar(3),
@SymbolLeft nvarchar(15),
@SymbolRight nvarchar(15),
@DecimalPointChar nchar(1),
@ThousandsPointChar nchar(1),
@DecimalPlaces nchar(1),
@Value decimal(13, 8),
@LastModified datetime,
@Created datetime

	
AS

INSERT INTO 	[dbo].[ws_Currency] 
(
				[Guid],
				[Title],
				[Code],
				[SymbolLeft],
				[SymbolRight],
				[DecimalPointChar],
				[ThousandsPointChar],
				[DecimalPlaces],
				[Value],
				[LastModified],
				[Created]
) 

VALUES 
(
				@Guid,
				@Title,
				@Code,
				@SymbolLeft,
				@SymbolRight,
				@DecimalPointChar,
				@ThousandsPointChar,
				@DecimalPlaces,
				@Value,
				@LastModified,
				@Created
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_Currency_Update]    Script Date: 03/27/2007 17:32:38 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Currency_Update]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/
	
@Guid uniqueidentifier, 
@Title nvarchar(50), 
@Code nchar(3), 
@SymbolLeft nvarchar(15), 
@SymbolRight nvarchar(15), 
@DecimalPointChar nchar(1), 
@ThousandsPointChar nchar(1), 
@DecimalPlaces nchar(1), 
@Value decimal(13, 8), 
@LastModified datetime



AS

UPDATE 		[dbo].[ws_Currency] 

SET
			[Title] = @Title,
			[Code] = @Code,
			[SymbolLeft] = @SymbolLeft,
			[SymbolRight] = @SymbolRight,
			[DecimalPointChar] = @DecimalPointChar,
			[ThousandsPointChar] = @ThousandsPointChar,
			[DecimalPlaces] = @DecimalPlaces,
			[Value] = @Value,
			[LastModified] = @LastModified
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderStatusDescription_Delete]    Script Date: 03/27/2007 17:35:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderStatusDescription_Delete]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

@StatusGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_OrderStatusDescription]
WHERE
	[StatusGuid] = @StatusGuid
	AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderStatusDescription_DeleteByStatus]    Script Date: 03/27/2007 17:35:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderStatusDescription_DeleteByStatus]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

@StatusGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_OrderStatusDescription]
WHERE
	[StatusGuid] = @StatusGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderStatusDescription_SelectOne]    Script Date: 03/27/2007 17:35:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderStatusDescription_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/

@StatusGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS


SELECT
		[StatusGuid],
		[LanguageGuid],
		[Description]
		
FROM
		[dbo].[ws_OrderStatusDescription]
		
WHERE
		[StatusGuid] = @StatusGuid
		AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderStatusDescription_Insert]    Script Date: 03/27/2007 17:35:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderStatusDescription_Insert]

-- THIS STORED PROCEDURE NEEDS TO BE MANUALLY COMPLETED
-- MULITPLE PRIMARY KEY MEMBERS OR NON-GUID/INT PRIMARY KEY

@StatusGuid uniqueidentifier,
@LanguageGuid uniqueidentifier,
@Description nvarchar(255)


AS

INSERT INTO 		[dbo].[ws_OrderStatusDescription] 
(
					[StatusGuid],
					[LanguageGuid],
					[Description]
) 

VALUES 
(
					@StatusGuid,
					@LanguageGuid,
					@Description
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderStatusDescription_Update]    Script Date: 03/27/2007 17:35:15 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderStatusDescription_Update]

/*
Author:   			Joe Audette
Created: 			2/18/2007
Last Modified: 		2/18/2007
*/
	
@StatusGuid uniqueidentifier, 
@LanguageGuid uniqueidentifier, 
@Description nvarchar(255) 


AS

UPDATE 		[dbo].[ws_OrderStatusDescription] 

SET
			[Description] = @Description
			
WHERE
			[StatusGuid] = @StatusGuid
			AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxRate_Update]    Script Date: 03/27/2007 17:35:47 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_TaxRate_Update]

/*
Author:   			Joe Audette
Created: 			2/22/2007
Last Modified: 		2/22/2007
*/
	
@Guid uniqueidentifier, 
@GeoZoneGuid uniqueidentifier, 
@TaxClassGuid uniqueidentifier, 
@Priority int, 
@Rate decimal(18, 4), 
@Description nvarchar(255), 
@LastModified datetime, 
@ModifiedBy uniqueidentifier 


AS

UPDATE 		[dbo].[ws_TaxRate] 

SET
			[GeoZoneGuid] = @GeoZoneGuid,
			[TaxClassGuid] = @TaxClassGuid,
			[Priority] = @Priority,
			[Rate] = @Rate,
			[Description] = @Description,
			[LastModified] = @LastModified,
			[ModifiedBy] = @ModifiedBy
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxRate_Delete]    Script Date: 03/27/2007 17:35:43 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_TaxRate_Delete]

/*
Author:   			Joe Audette
Created: 			2/22/2007
Last Modified: 		2/22/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_TaxRate]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxRate_SelectOne]    Script Date: 03/27/2007 17:35:45 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_TaxRate_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/22/2007
Last Modified: 		2/22/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[StoreGuid],
		[GeoZoneGuid],
		[TaxClassGuid],
		[Priority],
		[Rate],
		[Description],
		[Created],
		[CreatedBy],
		[LastModified],
		[ModifiedBy]
		
FROM
		[dbo].[ws_TaxRate]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxRate_SelectAll]    Script Date: 03/27/2007 17:35:45 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_TaxRate_SelectAll]

/*
Author:   			Joe Audette
Created: 			2/22/2007
Last Modified: 		2/22/2007
*/

@StoreGuid uniqueidentifier,
@GeoZoneGuid uniqueidentifier

AS


SELECT
		[Guid],
		[StoreGuid],
		[GeoZoneGuid],
		[TaxClassGuid],
		[Priority],
		[Rate],
		[Description],
		[Created],
		[CreatedBy],
		[LastModified],
		[ModifiedBy]
		
FROM
		[dbo].[ws_TaxRate]

WHERE
		[StoreGuid] = @StoreGuid
		AND [GeoZoneGuid] = @GeoZoneGuid

ORDER BY [Priority]
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxRate_Insert]    Script Date: 03/27/2007 17:35:45 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_TaxRate_Insert]

/*
Author:   			Joe Audette
Created: 			2/22/2007
Last Modified: 		2/22/2007
*/

@Guid uniqueidentifier,
@StoreGuid uniqueidentifier,
@GeoZoneGuid uniqueidentifier,
@TaxClassGuid uniqueidentifier,
@Priority int,
@Rate decimal(18, 4),
@Description nvarchar(255),
@Created datetime,
@CreatedBy uniqueidentifier,
@LastModified datetime,
@ModifiedBy uniqueidentifier

	
AS

INSERT INTO 	[dbo].[ws_TaxRate] 
(
				[Guid],
				[StoreGuid],
				[GeoZoneGuid],
				[TaxClassGuid],
				[Priority],
				[Rate],
				[Description],
				[Created],
				[CreatedBy],
				[LastModified],
				[ModifiedBy]
) 

VALUES 
(
				@Guid,
				@StoreGuid,
				@GeoZoneGuid,
				@TaxClassGuid,
				@Priority,
				@Rate,
				@Description,
				@Created,
				@CreatedBy,
				@LastModified,
				@ModifiedBy
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadHistory_Insert]    Script Date: 03/27/2007 17:32:41 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadHistory_Insert]

/*
Author:   			Joe Audette
Created: 			3/25/2007
Last Modified: 		3/25/2007
*/

@Guid uniqueidentifier,
@TicketGuid uniqueidentifier,
@UTCTimestamp datetime,
@IPAddress nvarchar(255)

	
AS

INSERT INTO 	[dbo].[ws_FullfillDownloadHistory] 
(
				[Guid],
				[TicketGuid],
				[UTCTimestamp],
				[IPAddress]
) 

VALUES 
(
				@Guid,
				@TicketGuid,
				@UTCTimestamp,
				@IPAddress
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadHistory_CountByTicket]    Script Date: 03/27/2007 17:32:38 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadHistory_CountByTicket]

/*
Author:   			Joe Audette
Created: 			3/25/2007
Last Modified: 		3/25/2007
*/

@TicketGuid uniqueidentifier

AS


SELECT
		Count(*)
		
FROM
		[dbo].[ws_FullfillDownloadHistory]
		
WHERE
		[TicketGuid] = @TicketGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadHistory_SelectOne]    Script Date: 03/27/2007 17:32:42 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadHistory_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/25/2007
Last Modified: 		3/25/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[TicketGuid],
		[UTCTimestamp],
		[IPAddress]
		
FROM
		[dbo].[ws_FullfillDownloadHistory]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxRateHistory_Insert]    Script Date: 03/27/2007 17:35:48 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_TaxRateHistory_Insert]

/*
Author:   			Joe Audette
Created: 			2/22/2007
Last Modified: 		2/23/2007
*/

@Guid uniqueidentifier,
@TaxRateGuid uniqueidentifier,
@StoreGuid uniqueidentifier,
@GeoZoneGuid uniqueidentifier,
@TaxClassGuid uniqueidentifier,
@Priority int,
@Rate decimal(18, 4),
@Description nvarchar(255),
@Created datetime,
@CreatedBy uniqueidentifier,
@LastModified datetime,
@ModifiedBy uniqueidentifier,
@LogTime datetime

	
AS
INSERT INTO 	[dbo].[ws_TaxRateHistory] 
(
				[Guid],
				[TaxRateGuid],
				[StoreGuid],
				[GeoZoneGuid],
				[TaxClassGuid],
				[Priority],
				[Rate],
				[Description],
				[Created],
				[CreatedBy],
				[LastModified],
				[ModifiedBy],
				[LogTime]
) 

VALUES 
(
				@Guid,
				@TaxRateGuid,
				@StoreGuid,
				@GeoZoneGuid,
				@TaxClassGuid,
				@Priority,
				@Rate,
				@Description,
				@Created,
				@CreatedBy,
				@LastModified,
				@ModifiedBy,
				@LogTime
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_Store_Update]    Script Date: 03/27/2007 17:35:38 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Store_Update]

/*
Author:   			Joe Audette
Created: 			2/19/2007
Last Modified: 		2/19/2007
*/
	
@Guid uniqueidentifier, 
@Name nvarchar(255), 
@Description ntext, 
@DefaultCurrencyID uniqueidentifier, 
@AllowOtherCurrencies bit, 
@DefaultLanguageID uniqueidentifier, 
@AllowOtherLanguages bit, 
@OwnerName nvarchar(255), 
@OwnerEmail nvarchar(100), 
@SalesEmail nvarchar(100), 
@SupportEmail nvarchar(100), 
@EmailFrom nvarchar(100), 
@OrderBCCEmail nvarchar(100), 
@Phone nvarchar(32), 
@Fax nvarchar(32), 
@Address nvarchar(255), 
@City nvarchar(255), 
@ZoneGuid uniqueidentifier, 
@PostalCode nvarchar(50), 
@CountryGuid uniqueidentifier, 
@IsClosed bit, 
@ClosedMessage ntext, 
@ShowCategoryCounts bit, 
@DefaultCountry uniqueidentifier, 
@StoreConfigRoles ntext, 
@ProductEditRoles ntext, 
@OfferEditRoles ntext, 
@TaxEditRoles ntext



AS

UPDATE 		[dbo].[ws_Store] 

SET
			
			[Name] = @Name,
			[Description] = @Description,
			[DefaultCurrencyID] = @DefaultCurrencyID,
			[AllowOtherCurrencies] = @AllowOtherCurrencies,
			[DefaultLanguageID] = @DefaultLanguageID,
			[AllowOtherLanguages] = @AllowOtherLanguages,
			[OwnerName] = @OwnerName,
			[OwnerEmail] = @OwnerEmail,
			[SalesEmail] = @SalesEmail,
			[SupportEmail] = @SupportEmail,
			[EmailFrom] = @EmailFrom,
			[OrderBCCEmail] = @OrderBCCEmail,
			[Phone] = @Phone,
			[Fax] = @Fax,
			[Address] = @Address,
			[City] = @City,
			[ZoneGuid] = @ZoneGuid,
			[PostalCode] = @PostalCode,
			[CountryGuid] = @CountryGuid,
			[IsClosed] = @IsClosed,
			[ClosedMessage] = @ClosedMessage,
			[ShowCategoryCounts] = @ShowCategoryCounts,
			[DefaultCountry] = @DefaultCountry,
			[StoreConfigRoles] = @StoreConfigRoles,
			[ProductEditRoles] = @ProductEditRoles,
			[OfferEditRoles] = @OfferEditRoles,
			[TaxEditRoles] = @TaxEditRoles
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Store_Insert]    Script Date: 03/27/2007 17:35:34 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Store_Insert]

/*
Author:   			Joe Audette
Created: 			2/19/2007
Last Modified: 		2/19/2007
*/

@Guid uniqueidentifier,
@SiteGuid uniqueidentifier,
@ModuleID int,
@Name nvarchar(255),
@Description ntext,
@DefaultCurrencyID uniqueidentifier,
@AllowOtherCurrencies bit,
@DefaultLanguageID uniqueidentifier,
@AllowOtherLanguages bit,
@OwnerName nvarchar(255),
@OwnerEmail nvarchar(100),
@SalesEmail nvarchar(100),
@SupportEmail nvarchar(100),
@EmailFrom nvarchar(100),
@OrderBCCEmail nvarchar(100),
@Phone nvarchar(32),
@Fax nvarchar(32),
@Address nvarchar(255),
@City nvarchar(255),
@ZoneGuid uniqueidentifier,
@PostalCode nvarchar(50),
@CountryGuid uniqueidentifier,
@IsClosed bit,
@ClosedMessage ntext,
@ShowCategoryCounts bit,
@DefaultCountry uniqueidentifier,
@StoreConfigRoles ntext,
@ProductEditRoles ntext,
@OfferEditRoles ntext,
@TaxEditRoles ntext,
@Created datetime,
@CreatedBy uniqueidentifier

	
AS

INSERT INTO 	[dbo].[ws_Store] 
(
				[Guid],
				[SiteGuid],
				[ModuleID],
				[Name],
				[Description],
				[DefaultCurrencyID],
				[AllowOtherCurrencies],
				[DefaultLanguageID],
				[AllowOtherLanguages],
				[OwnerName],
				[OwnerEmail],
				[SalesEmail],
				[SupportEmail],
				[EmailFrom],
				[OrderBCCEmail],
				[Phone],
				[Fax],
				[Address],
				[City],
				[ZoneGuid],
				[PostalCode],
				[CountryGuid],
				[IsClosed],
				[ClosedMessage],
				[ShowCategoryCounts],
				[DefaultCountry],
				[StoreConfigRoles],
				[ProductEditRoles],
				[OfferEditRoles],
				[TaxEditRoles],
				[Created],
				[CreatedBy]
) 

VALUES 
(
				@Guid,
				@SiteGuid,
				@ModuleID,
				@Name,
				@Description,
				@DefaultCurrencyID,
				@AllowOtherCurrencies,
				@DefaultLanguageID,
				@AllowOtherLanguages,
				@OwnerName,
				@OwnerEmail,
				@SalesEmail,
				@SupportEmail,
				@EmailFrom,
				@OrderBCCEmail,
				@Phone,
				@Fax,
				@Address,
				@City,
				@ZoneGuid,
				@PostalCode,
				@CountryGuid,
				@IsClosed,
				@ClosedMessage,
				@ShowCategoryCounts,
				@DefaultCountry,
				@StoreConfigRoles,
				@ProductEditRoles,
				@OfferEditRoles,
				@TaxEditRoles,
				@Created,
				@CreatedBy
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_Store_SelectOneByModuleID]    Script Date: 03/27/2007 17:35:35 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Store_SelectOneByModuleID]

/*
Author:   			Joe Audette
Created: 			2/19/2007
Last Modified: 		2/19/2007
*/

@ModuleID int

AS


SELECT
		[Guid],
		[SiteGuid],
		[ModuleID],
		[Name],
		[Description],
		[DefaultCurrencyID],
		[AllowOtherCurrencies],
		[DefaultLanguageID],
		[AllowOtherLanguages],
		[OwnerName],
		[OwnerEmail],
		[SalesEmail],
		[SupportEmail],
		[EmailFrom],
		[OrderBCCEmail],
		[Phone],
		[Fax],
		[Address],
		[City],
		[ZoneGuid],
		[PostalCode],
		[CountryGuid],
		[IsClosed],
		[ClosedMessage],
		[ShowCategoryCounts],
		[DefaultCountry],
		[StoreConfigRoles],
		[ProductEditRoles],
		[OfferEditRoles],
		[TaxEditRoles],
		[Created],
		[CreatedBy]
		
FROM
		[dbo].[ws_Store]
		
WHERE
		[ModuleID] = @ModuleID
GO
/****** Object:  StoredProcedure [dbo].[ws_Store_SelectOne]    Script Date: 03/27/2007 17:35:35 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Store_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/19/2007
Last Modified: 		2/19/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[SiteGuid],
		[ModuleID],
		[Name],
		[Description],
		[DefaultCurrencyID],
		[AllowOtherCurrencies],
		[DefaultLanguageID],
		[AllowOtherLanguages],
		[OwnerName],
		[OwnerEmail],
		[SalesEmail],
		[SupportEmail],
		[EmailFrom],
		[OrderBCCEmail],
		[Phone],
		[Fax],
		[Address],
		[City],
		[ZoneGuid],
		[PostalCode],
		[CountryGuid],
		[IsClosed],
		[ClosedMessage],
		[ShowCategoryCounts],
		[DefaultCountry],
		[StoreConfigRoles],
		[ProductEditRoles],
		[OfferEditRoles],
		[TaxEditRoles],
		[Created],
		[CreatedBy]
		
FROM
		[dbo].[ws_Store]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Store_Delete]    Script Date: 03/27/2007 17:35:30 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Store_Delete]

/*
Author:   			Joe Audette
Created: 			2/19/2007
Last Modified: 		2/19/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_Store]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderOfferProduct_Update]    Script Date: 03/27/2007 17:35:02 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderOfferProduct_Update]

/*
Author:   			Joe Audette
Created: 			3/18/2007
Last Modified: 		3/18/2007
*/
	
@Guid uniqueidentifier, 
@OrderGuid uniqueidentifier, 
@OfferGuid uniqueidentifier, 
@ProductGuid uniqueidentifier, 
@FullfillType tinyint, 
@FullfillTermsGuid uniqueidentifier


AS

UPDATE 		[dbo].[ws_OrderOfferProduct] 

SET
			[OrderGuid] = @OrderGuid,
			[OfferGuid] = @OfferGuid,
			[ProductGuid] = @ProductGuid,
			[FullfillType] = @FullfillType,
			[FullfillTermsGuid] = @FullfillTermsGuid
			
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderOfferProduct_SelectOne]    Script Date: 03/27/2007 17:35:01 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderOfferProduct_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/18/2007
Last Modified: 		3/18/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[OrderGuid],
		[OfferGuid],
		[ProductGuid],
		[FullfillType],
		[FullfillTermsGuid],
		[Created]
		
FROM
		[dbo].[ws_OrderOfferProduct]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderOfferProduct_Insert]    Script Date: 03/27/2007 17:35:00 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderOfferProduct_Insert]

/*
Author:   			Joe Audette
Created: 			3/18/2007
Last Modified: 		3/18/2007
*/

@Guid uniqueidentifier,
@OrderGuid uniqueidentifier,
@OfferGuid uniqueidentifier,
@ProductGuid uniqueidentifier,
@FullfillType tinyint,
@FullfillTermsGuid uniqueidentifier,
@Created datetime

	
AS

INSERT INTO 	[dbo].[ws_OrderOfferProduct] 
(
				[Guid],
				[OrderGuid],
				[OfferGuid],
				[ProductGuid],
				[FullfillType],
				[FullfillTermsGuid],
				[Created]
) 

VALUES 
(
				@Guid,
				@OrderGuid,
				@OfferGuid,
				@ProductGuid,
				@FullfillType,
				@FullfillTermsGuid,
				@Created
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderOfferProduct_Delete]    Script Date: 03/27/2007 17:34:59 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderOfferProduct_Delete]

/*
Author:   			Joe Audette
Created: 			3/18/2007
Last Modified: 		3/18/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_OrderOfferProduct]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_ProductHistory_Insert]    Script Date: 03/27/2007 17:35:29 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_ProductHistory_Insert]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/5/2007
*/

@Guid uniqueidentifier,
@ProductGuid uniqueidentifier,
@StoreGuid uniqueidentifier,
@TaxClassGuid uniqueidentifier,
@Sku nvarchar(255),
@Status tinyint,
@FullfillmentType tinyint,
@Weight decimal(7, 2),
@QuantityOnHand int,
@ImageFileName nvarchar(255),
@ImageFileBytes image,
@Created datetime,
@CreatedBy uniqueidentifier,
@LastModified datetime,
@LastModifedBy uniqueidentifier,
@LogTime datetime

	
AS
INSERT INTO 	[dbo].[ws_ProductHistory] 
(
				[Guid],
				[ProductGuid],
				[StoreGuid],
				[TaxClassGuid],
				[Sku],
				[Status],
				[FullfillmentType],
				[Weight],
				[QuantityOnHand],
				[ImageFileName],
				[ImageFileBytes],
				[Created],
				[CreatedBy],
				[LastModified],
				[LastModifedBy],
				[LogTime]
) 

VALUES 
(
				@Guid,
				@ProductGuid,
				@StoreGuid,
				@TaxClassGuid,
				@Sku,
				@Status,
				@FullfillmentType,
				@Weight,
				@QuantityOnHand,
				@ImageFileName,
				@ImageFileBytes,
				@Created,
				@CreatedBy,
				@LastModified,
				@LastModifedBy,
				@LogTime
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferPriceHistory_Insert]    Script Date: 03/27/2007 17:34:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferPriceHistory_Insert]

/*
Author:   			Joe Audette
Created: 			3/3/2007
Last Modified: 		3/3/2007
*/

@Guid uniqueidentifier,
@PriceGuid uniqueidentifier,
@OfferGuid uniqueidentifier,
@CurrencyGuid uniqueidentifier,
@Price decimal(15, 4),
@Created datetime,
@CreatedBy uniqueidentifier,
@CreatedFromIP nvarchar(255),
@LastModifed datetime,
@LastModifiedBy uniqueidentifier,
@ModifiedFromIP nvarchar(255),
@LogTime datetime

	
AS
INSERT INTO 	[dbo].[ws_OfferPriceHistory] 
(
				[Guid],
				[PriceGuid],
				[OfferGuid],
				[CurrencyGuid],
				[Price],
				[Created],
				[CreatedBy],
				[CreatedFromIP],
				[LastModifed],
				[LastModifiedBy],
				[ModifiedFromIP],
				[LogTime]
) 

VALUES 
(
				@Guid,
				@PriceGuid,
				@OfferGuid,
				@CurrencyGuid,
				@Price,
				@Created,
				@CreatedBy,
				@CreatedFromIP,
				@LastModifed,
				@LastModifiedBy,
				@ModifiedFromIP,
				@LogTime
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_Order_Update]    Script Date: 03/27/2007 17:34:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Order_Update]

/*
Author:   			Joe Audette
Created: 			3/17/2007
Last Modified: 		3/25/2007
*/
	
@OrderGuid uniqueidentifier, 
@UserGuid uniqueidentifier, 
@CustomerName nvarchar(255), 
@CustomerCompany nvarchar(255), 
@CustomerAddressLine1 nvarchar(255), 
@CustomerAddressLine2 nvarchar(255), 
@CustomerSuburb nvarchar(255), 
@CustomerCity nvarchar(255), 
@CustomerPostalCode nvarchar(20), 
@CustomerState nvarchar(255), 
@CustomerCountry nvarchar(255), 
@CustomerTelephoneDay nvarchar(32), 
@CustomerTelephoneNight nvarchar(32), 
@CustomerEmail nvarchar(96), 
@CustomerEmailVerified bit, 
@DeliveryName nvarchar(255), 
@DeliveryCompany nvarchar(255), 
@DeliveryAddress1 nvarchar(255), 
@DeliveryAddress2 nvarchar(255), 
@DeliverySuburb nvarchar(255), 
@DeliveryCity nvarchar(255), 
@DeliveryPostalCode nvarchar(20), 
@DeliveryState nvarchar(255), 
@DeliveryCountry nvarchar(255), 
@BillingName nvarchar(255), 
@BillingCompany nvarchar(255), 
@BillingAddress1 nvarchar(255), 
@BillingAddress2 nvarchar(255), 
@BillingSuburb nvarchar(255), 
@BillingCity nvarchar(255), 
@BillingPostalCode nvarchar(20), 
@BillingState nvarchar(255), 
@BillingCountry nvarchar(255), 
@CardTypeGuid uniqueidentifier, 
@CardOwner nvarchar(100), 
@CardNumber nvarchar(255), 
@CardExpires nvarchar(6), 
@CardSecurityCode nvarchar(50), 
@CurrencyGuid uniqueidentifier, 
@CurrencyValue decimal(13, 8), 
@SubTotal decimal(15, 4), 
@TaxTotal decimal(15, 4), 
@ShippingTotal decimal(15, 4),
@OrderTotal decimal(15, 4), 
@Completed datetime, 
@CompletedFromIP nvarchar(255), 
@LastModified datetime, 
@LastUserActivity datetime, 
@StatusGuid uniqueidentifier, 
@GatewayTransID nvarchar(255), 
@GatewayRawResponse ntext, 
@GatewayAuthCode nvarchar(50), 
@TaxZoneGuid uniqueidentifier 


AS

UPDATE 		[dbo].[ws_Order] 

SET

			
			[UserGuid] = @UserGuid,
			[CustomerName] = @CustomerName,
			[CustomerCompany] = @CustomerCompany,
			[CustomerAddressLine1] = @CustomerAddressLine1,
			[CustomerAddressLine2] = @CustomerAddressLine2,
			[CustomerSuburb] = @CustomerSuburb,
			[CustomerCity] = @CustomerCity,
			[CustomerPostalCode] = @CustomerPostalCode,
			[CustomerState] = @CustomerState,
			[CustomerCountry] = @CustomerCountry,
			[CustomerTelephoneDay] = @CustomerTelephoneDay,
			[CustomerTelephoneNight] = @CustomerTelephoneNight,
			[CustomerEmail] = @CustomerEmail,
			[CustomerEmailVerified] = @CustomerEmailVerified,
			[DeliveryName] = @DeliveryName,
			[DeliveryCompany] = @DeliveryCompany,
			[DeliveryAddress1] = @DeliveryAddress1,
			[DeliveryAddress2] = @DeliveryAddress2,
			[DeliverySuburb] = @DeliverySuburb,
			[DeliveryCity] = @DeliveryCity,
			[DeliveryPostalCode] = @DeliveryPostalCode,
			[DeliveryState] = @DeliveryState,
			[DeliveryCountry] = @DeliveryCountry,
			[BillingName] = @BillingName,
			[BillingCompany] = @BillingCompany,
			[BillingAddress1] = @BillingAddress1,
			[BillingAddress2] = @BillingAddress2,
			[BillingSuburb] = @BillingSuburb,
			[BillingCity] = @BillingCity,
			[BillingPostalCode] = @BillingPostalCode,
			[BillingState] = @BillingState,
			[BillingCountry] = @BillingCountry,
			[CardTypeGuid] = @CardTypeGuid,
			[CardOwner] = @CardOwner,
			[CardNumber] = @CardNumber,
			[CardExpires] = @CardExpires,
			[CardSecurityCode] = @CardSecurityCode,
			[CurrencyGuid] = @CurrencyGuid,
			[CurrencyValue] = @CurrencyValue,
			[SubTotal] = @SubTotal,
			[TaxTotal] = @TaxTotal,
			[ShippingTotal] = @ShippingTotal,
			[OrderTotal] = @OrderTotal,
			[Completed] = @Completed,
			[CompletedFromIP] = @CompletedFromIP,
			[LastModified] = @LastModified,
			[LastUserActivity] = @LastUserActivity,
			[StatusGuid] = @StatusGuid,
			[GatewayTransID] = @GatewayTransID,
			[GatewayRawResponse] = @GatewayRawResponse,
			[GatewayAuthCode] = @GatewayAuthCode,
			[TaxZoneGuid] = @TaxZoneGuid
			
WHERE
			[OrderGuid] = @OrderGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_Order_Insert]    Script Date: 03/27/2007 17:34:46 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Order_Insert]

/*
Author:   			Joe Audette
Created: 			3/17/2007
Last Modified: 		3/25/2007
*/

@OrderGuid uniqueidentifier,
@OrderNo int,
@StoreGuid uniqueidentifier,
@UserGuid uniqueidentifier,
@CustomerName nvarchar(255),
@CustomerCompany nvarchar(255),
@CustomerAddressLine1 nvarchar(255),
@CustomerAddressLine2 nvarchar(255),
@CustomerSuburb nvarchar(255),
@CustomerCity nvarchar(255),
@CustomerPostalCode nvarchar(20),
@CustomerState nvarchar(255),
@CustomerCountry nvarchar(255),
@CustomerTelephoneDay nvarchar(32),
@CustomerTelephoneNight nvarchar(32),
@CustomerEmail nvarchar(96),
@CustomerEmailVerified bit,
@DeliveryName nvarchar(255),
@DeliveryCompany nvarchar(255),
@DeliveryAddress1 nvarchar(255),
@DeliveryAddress2 nvarchar(255),
@DeliverySuburb nvarchar(255),
@DeliveryCity nvarchar(255),
@DeliveryPostalCode nvarchar(20),
@DeliveryState nvarchar(255),
@DeliveryCountry nvarchar(255),
@BillingName nvarchar(255),
@BillingCompany nvarchar(255),
@BillingAddress1 nvarchar(255),
@BillingAddress2 nvarchar(255),
@BillingSuburb nvarchar(255),
@BillingCity nvarchar(255),
@BillingPostalCode nvarchar(20),
@BillingState nvarchar(255),
@BillingCountry nvarchar(255),
@CardTypeGuid uniqueidentifier,
@CardOwner nvarchar(100),
@CardNumber nvarchar(255),
@CardExpires nvarchar(6),
@CardSecurityCode nvarchar(50),
@CurrencyGuid uniqueidentifier,
@CurrencyValue decimal(13, 8),
@SubTotal decimal(15, 4),
@TaxTotal decimal(15, 4),
@ShippingTotal decimal(15, 4),
@OrderTotal decimal(15, 4),
@Created datetime,
@CreatedFromIP nvarchar(255),
@Completed datetime,
@CompletedFromIP nvarchar(255),
@LastModified datetime,
@LastUserActivity datetime,
@StatusGuid uniqueidentifier,
@GatewayTransID nvarchar(255),
@GatewayRawResponse ntext,
@GatewayAuthCode nvarchar(50),
@TaxZoneGuid uniqueidentifier

	
AS

INSERT INTO 	[dbo].[ws_Order] 
(
				[OrderGuid],
				--[OrderNo],
				[StoreGuid],
				[UserGuid],
				[CustomerName],
				[CustomerCompany],
				[CustomerAddressLine1],
				[CustomerAddressLine2],
				[CustomerSuburb],
				[CustomerCity],
				[CustomerPostalCode],
				[CustomerState],
				[CustomerCountry],
				[CustomerTelephoneDay],
				[CustomerTelephoneNight],
				[CustomerEmail],
				[CustomerEmailVerified],
				[DeliveryName],
				[DeliveryCompany],
				[DeliveryAddress1],
				[DeliveryAddress2],
				[DeliverySuburb],
				[DeliveryCity],
				[DeliveryPostalCode],
				[DeliveryState],
				[DeliveryCountry],
				[BillingName],
				[BillingCompany],
				[BillingAddress1],
				[BillingAddress2],
				[BillingSuburb],
				[BillingCity],
				[BillingPostalCode],
				[BillingState],
				[BillingCountry],
				[CardTypeGuid],
				[CardOwner],
				[CardNumber],
				[CardExpires],
				[CardSecurityCode],
				[CurrencyGuid],
				[CurrencyValue],
				[SubTotal],
				[TaxTotal],
				[ShippingTotal],
				[OrderTotal],
				[Created],
				[CreatedFromIP],
				[Completed],
				[CompletedFromIP],
				[LastModified],
				[LastUserActivity],
				[StatusGuid],
				[GatewayTransID],
				[GatewayRawResponse],
				[GatewayAuthCode],
				[TaxZoneGuid]
) 

VALUES 
(
				@OrderGuid,
				-- @OrderNo,
				@StoreGuid,
				@UserGuid,
				@CustomerName,
				@CustomerCompany,
				@CustomerAddressLine1,
				@CustomerAddressLine2,
				@CustomerSuburb,
				@CustomerCity,
				@CustomerPostalCode,
				@CustomerState,
				@CustomerCountry,
				@CustomerTelephoneDay,
				@CustomerTelephoneNight,
				@CustomerEmail,
				@CustomerEmailVerified,
				@DeliveryName,
				@DeliveryCompany,
				@DeliveryAddress1,
				@DeliveryAddress2,
				@DeliverySuburb,
				@DeliveryCity,
				@DeliveryPostalCode,
				@DeliveryState,
				@DeliveryCountry,
				@BillingName,
				@BillingCompany,
				@BillingAddress1,
				@BillingAddress2,
				@BillingSuburb,
				@BillingCity,
				@BillingPostalCode,
				@BillingState,
				@BillingCountry,
				@CardTypeGuid,
				@CardOwner,
				@CardNumber,
				@CardExpires,
				@CardSecurityCode,
				@CurrencyGuid,
				@CurrencyValue,
				@SubTotal,
				@TaxTotal,
				@ShippingTotal,
				@OrderTotal,
				@Created,
				@CreatedFromIP,
				@Completed,
				@CompletedFromIP,
				@LastModified,
				@LastUserActivity,
				@StatusGuid,
				@GatewayTransID,
				@GatewayRawResponse,
				@GatewayAuthCode,
				@TaxZoneGuid
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_Order_SelectOne]    Script Date: 03/27/2007 17:34:48 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Order_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/17/2007
Last Modified: 		3/25/2007
*/

@OrderGuid uniqueidentifier

AS


SELECT
		[OrderGuid],
		[OrderNo],
		[StoreGuid],
		[UserGuid],
		[CustomerName],
		[CustomerCompany],
		[CustomerAddressLine1],
		[CustomerAddressLine2],
		[CustomerSuburb],
		[CustomerCity],
		[CustomerPostalCode],
		[CustomerState],
		[CustomerCountry],
		[CustomerTelephoneDay],
		[CustomerTelephoneNight],
		[CustomerEmail],
		[CustomerEmailVerified],
		[DeliveryName],
		[DeliveryCompany],
		[DeliveryAddress1],
		[DeliveryAddress2],
		[DeliverySuburb],
		[DeliveryCity],
		[DeliveryPostalCode],
		[DeliveryState],
		[DeliveryCountry],
		[BillingName],
		[BillingCompany],
		[BillingAddress1],
		[BillingAddress2],
		[BillingSuburb],
		[BillingCity],
		[BillingPostalCode],
		[BillingState],
		[BillingCountry],
		[CardTypeGuid],
		[CardOwner],
		[CardNumber],
		[CardExpires],
		[CardSecurityCode],
		[CurrencyGuid],
		[CurrencyValue],
		[SubTotal],
		[TaxTotal],
		[ShippingTotal],
		[OrderTotal],
		[Created],
		[CreatedFromIP],
		[Completed],
		[CompletedFromIP],
		[LastModified],
		[LastUserActivity],
		[StatusGuid],
		[GatewayTransID],
		[GatewayRawResponse],
		[GatewayAuthCode],
		[TaxZoneGuid]
		
FROM
		[dbo].[ws_Order]
		
WHERE
		[OrderGuid] = @OrderGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoCountry_Update]    Script Date: 03/27/2007 17:33:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoCountry_Update]

/*
Author:   			Joe Audette
Created: 			2/16/2007
Last Modified: 		2/16/2007
*/
	
@Guid uniqueidentifier, 
@Name nvarchar(255), 
@ISOCode2 nchar(2), 
@ISOCode3 nchar(3) 


AS

UPDATE 		[dbo].[ws_GeoCountry] 

SET
			[Name] = @Name,
			[ISOCode2] = @ISOCode2,
			[ISOCode3] = @ISOCode3
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoCountry_Delete]    Script Date: 03/27/2007 17:33:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoCountry_Delete]

/*
Author:   			Joe Audette
Created: 			2/16/2007
Last Modified: 		2/16/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_GeoCountry]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoCountry_SelectOne]    Script Date: 03/27/2007 17:33:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoCountry_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/16/2007
Last Modified: 		2/16/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[Name],
		[ISOCode2],
		[ISOCode3]
		
FROM
		[dbo].[ws_GeoCountry]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoCountry_SelectAll]    Script Date: 03/27/2007 17:33:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoCountry_SelectAll]

/*
Author:   			Joe Audette
Created: 			2/16/2007
Last Modified: 		2/16/2007
*/

AS


SELECT
		[Guid],
		[Name],
		[ISOCode2],
		[ISOCode3]
		
FROM
		[dbo].[ws_GeoCountry]

ORDER BY [Name]
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoCountry_Insert]    Script Date: 03/27/2007 17:33:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoCountry_Insert]

/*
Author:   			Joe Audette
Created: 			2/16/2007
Last Modified: 		2/16/2007
*/

@Guid uniqueidentifier,
@Name nvarchar(255),
@ISOCode2 nchar(2),
@ISOCode3 nchar(3)

	
AS

INSERT INTO 	[dbo].[ws_GeoCountry] 
(
				[Guid],
				[Name],
				[ISOCode2],
				[ISOCode3]
) 

VALUES 
(
				@Guid,
				@Name,
				@ISOCode2,
				@ISOCode3
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoZone_SelectOne]    Script Date: 03/27/2007 17:33:16 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoZone_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/16/2007
Last Modified: 		2/16/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[CountryGuid],
		[Name],
		[Code]
		
FROM
		[dbo].[ws_GeoZone]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoZone_Delete]    Script Date: 03/27/2007 17:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoZone_Delete]

/*
Author:   			Joe Audette
Created: 			2/16/2007
Last Modified: 		2/16/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_GeoZone]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoZone_Update]    Script Date: 03/27/2007 17:33:21 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoZone_Update]

/*
Author:   			Joe Audette
Created: 			2/16/2007
Last Modified: 		2/16/2007
*/
	
@Guid uniqueidentifier, 
@CountryGuid uniqueidentifier, 
@Name nvarchar(255), 
@Code nvarchar(255) 


AS

UPDATE 		[dbo].[ws_GeoZone] 

SET
			[CountryGuid] = @CountryGuid,
			[Name] = @Name,
			[Code] = @Code
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoZone_Insert]    Script Date: 03/27/2007 17:33:15 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoZone_Insert]

/*
Author:   			Joe Audette
Created: 			2/16/2007
Last Modified: 		2/16/2007
*/

@Guid uniqueidentifier,
@CountryGuid uniqueidentifier,
@Name nvarchar(255),
@Code nvarchar(255)

	
AS

INSERT INTO 	[dbo].[ws_GeoZone] 
(
				[Guid],
				[CountryGuid],
				[Name],
				[Code]
) 

VALUES 
(
				@Guid,
				@CountryGuid,
				@Name,
				@Code
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_GeoZone_SelectByCountry]    Script Date: 03/27/2007 17:33:15 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_GeoZone_SelectByCountry]

/*
Author:   			Joe Audette
Created: 			2/16/2007
Last Modified: 		2/16/2007
*/

@CountryGuid uniqueidentifier

AS


SELECT
		[Guid],
		[CountryGuid],
		[Name],
		[Code]
		
FROM
		[dbo].[ws_GeoZone]

WHERE CountryGuid = @CountryGuid

ORDER BY [Name]
GO
/****** Object:  StoredProcedure [dbo].[ws_Language_Delete]    Script Date: 03/27/2007 17:33:22 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_Language_Delete]

/*
Author:   			Joe Audette
Created: 			2/17/2007
Last Modified: 		2/17/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_Language]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Language_SelectOne]    Script Date: 03/27/2007 17:33:24 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_Language_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/17/2007
Last Modified: 		2/17/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[Name],
		[Code],
		[Sort]
		
FROM
		[dbo].[ws_Language]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Language_SelectAll]    Script Date: 03/27/2007 17:33:24 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_Language_SelectAll]

/*
Author:   			Joe Audette
Created: 			2/17/2007
Last Modified: 		2/17/2007
*/

AS


SELECT
		[Guid],
		[Name],
		[Code],
		[Sort]
		
FROM
		[dbo].[ws_Language]
GO
/****** Object:  StoredProcedure [dbo].[ws_Language_Insert]    Script Date: 03/27/2007 17:33:23 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_Language_Insert]

/*
Author:   			Joe Audette
Created: 			2/17/2007
Last Modified: 		2/17/2007
*/

@Guid uniqueidentifier,
@Name nvarchar(255),
@Code nchar(2),
@Sort int

	
AS

INSERT INTO 	[dbo].[ws_Language] 
(
				[Guid],
				[Name],
				[Code],
				[Sort]
) 

VALUES 
(
				@Guid,
				@Name,
				@Code,
				@Sort
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_Language_Update]    Script Date: 03/27/2007 17:33:26 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_Language_Update]

/*
Author:   			Joe Audette
Created: 			2/17/2007
Last Modified: 		2/17/2007
*/
	
@Guid uniqueidentifier, 
@Name nvarchar(255), 
@Code nchar(2), 
@Sort int 


AS

UPDATE 		[dbo].[ws_Language] 

SET
			[Name] = @Name,
			[Code] = @Code,
			[Sort] = @Sort
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferProduct_Insert]    Script Date: 03/27/2007 17:34:24 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferProduct_Insert]

/*
Author:   			Joe Audette
Created: 			3/2/2007
Last Modified: 		3/2/2007
*/

@Guid uniqueidentifier,
@OfferGuid uniqueidentifier,
@ProductGuid uniqueidentifier,
@FullfillType tinyint,
@FullFillTermsGuid uniqueidentifier,
@Quantity int,
@SortOrder int,
@Created datetime,
@CreatedBy uniqueidentifier,
@CreatedFromIP nvarchar(255),
@LastModified datetime,
@LastModifiedBy uniqueidentifier,
@LastModifiedFromIP nvarchar(255)

	
AS
INSERT INTO 	[dbo].[ws_OfferProduct] 
(
				[Guid],
				[OfferGuid],
				[ProductGuid],
				[FullfillType],
				[FullFillTermsGuid],
				[Quantity],
				[SortOrder],
				[IsDeleted],
				[Created],
				[CreatedBy],
				[CreatedFromIP],
				[LastModified],
				[LastModifiedBy],
				[LastModifiedFromIP]
) 

VALUES 
(
				@Guid,
				@OfferGuid,
				@ProductGuid,
				@FullfillType,
				@FullFillTermsGuid,
				@Quantity,
				@SortOrder,
				0,
				@Created,
				@CreatedBy,
				@CreatedFromIP,
				@LastModified,
				@LastModifiedBy,
				@LastModifiedFromIP
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferProduct_SelectOne]    Script Date: 03/27/2007 17:34:28 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferProduct_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/2/2007
Last Modified: 		3/2/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[OfferGuid],
		[ProductGuid],
		[FullfillType],
		[FullFillTermsGuid],
		[Quantity],
		[SortOrder],
		[IsDeleted],
		[Created],
		[CreatedBy],
		[CreatedFromIP],
		[DeletedBy],
		[DeletedFromIP],
		[DeletedTime],
		[LastModified],
		[LastModifiedBy],
		[LastModifiedFromIP]
		
FROM
		[dbo].[ws_OfferProduct]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferProduct_Delete]    Script Date: 03/27/2007 17:34:15 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferProduct_Delete]

/*
Author:   			Joe Audette
Created: 			3/2/2007
Last Modified: 		3/2/2007
*/
	
@Guid uniqueidentifier, 
@DeletedBy uniqueidentifier, 
@DeletedFromIP nvarchar(255), 
@DeletedTime datetime



AS

UPDATE 		[dbo].[ws_OfferProduct] 

SET
			[IsDeleted] = 1,
			[DeletedBy] = @DeletedBy,
			[DeletedFromIP] = @DeletedFromIP,
			[DeletedTime] = @DeletedTime
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferProduct_Update]    Script Date: 03/27/2007 17:34:31 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferProduct_Update]

/*
Author:   			Joe Audette
Created: 			3/2/2007
Last Modified: 		3/2/2007
*/
	
@Guid uniqueidentifier,  
@FullfillType tinyint, 
@FullFillTermsGuid uniqueidentifier, 
@Quantity int, 
@SortOrder int, 
@LastModified datetime, 
@LastModifiedBy uniqueidentifier, 
@LastModifiedFromIP nvarchar(255) 


AS

UPDATE 		[dbo].[ws_OfferProduct] 

SET
			
			[FullfillType] = @FullfillType,
			[FullFillTermsGuid] = @FullFillTermsGuid,
			[Quantity] = @Quantity,
			[SortOrder] = @SortOrder,
			[LastModified] = @LastModified,
			[LastModifiedBy] = @LastModifiedBy,
			[LastModifiedFromIP] = @LastModifiedFromIP
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferProduct_DeleteByProduct]    Script Date: 03/27/2007 17:34:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferProduct_DeleteByProduct]

/*
Author:   			Joe Audette
Created: 			3/2/2007
Last Modified: 		3/2/2007
*/
	
@ProductGuid uniqueidentifier, 
@DeletedBy uniqueidentifier, 
@DeletedFromIP nvarchar(255), 
@DeletedTime datetime



AS
UPDATE 		[dbo].[ws_OfferProduct] 

SET
			[IsDeleted] = 1,
			[DeletedBy] = @DeletedBy,
			[DeletedFromIP] = @DeletedFromIP,
			[DeletedTime] = @DeletedTime
			
WHERE
			[ProductGuid] = @ProductGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxClass_Delete]    Script Date: 03/27/2007 17:35:39 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_TaxClass_Delete]

/*
Author:   			Joe Audette
Created: 			2/17/2007
Last Modified: 		2/17/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_TaxClass]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxClass_SelectOne]    Script Date: 03/27/2007 17:35:40 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_TaxClass_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/17/2007
Last Modified: 		2/17/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[StoreGuid],
		[Title],
		[Description],
		[LastModified],
		[Created]
		
FROM
		[dbo].[ws_TaxClass]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxClass_SelectByStore]    Script Date: 03/27/2007 17:35:40 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_TaxClass_SelectByStore]

/*
Author:   			Joe Audette
Created: 			2/17/2007
Last Modified: 		2/17/2007
*/

@StoreGuid uniqueidentifier

AS


SELECT
		[Guid],
		[StoreGuid],
		[Title],
		[Description],
		[LastModified],
		[Created]
		
FROM
		[dbo].[ws_TaxClass]

WHERE	[StoreGuid] = @StoreGuid

ORDER BY	[Title]
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxClass_Insert]    Script Date: 03/27/2007 17:35:39 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_TaxClass_Insert]

/*
Author:   			Joe Audette
Created: 			2/17/2007
Last Modified: 		2/17/2007
*/

@Guid uniqueidentifier,
@StoreGuid uniqueidentifier,
@Title nvarchar(255),
@Description ntext,
@LastModified datetime,
@Created datetime

	
AS

INSERT INTO 	[dbo].[ws_TaxClass] 
(
				[Guid],
				[StoreGuid],
				[Title],
				[Description],
				[LastModified],
				[Created]
) 

VALUES 
(
				@Guid,
				@StoreGuid,
				@Title,
				@Description,
				@LastModified,
				@Created
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_TaxClass_Update]    Script Date: 03/27/2007 17:35:43 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_TaxClass_Update]

/*
Author:   			Joe Audette
Created: 			2/17/2007
Last Modified: 		2/17/2007
*/
	
@Guid uniqueidentifier,  
@Title nvarchar(255), 
@Description ntext, 
@LastModified datetime, 
@Created datetime 


AS

UPDATE 		[dbo].[ws_TaxClass] 

SET
			[Title] = @Title,
			[Description] = @Description,
			[LastModified] = @LastModified,
			[Created] = @Created
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Cart_SelectOneByUser]    Script Date: 03/27/2007 17:31:56 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Cart_SelectOneByUser]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/11/2007
*/

@UserGuid uniqueidentifier

AS
SELECT	TOP 1
		[CartGuid],
		[StoreGuid],
		[UserGuid],
		[CurrencyGuid],
		[CurrencyValue],
		[SubTotal],
		[ShippingTotal],
		[TaxTotal],
		[OrderTotal],
		[Created],
		[CreatedFromIP],
		[LastModified],
		[LastUserActivity]
		
FROM
		[dbo].[ws_Cart]
		
WHERE
		[UserGuid] = @UserGuid

ORDER BY [LastModified] DESC
GO
/****** Object:  StoredProcedure [dbo].[ws_Cart_SelectOne]    Script Date: 03/27/2007 17:31:55 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Cart_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/11/2007
*/

@CartGuid uniqueidentifier

AS
SELECT
		[CartGuid],
		[StoreGuid],
		[UserGuid],
		[CurrencyGuid],
		[CurrencyValue],
		[SubTotal],
		[ShippingTotal],
		[TaxTotal],
		[OrderTotal],
		[Created],
		[CreatedFromIP],
		[LastModified],
		[LastUserActivity]
		
FROM
		[dbo].[ws_Cart]
		
WHERE
		[CartGuid] = @CartGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_Cart_Insert]    Script Date: 03/27/2007 17:31:55 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Cart_Insert]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/5/2007
*/

@CartGuid uniqueidentifier,
@StoreGuid uniqueidentifier,
@UserGuid uniqueidentifier,
@CurrencyGuid uniqueidentifier,
@CurrencyValue decimal(13, 8),
@SubTotal decimal(15, 4),
@ShippingTotal decimal(15, 4),
@TaxTotal decimal(15, 4),
@OrderTotal decimal(15, 4),
@Created datetime,
@CreatedFromIP nvarchar(255),
@LastModified datetime,
@LastUserActivity datetime

	
AS
INSERT INTO 	[dbo].[ws_Cart] 
(
				[CartGuid],
				[StoreGuid],
				[UserGuid],
				[CurrencyGuid],
				[CurrencyValue],
				[SubTotal],
				[ShippingTotal],
				[TaxTotal],
				[OrderTotal],
				[Created],
				[CreatedFromIP],
				[LastModified],
				[LastUserActivity]
) 

VALUES 
(
				@CartGuid,
				@StoreGuid,
				@UserGuid,
				@CurrencyGuid,
				@CurrencyValue,
				@SubTotal,
				@ShippingTotal,
				@TaxTotal,
				@OrderTotal,
				@Created,
				@CreatedFromIP,
				@LastModified,
				@LastUserActivity
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_Cart_Update]    Script Date: 03/27/2007 17:31:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Cart_Update]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/11/2007
*/
	
@CartGuid uniqueidentifier, 
@UserGuid uniqueidentifier, 
@CurrencyGuid uniqueidentifier, 
@CurrencyValue decimal(13, 8), 
@SubTotal decimal(15, 4), 
@ShippingTotal decimal(15, 4), 
@TaxTotal decimal(15, 4), 
@OrderTotal decimal(15, 4), 
@LastModified datetime, 
@LastUserActivity datetime 


AS
UPDATE 		[dbo].[ws_Cart] 

SET
			
			[UserGuid] = @UserGuid,
			[CurrencyGuid] = @CurrencyGuid,
			[CurrencyValue] = @CurrencyValue,
			[SubTotal] = @SubTotal,
			[ShippingTotal] = @ShippingTotal,
			[TaxTotal] = @TaxTotal,
			[OrderTotal] = @OrderTotal,
			[LastModified] = @LastModified,
			[LastUserActivity] = @LastUserActivity
			
WHERE
			[CartGuid] = @CartGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_CartOffers_Update]    Script Date: 03/27/2007 17:32:01 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CartOffers_Update]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/15/2007
*/
	
@ItemGuid uniqueidentifier, 
@OfferGuid uniqueidentifier, 
@PriceGuid uniqueidentifier, 
@CurrencyGuid uniqueidentifier, 
@OfferPrice decimal(15, 4), 
@AddedToCart datetime, 
@Quantity int,
@TaxClassGuid uniqueidentifier


AS
UPDATE 		[dbo].[ws_CartOffers] 

SET
			
			[OfferGuid] = @OfferGuid,
			[PriceGuid] = @PriceGuid,
			[CurrencyGuid] = @CurrencyGuid,
			[OfferPrice] = @OfferPrice,
			[AddedToCart] = @AddedToCart,
			[Quantity] = @Quantity,
			[TaxClassGuid] = @TaxClassGuid
			
WHERE
			[ItemGuid] = @ItemGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_CartOffers_Insert]    Script Date: 03/27/2007 17:31:59 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CartOffers_Insert]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/15/2007
*/

@ItemGuid uniqueidentifier,
@CartGuid uniqueidentifier,
@OfferGuid uniqueidentifier,
@PriceGuid uniqueidentifier,
@CurrencyGuid uniqueidentifier,
@OfferPrice decimal(15, 4),
@AddedToCart datetime,
@Quantity int,
@TaxClassGuid uniqueidentifier

	
AS
INSERT INTO 	[dbo].[ws_CartOffers] 
(
				[ItemGuid],
				[CartGuid],
				[OfferGuid],
				[PriceGuid],
				[CurrencyGuid],
				[OfferPrice],
				[AddedToCart],
				[Quantity],
				[TaxClassGuid]
) 

VALUES 
(
				@ItemGuid,
				@CartGuid,
				@OfferGuid,
				@PriceGuid,
				@CurrencyGuid,
				@OfferPrice,
				@AddedToCart,
				@Quantity,
				@TaxClassGuid
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_CartOffers_DeleteByCart]    Script Date: 03/27/2007 17:31:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CartOffers_DeleteByCart]

/*
Author:   			Joe Audette
Created: 			3/27/2007
Last Modified: 		3/27/2007
*/

@CartGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_CartOffers]
WHERE
	[CartGuid] = @CartGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_CartOffers_SelectOne]    Script Date: 03/27/2007 17:32:00 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CartOffers_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/5/2007
Last Modified: 		3/15/2007
*/

@ItemGuid uniqueidentifier

AS
SELECT
		[ItemGuid],
		[CartGuid],
		[OfferGuid],
		[PriceGuid],
		[CurrencyGuid],
		[OfferPrice],
		[AddedToCart],
		[Quantity],
		[TaxClassGuid]
		
FROM
		[dbo].[ws_CartOffers]
		
WHERE
		[ItemGuid] = @ItemGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTerms_Insert]    Script Date: 03/27/2007 17:32:45 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTerms_Insert]

/*
Author:   			Joe Audette
Created: 			2/23/2007
Last Modified: 		2/23/2007
*/

@Guid uniqueidentifier,
@StoreGuid uniqueidentifier,
@DownloadsAllowed int,
@ExpireAfterDays int,
@CountAfterDownload bit,
@Created datetime,
@CreatedBy uniqueidentifier,
@CreatedFromIP nvarchar(255),
@LastModified datetime,
@LastModifedBy uniqueidentifier,
@LastModifedFromIPAddress nvarchar(255)

	
AS

INSERT INTO 	[dbo].[ws_FullfillDownloadTerms] 
(
				[Guid],
				[StoreGuid],
				[DownloadsAllowed],
				[ExpireAfterDays],
				[CountAfterDownload],
				[Created],
				[CreatedBy],
				[CreatedFromIP],
				[LastModified],
				[LastModifedBy],
				[LastModifedFromIPAddress]
) 

VALUES 
(
				@Guid,
				@StoreGuid,
				@DownloadsAllowed,
				@ExpireAfterDays,
				@CountAfterDownload,
				@Created,
				@CreatedBy,
				@CreatedFromIP,
				@LastModified,
				@LastModifedBy,
				@LastModifedFromIPAddress
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTerms_Update]    Script Date: 03/27/2007 17:32:50 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTerms_Update]

/*
Author:   			Joe Audette
Created: 			2/23/2007
Last Modified: 		2/23/2007
*/
	
@Guid uniqueidentifier, 
@DownloadsAllowed int, 
@ExpireAfterDays int, 
@CountAfterDownload bit, 
@LastModified datetime, 
@LastModifedBy uniqueidentifier, 
@LastModifedFromIPAddress nvarchar(255) 


AS

UPDATE 		[dbo].[ws_FullfillDownloadTerms] 

SET
			[DownloadsAllowed] = @DownloadsAllowed,
			[ExpireAfterDays] = @ExpireAfterDays,
			[CountAfterDownload] = @CountAfterDownload,
			[LastModified] = @LastModified,
			[LastModifedBy] = @LastModifedBy,
			[LastModifedFromIPAddress] = @LastModifedFromIPAddress
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTerms_Delete]    Script Date: 03/27/2007 17:32:43 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTerms_Delete]

/*
Author:   			Joe Audette
Created: 			2/23/2007
Last Modified: 		2/23/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_FullfillDownloadTerms]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferAvailability_Update]    Script Date: 03/27/2007 17:33:46 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferAvailability_Update]

/*
Author:   			Joe Audette
Created: 			3/1/2007
Last Modified: 		3/1/2007
*/
	
@Guid uniqueidentifier, 
@BeginUTC datetime, 
@EndUTC datetime, 
@RequiresOfferCode bit, 
@OfferCode nvarchar(50), 
@MaxAllowedPerCustomer int, 
@LastModified datetime, 
@LastModifedBy uniqueidentifier, 
@LastModifedFromIP nvarchar(255) 


AS

UPDATE 		[dbo].[ws_OfferAvailability] 

SET
			
			[BeginUTC] = @BeginUTC,
			[EndUTC] = @EndUTC,
			[RequiresOfferCode] = @RequiresOfferCode,
			[OfferCode] = @OfferCode,
			[MaxAllowedPerCustomer] = @MaxAllowedPerCustomer,
			[LastModified] = @LastModified,
			[LastModifedBy] = @LastModifedBy,
			[LastModifedFromIP] = @LastModifedFromIP
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferAvailability_Delete]    Script Date: 03/27/2007 17:33:38 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferAvailability_Delete]

/*
Author:   			Joe Audette
Created: 			3/1/2007
Last Modified: 		3/1/2007
*/
	
@Guid uniqueidentifier, 
@IsDeleted bit, 
@DeletedBy uniqueidentifier, 
@DeletedTime datetime, 
@DeletedFromIP nvarchar(255)


AS

UPDATE 		[dbo].[ws_OfferAvailability] 

SET
			
			[IsDeleted] = @IsDeleted,
			[DeletedBy] = @DeletedBy,
			[DeletedTime] = @DeletedTime,
			[DeletedFromIP] = @DeletedFromIP
			
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferAvailability_SelectOne]    Script Date: 03/27/2007 17:33:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferAvailability_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/1/2007
Last Modified: 		3/1/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[OfferGuid],
		[BeginUTC],
		[EndUTC],
		[RequiresOfferCode],
		[OfferCode],
		[MaxAllowedPerCustomer],
		[Created],
		[CreatedBy],
		[CreatedFromIP],
		[IsDeleted],
		[DeletedBy],
		[DeletedTime],
		[DeletedFromIP],
		[LastModified],
		[LastModifedBy],
		[LastModifedFromIP]
		
FROM
		[dbo].[ws_OfferAvailability]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferAvailability_SelectByOffer]    Script Date: 03/27/2007 17:33:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferAvailability_SelectByOffer]

/*
Author:   			Joe Audette
Created: 			3/1/2007
Last Modified: 		3/1/2007
*/

@OfferGuid uniqueidentifier

AS
SELECT
		[Guid],
		[OfferGuid],
		[BeginUTC],
		[EndUTC],
		[RequiresOfferCode],
		[OfferCode],
		[MaxAllowedPerCustomer],
		[Created],
		[CreatedBy],
		[CreatedFromIP],
		[IsDeleted],
		[DeletedBy],
		[DeletedTime],
		[DeletedFromIP],
		[LastModified],
		[LastModifedBy],
		[LastModifedFromIP]
		
FROM
		[dbo].[ws_OfferAvailability]
		
WHERE
		[OfferGuid] = @OfferGuid
		AND [IsDeleted] = 0

ORDER BY
		[BeginUTC]
GO
/****** Object:  StoredProcedure [dbo].[ws_OfferAvailability_Insert]    Script Date: 03/27/2007 17:33:41 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OfferAvailability_Insert]

/*
Author:   			Joe Audette
Created: 			3/1/2007
Last Modified: 		3/1/2007
*/

@Guid uniqueidentifier,
@OfferGuid uniqueidentifier,
@BeginUTC datetime,
@EndUTC datetime,
@RequiresOfferCode bit,
@OfferCode nvarchar(50),
@MaxAllowedPerCustomer int,
@Created datetime,
@CreatedBy uniqueidentifier,
@CreatedFromIP nvarchar(255),
@LastModified datetime,
@LastModifedBy uniqueidentifier,
@LastModifedFromIP nvarchar(255)

	
AS

INSERT INTO 	[dbo].[ws_OfferAvailability] 
(
				[Guid],
				[OfferGuid],
				[BeginUTC],
				[EndUTC],
				[RequiresOfferCode],
				[OfferCode],
				[MaxAllowedPerCustomer],
				[Created],
				[CreatedBy],
				[CreatedFromIP],
				[IsDeleted],
				[LastModified],
				[LastModifedBy],
				[LastModifedFromIP]
) 

VALUES 
(
				@Guid,
				@OfferGuid,
				@BeginUTC,
				@EndUTC,
				@RequiresOfferCode,
				@OfferCode,
				@MaxAllowedPerCustomer,
				@Created,
				@CreatedBy,
				@CreatedFromIP,
				0,
				@LastModified,
				@LastModifedBy,
				@LastModifedFromIP
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderOffers_Delete]    Script Date: 03/27/2007 17:35:03 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderOffers_Delete]

/*
Author:   			Joe Audette
Created: 			3/17/2007
Last Modified: 		3/17/2007
*/

@ItemGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_OrderOffers]
WHERE
	[ItemGuid] = @ItemGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderOffers_SelectOne]    Script Date: 03/27/2007 17:35:06 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderOffers_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/17/2007
Last Modified: 		3/17/2007
*/

@ItemGuid uniqueidentifier

AS


SELECT
		[ItemGuid],
		[OrderGuid],
		[OfferGuid],
		[PriceGuid],
		[CurrencyGuid],
		[TaxClassGuid],
		[OfferPrice],
		[AddedToCart],
		[Quantity]
		
FROM
		[dbo].[ws_OrderOffers]
		
WHERE
		[ItemGuid] = @ItemGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderOffers_Insert]    Script Date: 03/27/2007 17:35:05 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderOffers_Insert]

/*
Author:   			Joe Audette
Created: 			3/17/2007
Last Modified: 		3/17/2007
*/

@ItemGuid uniqueidentifier,
@OrderGuid uniqueidentifier,
@OfferGuid uniqueidentifier,
@PriceGuid uniqueidentifier,
@CurrencyGuid uniqueidentifier,
@TaxClassGuid uniqueidentifier,
@OfferPrice decimal(15, 4),
@AddedToCart datetime,
@Quantity int

	
AS

INSERT INTO 	[dbo].[ws_OrderOffers] 
(
				[ItemGuid],
				[OrderGuid],
				[OfferGuid],
				[PriceGuid],
				[CurrencyGuid],
				[TaxClassGuid],
				[OfferPrice],
				[AddedToCart],
				[Quantity]
) 

VALUES 
(
				@ItemGuid,
				@OrderGuid,
				@OfferGuid,
				@PriceGuid,
				@CurrencyGuid,
				@TaxClassGuid,
				@OfferPrice,
				@AddedToCart,
				@Quantity
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderOffers_SelectByOrder]    Script Date: 03/27/2007 17:35:05 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderOffers_SelectByOrder]

/*
Author:   			Joe Audette
Created: 			3/17/2007
Last Modified: 		3/17/2007
*/

@OrderGuid uniqueidentifier

AS


SELECT
		[ItemGuid],
		[OrderGuid],
		[OfferGuid],
		[PriceGuid],
		[CurrencyGuid],
		[TaxClassGuid],
		[OfferPrice],
		[AddedToCart],
		[Quantity]
		
FROM
		[dbo].[ws_OrderOffers]
		
WHERE
		[OrderGuid] = @OrderGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_OrderOffers_Update]    Script Date: 03/27/2007 17:35:07 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_OrderOffers_Update]

/*
Author:   			Joe Audette
Created: 			3/17/2007
Last Modified: 		3/17/2007
*/
	
@ItemGuid uniqueidentifier, 
@OrderGuid uniqueidentifier, 
@OfferGuid uniqueidentifier, 
@PriceGuid uniqueidentifier, 
@CurrencyGuid uniqueidentifier, 
@TaxClassGuid uniqueidentifier, 
@OfferPrice decimal(15, 4), 
@AddedToCart datetime, 
@Quantity int 


AS

UPDATE 		[dbo].[ws_OrderOffers] 

SET
			[OrderGuid] = @OrderGuid,
			[OfferGuid] = @OfferGuid,
			[PriceGuid] = @PriceGuid,
			[CurrencyGuid] = @CurrencyGuid,
			[TaxClassGuid] = @TaxClassGuid,
			[OfferPrice] = @OfferPrice,
			[AddedToCart] = @AddedToCart,
			[Quantity] = @Quantity
			
WHERE
			[ItemGuid] = @ItemGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTicket_Update]    Script Date: 03/27/2007 17:33:08 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTicket_Update]

/*
Author:   			Joe Audette
Created: 			3/25/2007
Last Modified: 		3/25/2007
*/
	
@Guid uniqueidentifier, 
@ProductGuid uniqueidentifier, 
@FullfillTermsGuid uniqueidentifier, 
@DownloadsAllowed int, 
@ExpireAfterDays int, 
@CountAfterDownload bit, 
@PurchaseTime datetime, 
@DownloadedCount int 


AS

UPDATE 		[dbo].[ws_FullfillDownloadTicket] 

SET
			[ProductGuid] = @ProductGuid,
			[FullfillTermsGuid] = @FullfillTermsGuid,
			[DownloadsAllowed] = @DownloadsAllowed,
			[ExpireAfterDays] = @ExpireAfterDays,
			[CountAfterDownload] = @CountAfterDownload,
			[PurchaseTime] = @PurchaseTime,
			[DownloadedCount] = @DownloadedCount
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTicket_Insert]    Script Date: 03/27/2007 17:33:01 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTicket_Insert]

/*
Author:   			Joe Audette
Created: 			3/25/2007
Last Modified: 		3/25/2007
*/

@Guid uniqueidentifier,
@StoreGuid uniqueidentifier,
@OrderGuid uniqueidentifier,
@UserGuid uniqueidentifier,
@ProductGuid uniqueidentifier,
@FullfillTermsGuid uniqueidentifier,
@DownloadsAllowed int,
@ExpireAfterDays int,
@CountAfterDownload bit,
@PurchaseTime datetime,
@DownloadedCount int

	
AS

INSERT INTO 	[dbo].[ws_FullfillDownloadTicket] 
(
				[Guid],
				[StoreGuid],
				[OrderGuid],
				[UserGuid],
				[ProductGuid],
				[FullfillTermsGuid],
				[DownloadsAllowed],
				[ExpireAfterDays],
				[CountAfterDownload],
				[PurchaseTime],
				[DownloadedCount]
) 

VALUES 
(
				@Guid,
				@StoreGuid,
				@OrderGuid,
				@UserGuid,
				@ProductGuid,
				@FullfillTermsGuid,
				@DownloadsAllowed,
				@ExpireAfterDays,
				@CountAfterDownload,
				@PurchaseTime,
				@DownloadedCount
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTicket_SelectOne]    Script Date: 03/27/2007 17:33:03 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTicket_SelectOne]

/*
Author:   			Joe Audette
Created: 			3/25/2007
Last Modified: 		3/25/2007
*/

@Guid uniqueidentifier

AS


SELECT
		[Guid],
		[StoreGuid],
		[OrderGuid],
		[UserGuid],
		[ProductGuid],
		[FullfillTermsGuid],
		[DownloadsAllowed],
		[ExpireAfterDays],
		[CountAfterDownload],
		[PurchaseTime],
		[DownloadedCount]
		
FROM
		[dbo].[ws_FullfillDownloadTicket]
		
WHERE
		[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTicket_Delete]    Script Date: 03/27/2007 17:32:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTicket_Delete]

/*
Author:   			Joe Audette
Created: 			3/25/2007
Last Modified: 		3/25/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_FullfillDownloadTicket]
WHERE
	[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_FullfillDownloadTicket_IncrementDownloadCount]    Script Date: 03/27/2007 17:32:59 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_FullfillDownloadTicket_IncrementDownloadCount]

/*
Author:   			Joe Audette
Created: 			3/25/2007
Last Modified: 		3/25/2007
*/
	
@Guid uniqueidentifier

AS

UPDATE 		[dbo].[ws_FullfillDownloadTicket] 

SET
			[DownloadedCount] = [DownloadedCount] + 1
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Offer_Insert]    Script Date: 03/27/2007 17:33:32 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Offer_Insert]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		3/15/2007
*/

@Guid uniqueidentifier,
@StoreGuid uniqueidentifier,
@IsVisible bit,
@IsSpecial bit,
@Created datetime,
@CreatedBy uniqueidentifier,
@CreatedFromIP nvarchar(255),
@IsDeleted bit,
@LastModified datetime,
@LastModifiedBy uniqueidentifier,
@LastModifiedFromIP nvarchar(255),
@TaxClassGuid uniqueidentifier

	
AS
INSERT INTO 	[dbo].[ws_Offer] 
(
				[Guid],
				[StoreGuid],
				[IsVisible],
				[IsSpecial],
				[Created],
				[CreatedBy],
				[CreatedFromIP],
				[IsDeleted],
				[LastModified],
				[LastModifiedBy],
				[LastModifiedFromIP],
				[TaxClassGuid]
) 

VALUES 
(
				@Guid,
				@StoreGuid,
				@IsVisible,
				@IsSpecial,
				@Created,
				@CreatedBy,
				@CreatedFromIP,
				@IsDeleted,
				@LastModified,
				@LastModifiedBy,
				@LastModifiedFromIP,
				@TaxClassGuid
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_Offer_Update]    Script Date: 03/27/2007 17:33:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Offer_Update]

/*
Author:   			Joe Audette
Created: 			2/28/2007
Last Modified: 		3/15/2007
*/
	
@Guid uniqueidentifier, 
@IsVisible bit, 
@IsSpecial bit, 
@LastModified datetime, 
@LastModifiedBy uniqueidentifier, 
@LastModifiedFromIP nvarchar(255),
@TaxClassGuid uniqueidentifier


AS
UPDATE 		[dbo].[ws_Offer] 

SET
			
			[IsVisible] = @IsVisible,
			[IsSpecial] = @IsSpecial,
			[LastModified] = @LastModified,
			[LastModifiedBy] = @LastModifiedBy,
			[LastModifiedFromIP] = @LastModifiedFromIP,
			[TaxClassGuid] = @TaxClassGuid
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Category_SelectOne]    Script Date: 03/27/2007 17:32:22 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Category_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/21/2007
Last Modified: 		2/22/2007
*/

@Guid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS
SELECT
		c.[Guid],
		c.[ParentGuid],
		c.[StoreGuid],
		'Name' = COALESCE(cd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_CategoryDescription]
			WHERE [dbo].[ws_CategoryDescription].[CategoryGuid] = c.Guid)
			),
		[ImageFileName],
		c.[Sort],
		c.[Created],
		c.[LastModified]
		
FROM
		[dbo].[ws_Category] c

LEFT OUTER JOIN
		[dbo].[ws_CategoryDescription] cd

ON		c.Guid = cd.CategoryGuid
AND		cd.LanguageGuid = @LanguageGuid
		
WHERE
		c.[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Category_SelectAll]    Script Date: 03/27/2007 17:32:21 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Category_SelectAll]

/*
Author:   			Joe Audette
Created: 			2/21/2007
Last Modified: 		2/21/2007
*/

@StoreGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS
SELECT
		c.[Guid],
		c.[ParentGuid],
		c.[StoreGuid],
		'Name' = COALESCE(cd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_CategoryDescription]
			WHERE [dbo].[ws_CategoryDescription].[CategoryGuid] = c.Guid)
			),

		c.[ImageFileName],
		c.[Sort],
		c.[Created],
		c.[LastModified]
		
FROM
		[dbo].[ws_Category] c


LEFT OUTER JOIN
		[dbo].[ws_CategoryDescription] cd

ON		c.Guid = cd.CategoryGuid
AND		cd.LanguageGuid = @LanguageGuid

WHERE   c.[StoreGuid] = @StoreGuid

ORDER BY
		COALESCE(cd.[Name],
			(SELECT TOP 1 [Name] + ' needs translation'
			FROM [dbo].[ws_CategoryDescription]
			WHERE [dbo].[ws_CategoryDescription].[CategoryGuid] = c.Guid)
			)
GO
/****** Object:  StoredProcedure [dbo].[ws_CategoryDescription_Update]    Script Date: 03/27/2007 17:32:31 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CategoryDescription_Update]

/*
Author:   			Joe Audette
Created: 			2/22/2007
Last Modified: 		2/22/2007
*/
	
@CategoryGuid uniqueidentifier, 
@LanguageGuid uniqueidentifier, 
@Name nvarchar(255) 


AS

UPDATE 		[dbo].[ws_CategoryDescription] 

SET
			[Name] = @Name
			
WHERE
			[CategoryGuid] = @CategoryGuid
			AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_CategoryDescription_SelectOne]    Script Date: 03/27/2007 17:32:30 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CategoryDescription_SelectOne]

/*
Author:   			Joe Audette
Created: 			2/22/2007
Last Modified: 		2/22/2007
*/

@CategoryGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS


SELECT
		[CategoryGuid],
		[LanguageGuid],
		[Name]
		
FROM
		[dbo].[ws_CategoryDescription]
		
WHERE
		[CategoryGuid] = @CategoryGuid
		AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_CategoryDescription_Insert]    Script Date: 03/27/2007 17:32:27 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CategoryDescription_Insert]

-- THIS STORED PROCEDURE NEEDS TO BE MANUALLY COMPLETED
-- MULITPLE PRIMARY KEY MEMBERS OR NON-GUID/INT PRIMARY KEY

@CategoryGuid uniqueidentifier,
@LanguageGuid uniqueidentifier,
@Name nvarchar(255)


AS

INSERT INTO 		[dbo].[ws_CategoryDescription] 
(
					[CategoryGuid],
					[LanguageGuid],
					[Name]
) 

VALUES 
(
					@CategoryGuid,
					@LanguageGuid,
					@Name
)
GO
/****** Object:  StoredProcedure [dbo].[ws_CategoryDescription_DeleteByCategory]    Script Date: 03/27/2007 17:32:26 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CategoryDescription_DeleteByCategory]

/*
Author:   			Joe Audette
Created: 			2/22/2007
Last Modified: 		2/22/2007
*/

@CategoryGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_CategoryDescription]
WHERE
	[CategoryGuid] = @CategoryGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_CategoryDescription_Delete]    Script Date: 03/27/2007 17:32:25 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_CategoryDescription_Delete]

/*
Author:   			Joe Audette
Created: 			2/22/2007
Last Modified: 		2/22/2007
*/

@CategoryGuid uniqueidentifier,
@LanguageGuid uniqueidentifier

AS

DELETE FROM [dbo].[ws_CategoryDescription]
WHERE
	[CategoryGuid] = @CategoryGuid
	AND [LanguageGuid] = @LanguageGuid
GO
/****** Object:  StoredProcedure [dbo].[ws_Category_Update]    Script Date: 03/27/2007 17:32:25 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Category_Update]

/*
Author:   			Joe Audette
Created: 			2/21/2007
Last Modified: 		2/21/2007
*/
	
@Guid uniqueidentifier, 
@ParentGuid uniqueidentifier, 
@ImageFileName nvarchar(75), 
@Sort int, 
@LastModified datetime 


AS

UPDATE 		[dbo].[ws_Category] 

SET
			[ParentGuid] = @ParentGuid,
			[ImageFileName] = @ImageFileName,
			[Sort] = @Sort,
			[LastModified] = @LastModified
			
WHERE
			[Guid] = @Guid
GO
/****** Object:  StoredProcedure [dbo].[ws_Category_Insert]    Script Date: 03/27/2007 17:32:20 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Category_Insert]

/*
Author:   			Joe Audette
Created: 			2/21/2007
Last Modified: 		2/21/2007
*/

@Guid uniqueidentifier,
@ParentGuid uniqueidentifier,
@StoreGuid uniqueidentifier,
@ImageFileName nvarchar(75),
@Sort int,
@Created datetime,
@LastModified datetime

	
AS

INSERT INTO 	[dbo].[ws_Category] 
(
				[Guid],
				[ParentGuid],
				[StoreGuid],
				[ImageFileName],
				[Sort],
				[Created],
				[LastModified]
) 

VALUES 
(
				@Guid,
				@ParentGuid,
				@StoreGuid,
				@ImageFileName,
				@Sort,
				@Created,
				@LastModified
				
)
GO
/****** Object:  StoredProcedure [dbo].[ws_Category_Delete]    Script Date: 03/27/2007 17:32:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ws_Category_Delete]

/*
Author:   			Joe Audette
Created: 			2/21/2007
Last Modified: 		2/21/2007
*/

@Guid uniqueidentifier

AS

DELETE FROM [dbo].[ws_Category]
WHERE
	[Guid] = @Guid
GO

